2025-07-29 02:39:13,594 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 02:39:13,943 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:39:13] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:54:46,757 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:46] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 02:54:47,983 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:47] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 02:54:48,806 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:48] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 02:54:49,920 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:49] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 02:54:55,716 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:55] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 02:54:56,253 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:56] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 02:54:57,612 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:57] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 02:54:58,720 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:58] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 02:54:58,793 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:54:58] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:54:59,322 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 02:54:59,850 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 02:55:00,027 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 02:55:00,028 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 02:55:00,377 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:55:00] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:55:20,420 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:55:20] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:55:20,948 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 02:55:21,123 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:55:21] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 03:19:41,502 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 03:19:41] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 03:19:42,738 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 03:19:42] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 03:19:43,564 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 03:19:43] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 03:19:44,695 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 03:19:44] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 03:19:44,760 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 03:19:44] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 03:19:45,284 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 03:19:45,814 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 03:19:45,993 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 03:19:45,993 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 03:19:46,343 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 03:19:46] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 03:19:48,202 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 03:19:48] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 03:19:49,324 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 03:19:49] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 04:13:48,018 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:13:48] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 04:13:49,239 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:13:49] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 04:15:31,440 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:15:31] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 04:15:32,644 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:15:32] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 04:15:32,707 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:15:32] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 04:15:33,225 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 04:15:33,793 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 04:15:33,966 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 04:15:33,967 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 04:15:34,311 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:15:34] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 04:17:20,620 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:20] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-29 04:17:20,621 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:20] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-29 04:17:20,624 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:20] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-29 04:17:20,625 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:20] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-29 04:17:22,871 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:22] "OPTIONS /api/whatsapp/status/123 HTTP/1.1" 200 -
2025-07-29 04:17:30,091 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:30] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 04:17:31,547 - api.flow_api - INFO - [PATCH /api/flow/255] Received raw data: {'plubotId': '255', 'flowName': 'Shine', 'nodes': [{'data': {'id': 'start-b21c5b07', 'label': 'Inicio'}, 'id': 'start-b21c5b07', 'position': {'x': 428.58776649357213, 'y': -60.64694162339305}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'conditions': [{'color': '#3498db', 'id': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'deb25c04-a26d-42cb-a609-5116da82a666', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'text': 'Opci√≥n C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-15194846', 'isEditing': False, 'label': 'Decisi√≥n', 'question': '3 caminos A, B o C'}, 'id': 'decision-15194846', 'position': {'x': 696.3074053266023, 'y': 223.4391504665747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-9d38d44b', 'label': 'Fin'}, 'id': 'end-9d38d44b', 'position': {'x': 1063.174972511597, 'y': 790.2171124969482}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opci√≥n A'}, 'id': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'position': {'x': 385.933400084583, 'y': 466.336469980641}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'deb25c04-a26d-42cb-a609-5116da82a666', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opci√≥n B'}, 'id': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'position': {'x': 702.0891706899685, 'y': 616.1186399406764}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'instruction': 'Opci√≥n C', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opci√≥n C'}, 'id': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'position': {'x': 1001.9150417337255, 'y': 450.4485738643202}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'message-65de2da7', 'label': 'Mensaje', 'lastUpdated': '2025-07-28T04:49:41.244Z', 'message': 'Holis', 'variables': []}, 'id': 'message-65de2da7', 'position': {'x': 722.0698301363249, 'y': 75.1058059554174}, 'type': 'message', 'width': 226, 'height': 104}], 'edges': [{'animated': True, 'id': '10926', 'label': '', 'source': 'start-b21c5b07', 'target': 'message-65de2da7', 'type': 'default'}, {'animated': True, 'id': '10927', 'label': '', 'source': 'message-65de2da7', 'target': 'decision-15194846', 'type': 'eliteEdge'}, {'animated': True, 'id': '10928', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'target': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10929', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-deb25c04-a26d-42cb-a609-5116da82a666', 'target': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10930', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'target': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10931', 'label': '', 'source': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10932', 'label': '', 'source': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10933', 'label': '', 'source': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}]}
2025-07-29 04:17:31,547 - api.flow_api - INFO - [PATCH /api/flow/255] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-29 04:17:32,442 - api.flow_api - INFO - [update_full_flow - plubot_id=255] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-29 04:17:34,531 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 255
2025-07-29 04:17:34,532 - api.flow_api - INFO - Flujo actualizado para plubot 255 por usuario 74
2025-07-29 04:17:34,702 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:34] "PATCH /api/flow/255 HTTP/1.1" 200 -
2025-07-29 04:17:35,540 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 04:17:36,224 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 04:17:36,401 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 04:17:36,402 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 04:17:36,746 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:36] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 04:17:38,501 - services.whatsapp_service - ERROR - Error en la comunicaci√≥n con la API de WhatsApp
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rex/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-29 04:17:38,512 - services.whatsapp_service - ERROR - Error al verificar el estado de WhatsApp para 123
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rex/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rex/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-29 04:17:38,514 - app - ERROR - Exception on /api/whatsapp/status/123 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rex/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rex/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rex/Desktop/Plubot/plubot-backend/api/whatsapp_api.py", line 75, in get_status
    status = service.get_connection_status(plubot_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rex/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 104, in get_connection_status
    connection = WhatsAppConnection.query.filter_by(plubot_id=plubot_id).first()
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WhatsAppConnection' has no attribute 'query'
2025-07-29 04:17:38,689 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:17:38] "[35m[1mGET /api/whatsapp/status/123 HTTP/1.1[0m" 500 -
2025-07-29 04:32:36,807 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:32:36] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 04:32:38,027 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:32:38] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 04:32:39,880 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:32:39] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 04:32:40,990 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:32:40] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 04:32:44,273 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:32:44] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 04:32:44,797 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 04:32:45,320 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 04:32:45,492 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 04:32:45,493 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 04:32:45,838 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 04:32:45] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 05:08:38,455 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 05:08:38] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 05:08:40,081 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 05:08:40] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 14:10:20,238 - root - INFO - Sistema de logging configurado correctamente
2025-07-29 14:10:20,246 - root - INFO - Sistema de logging configurado correctamente
2025-07-29 14:10:20,265 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-29 14:10:20,265 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-29 14:10:36,394 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:10:36] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 14:10:40,485 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:10:40] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 14:10:40,522 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:10:40] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 14:10:46,084 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:10:46] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 14:10:49,211 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 14:10:49,742 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 14:10:49,998 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 14:10:49,998 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 14:10:50,343 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:10:50] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 14:10:51,997 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:10:51] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 14:10:52,515 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 14:10:52,686 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:10:52] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 14:11:11,930 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:11:11] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 14:11:12,447 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 14:11:12,619 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:11:12] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 14:12:01,213 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:12:01] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 14:12:01,728 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 14:12:01,899 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 14:12:01] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 17:10:43,955 - root - INFO - Sistema de logging configurado correctamente
2025-07-29 17:10:43,963 - root - INFO - Sistema de logging configurado correctamente
2025-07-29 17:10:43,976 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-29 17:10:43,976 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-29 17:10:59,414 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:10:59] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 17:10:59,423 - app - WARNING - Authentication error: Signature has expired
2025-07-29 17:10:59,423 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:10:59] "[31m[1mGET /api/flow/255 HTTP/1.1[0m" 401 -
2025-07-29 17:10:59,434 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:10:59] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-29 17:10:59,436 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:10:59] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-29 17:10:59,438 - app - WARNING - Authentication error: Signature has expired
2025-07-29 17:10:59,440 - app - WARNING - Authentication error: Signature has expired
2025-07-29 17:10:59,440 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:10:59] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-29 17:10:59,441 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:10:59] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-29 17:10:59,464 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:10:59] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 17:10:59,469 - app - WARNING - Authentication error: Signature has expired
2025-07-29 17:10:59,469 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:10:59] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 17:11:03,256 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:03] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:11:07,096 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:07] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:11:07,136 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:07] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 17:11:10,104 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 17:11:10,805 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:10] "[33mGET /api/flow/255 HTTP/1.1[0m" 404 -
2025-07-29 17:11:20,638 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:20] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 17:11:21,153 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 17:11:21,851 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:21] "[33mGET /api/flow/255 HTTP/1.1[0m" 404 -
2025-07-29 17:11:29,658 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:29] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 17:11:30,859 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:30] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 17:11:32,400 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:32] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:11:33,518 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:33] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:11:51,897 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:51] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 17:11:52,410 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 17:11:53,749 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 17:11:53,940 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 17:11:53,941 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 17:11:54,284 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:11:54] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 17:39:54,086 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:39:54] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 17:39:55,320 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:39:55] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 17:39:56,553 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:39:56] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 17:39:56,968 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:39:56] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:39:58,121 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:39:58] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:39:58,293 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:39:58] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 17:39:58,812 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 17:39:59,227 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:39:59] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:40:01,327 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:40:01] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:40:01,570 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 17:40:01,746 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 17:40:01,747 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 17:40:02,098 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:40:02] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 17:55:37,796 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:55:37] "OPTIONS /api/api/emotion-detect HTTP/1.1" 200 -
2025-07-29 17:55:37,802 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:55:37] "[31m[1mPOST /api/api/emotion-detect HTTP/1.1[0m" 405 -
2025-07-29 17:55:48,316 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:55:48] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 17:55:49,571 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:55:49] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 17:55:50,315 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:55:50] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 17:55:51,429 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 17:55:51] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 18:17:38,185 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:17:38] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 18:17:39,409 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:17:39] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 18:33:49,289 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:49] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 18:33:50,079 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:50] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 18:33:50,429 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:50] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 18:33:50,596 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:50] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 18:33:50,606 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:50] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 18:33:50,614 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:50] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-29 18:33:50,620 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:50] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 422 -
2025-07-29 18:33:51,118 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 18:33:51,841 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:51] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 18:33:52,791 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 18:33:52,969 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 18:33:52,970 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 18:33:53,329 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:53] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 18:33:53,447 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:33:53] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 18:34:03,350 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:34:03] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 18:34:03,875 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 18:34:04,049 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:34:04] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 18:35:24,150 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:35:24] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 18:35:24,679 - api.flow_api - INFO - [PATCH /api/flow/191] Received raw data: {'plubotId': '191', 'flowName': 'Vida', 'nodes': [{'data': {'height': 156, 'id': 'message-1749165026635-411', 'isEditing': True, 'label': 'Nuevo message', 'lastModified': '2025-06-06T03:39:20.458Z', 'lastUpdated': '2025-06-09T07:09:50.101Z', 'message': 'Hola, buenas tardes!', 'style': {'opacity': 1, 'visibility': 'visible'}, 'title': 'Mensaje de Sistema', 'variables': [], 'width': 224}, 'id': 'message-1749165026635-411', 'position': {'x': -90.84814789545874, 'y': -398.740978470144}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'height': 156, 'id': 'message-4342eb18', 'label': 'Mensaje', 'lastUpdated': '2025-06-10T04:08:40.795Z', 'message': 'Como te sientes ??', 'style': {'opacity': 1, 'visibility': 'visible'}, 'variables': [], 'width': 224}, 'id': 'message-4342eb18', 'position': {'x': 144.17183378677112, 'y': -245.86470823616682}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'category': 'inteligencia', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'error': None, 'height': 55, 'icon': 'üß†', 'id': 'advancedAiPower-34ad7880', 'image': '/marketplace/extension-openai.webp', 'interpolatedPromptPreview': 'Vista previa interpolada para: Saluda con respeto al usuario ...', 'isCollapsed': True, 'isLoading': False, 'label': 'IA Avanzada Configurable', 'lastResponse': '¬°Hola, estimado usuario! Es un placer saludarte con todo el respeto y cari√±o que mereces. Que este d√≠a est√© lleno de bendiciones para ti, que el amor y la paz te acompa√±en en cada paso que des. ¬øEn qu√© puedo ayudarte?', 'maxTokens': 512, 'nodeTypeToCreate': 'ai', 'promptTemplate': 'Saluda con respeto al usuario y bend√≠celo', 'responseVariable': 'ai_response', 'streaming': False, 'style': {'opacity': 1, 'visibility': 'visible'}, 'systemMessage': 'Eres un experto en amor', 'temperature': 0.9, 'title': 'IA Avanzada Configurable', 'ultraMode': False, 'width': 331}, 'id': 'advancedAiPower-34ad7880', 'position': {'x': -205.4049662088027, 'y': -209.38820885871743}, 'type': 'ai', 'width': 345, 'height': 56}, {'data': {'height': 164, 'id': 'emotionDetection-f535d882', 'label': 'Detecci√≥n de Emoci√≥n', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 324}, 'id': 'emotionDetection-f535d882', 'position': {'x': 107.76372783975216, 'y': -77.97762974783679}, 'type': 'emotionDetection', 'width': 324, 'height': 164}, {'data': {'height': 156, 'id': 'message-a7ed24a2', 'label': 'Mensaje', 'lastUpdated': '2025-06-10T03:05:09.073Z', 'message': 'Gracias capo', 'style': {'opacity': 1, 'visibility': 'visible'}, 'variables': [], 'width': 224}, 'id': 'message-a7ed24a2', 'position': {'x': 336.5007085912268, 'y': 266.261702850799}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'height': 153, 'id': 'message-76d803ff', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-76d803ff', 'position': {'x': 303.1049228151488, 'y': 458.20152386540656}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-06e0f8c5', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-06e0f8c5', 'position': {'x': 68.7806797899485, 'y': 456.2791757561571}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-68cbf983', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-68cbf983', 'position': {'x': 24.675756974799413, 'y': 265.73260445332136}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-b51462c7', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-b51462c7', 'position': {'x': 407.5079705459617, 'y': 105.94129726875693}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-2affa394', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-2affa394', 'position': {'x': -79.24127743714224, 'y': 103.35798046176936}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 132, 'id': 'end-477c21b9', 'label': 'Fin', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 308}, 'id': 'end-477c21b9', 'position': {'x': 164.9157347534054, 'y': 629.370594771904}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'dynamicContent': 'Bienvenido al flujo de inicio.', 'height': 142, 'id': 'start-1749165025642-952', 'label': 'Inicio', 'lastModified': '2025-06-05T23:40:22.497Z', 'startMessage': 'Inicio de la conversaci√≥n', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 229}, 'id': 'start-1749165025642-952', 'position': {'x': -332.4889088639147, 'y': -403.6760710547748}, 'type': 'start', 'width': 229, 'height': 156}, {'id': 'start-d63aac8f', 'type': 'start', 'position': {'x': -891.089090753466, 'y': -46.10589755371429}, 'data': {'id': 'start-d63aac8f', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 156}, {'id': 'message-25554d0e', 'type': 'message', 'position': {'x': -679.1497504807404, 'y': 331.2948574933322}, 'data': {'id': 'message-25554d0e', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'animated': True, 'id': '6823', 'label': '', 'source': 'message-4342eb18', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'emotionDetection-f535d882', 'targetHandle': 'input-text', 'type': 'elite-edge'}, {'animated': True, 'id': '6824', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-frustrated', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-a7ed24a2', 'type': 'elite-edge'}, {'animated': True, 'id': '6825', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-neutral', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-76d803ff', 'type': 'elite-edge'}, {'animated': True, 'id': '6826', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-sad', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-06e0f8c5', 'type': 'elite-edge'}, {'animated': True, 'id': '6827', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-angry', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-68cbf983', 'type': 'elite-edge'}, {'animated': True, 'id': '6828', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-surprised', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-b51462c7', 'type': 'elite-edge'}, {'animated': True, 'id': '6829', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-happy', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-2affa394', 'type': 'elite-edge'}, {'animated': True, 'id': '6830', 'label': '', 'source': 'message-76d803ff', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6831', 'label': '', 'source': 'message-06e0f8c5', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6832', 'label': '', 'source': 'message-68cbf983', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6833', 'label': '', 'source': 'message-b51462c7', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6834', 'label': '', 'source': 'message-2affa394', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6835', 'label': '', 'source': 'message-a7ed24a2', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6820', 'label': '', 'source': 'advancedAiPower-34ad7880', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-4342eb18', 'type': 'elite-edge'}, {'animated': True, 'id': '6821', 'label': '', 'source': 'message-1749165026635-411', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'advancedAiPower-34ad7880', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6822', 'label': '', 'source': 'start-1749165025642-952', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-1749165026635-411', 'type': 'elite-edge'}, {'zIndex': 0, 'source': 'start-d63aac8f', 'sourceHandle': 'output', 'target': 'message-25554d0e', 'targetHandle': 'default', 'id': 'reactflow__edge-start-d63aac8foutput-message-25554d0edefault'}]}
2025-07-29 18:35:24,681 - api.flow_api - INFO - [PATCH /api/flow/191] Extracted: nodes_count=14, edges_count=17, name='N/A'
2025-07-29 18:35:25,384 - api.flow_api - INFO - [update_full_flow - plubot_id=191] Starting update. Received: nodes_count=14, edges_count=17, name='None'
2025-07-29 18:35:25,728 - api.flow_api - INFO - [PATCH /api/flow/191] Received raw data: {'plubotId': '191', 'flowName': 'Vida', 'nodes': [{'data': {'height': 156, 'id': 'message-1749165026635-411', 'isEditing': True, 'label': 'Nuevo message', 'lastModified': '2025-06-06T03:39:20.458Z', 'lastUpdated': '2025-06-09T07:09:50.101Z', 'message': 'Hola, buenas tardes!', 'style': {'opacity': 1, 'visibility': 'visible'}, 'title': 'Mensaje de Sistema', 'variables': [], 'width': 224}, 'id': 'message-1749165026635-411', 'position': {'x': -90.84814789545874, 'y': -398.740978470144}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'height': 156, 'id': 'message-4342eb18', 'label': 'Mensaje', 'lastUpdated': '2025-06-10T04:08:40.795Z', 'message': 'Como te sientes ??', 'style': {'opacity': 1, 'visibility': 'visible'}, 'variables': [], 'width': 224}, 'id': 'message-4342eb18', 'position': {'x': 144.17183378677112, 'y': -245.86470823616682}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'category': 'inteligencia', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'error': None, 'height': 55, 'icon': 'üß†', 'id': 'advancedAiPower-34ad7880', 'image': '/marketplace/extension-openai.webp', 'interpolatedPromptPreview': 'Vista previa interpolada para: Saluda con respeto al usuario ...', 'isCollapsed': True, 'isLoading': False, 'label': 'IA Avanzada Configurable', 'lastResponse': '¬°Hola, estimado usuario! Es un placer saludarte con todo el respeto y cari√±o que mereces. Que este d√≠a est√© lleno de bendiciones para ti, que el amor y la paz te acompa√±en en cada paso que des. ¬øEn qu√© puedo ayudarte?', 'maxTokens': 512, 'nodeTypeToCreate': 'ai', 'promptTemplate': 'Saluda con respeto al usuario y bend√≠celo', 'responseVariable': 'ai_response', 'streaming': False, 'style': {'opacity': 1, 'visibility': 'visible'}, 'systemMessage': 'Eres un experto en amor', 'temperature': 0.9, 'title': 'IA Avanzada Configurable', 'ultraMode': False, 'width': 331}, 'id': 'advancedAiPower-34ad7880', 'position': {'x': -205.4049662088027, 'y': -209.38820885871743}, 'type': 'ai', 'width': 345, 'height': 56}, {'data': {'height': 164, 'id': 'emotionDetection-f535d882', 'label': 'Detecci√≥n de Emoci√≥n', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 324}, 'id': 'emotionDetection-f535d882', 'position': {'x': 107.76372783975216, 'y': -77.97762974783679}, 'type': 'emotionDetection', 'width': 324, 'height': 164}, {'data': {'height': 156, 'id': 'message-a7ed24a2', 'label': 'Mensaje', 'lastUpdated': '2025-06-10T03:05:09.073Z', 'message': 'Gracias capo', 'style': {'opacity': 1, 'visibility': 'visible'}, 'variables': [], 'width': 224}, 'id': 'message-a7ed24a2', 'position': {'x': 336.5007085912268, 'y': 266.261702850799}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'height': 153, 'id': 'message-76d803ff', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-76d803ff', 'position': {'x': 303.1049228151488, 'y': 458.20152386540656}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-06e0f8c5', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-06e0f8c5', 'position': {'x': 68.7806797899485, 'y': 456.2791757561571}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-68cbf983', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-68cbf983', 'position': {'x': 24.675756974799413, 'y': 265.73260445332136}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-b51462c7', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-b51462c7', 'position': {'x': 407.5079705459617, 'y': 105.94129726875693}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-2affa394', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-2affa394', 'position': {'x': -79.24127743714224, 'y': 103.35798046176936}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 132, 'id': 'end-477c21b9', 'label': 'Fin', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 308}, 'id': 'end-477c21b9', 'position': {'x': 164.9157347534054, 'y': 629.370594771904}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'dynamicContent': 'Bienvenido al flujo de inicio.', 'height': 142, 'id': 'start-1749165025642-952', 'label': 'Inicio', 'lastModified': '2025-06-05T23:40:22.497Z', 'startMessage': 'Inicio de la conversaci√≥n', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 229}, 'id': 'start-1749165025642-952', 'position': {'x': -332.4889088639147, 'y': -403.6760710547748}, 'type': 'start', 'width': 229, 'height': 156}, {'id': 'start-d63aac8f', 'type': 'start', 'position': {'x': -891.089090753466, 'y': -46.10589755371429}, 'data': {'id': 'start-d63aac8f', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 156}, {'id': 'message-25554d0e', 'type': 'message', 'position': {'x': -679.1497504807404, 'y': 331.2948574933322}, 'data': {'id': 'message-25554d0e', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'animated': True, 'id': '6823', 'label': '', 'source': 'message-4342eb18', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'emotionDetection-f535d882', 'targetHandle': 'input-text', 'type': 'elite-edge'}, {'animated': True, 'id': '6824', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-frustrated', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-a7ed24a2', 'type': 'elite-edge'}, {'animated': True, 'id': '6825', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-neutral', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-76d803ff', 'type': 'elite-edge'}, {'animated': True, 'id': '6826', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-sad', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-06e0f8c5', 'type': 'elite-edge'}, {'animated': True, 'id': '6827', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-angry', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-68cbf983', 'type': 'elite-edge'}, {'animated': True, 'id': '6828', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-surprised', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-b51462c7', 'type': 'elite-edge'}, {'animated': True, 'id': '6829', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-happy', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-2affa394', 'type': 'elite-edge'}, {'animated': True, 'id': '6830', 'label': '', 'source': 'message-76d803ff', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6831', 'label': '', 'source': 'message-06e0f8c5', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6832', 'label': '', 'source': 'message-68cbf983', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6833', 'label': '', 'source': 'message-b51462c7', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6834', 'label': '', 'source': 'message-2affa394', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6835', 'label': '', 'source': 'message-a7ed24a2', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6820', 'label': '', 'source': 'advancedAiPower-34ad7880', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-4342eb18', 'type': 'elite-edge'}, {'animated': True, 'id': '6821', 'label': '', 'source': 'message-1749165026635-411', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'advancedAiPower-34ad7880', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '6822', 'label': '', 'source': 'start-1749165025642-952', 'style': {'stroke': '#ff00ff', 'strokeWidth': 2}, 'target': 'message-1749165026635-411', 'type': 'elite-edge'}, {'zIndex': 0, 'source': 'start-d63aac8f', 'sourceHandle': 'output', 'target': 'message-25554d0e', 'targetHandle': 'default', 'id': 'reactflow__edge-start-d63aac8foutput-message-25554d0edefault'}]}
2025-07-29 18:35:25,729 - api.flow_api - INFO - [PATCH /api/flow/191] Extracted: nodes_count=14, edges_count=17, name='N/A'
2025-07-29 18:35:26,428 - api.flow_api - INFO - [update_full_flow - plubot_id=191] Starting update. Received: nodes_count=14, edges_count=17, name='None'
2025-07-29 18:35:30,288 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 18:35:30,460 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:35:30] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 18:35:46,598 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 191
2025-07-29 18:35:46,599 - api.flow_api - INFO - Flujo actualizado para plubot 191 por usuario 3
2025-07-29 18:35:46,770 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:35:46] "PATCH /api/flow/191 HTTP/1.1" 200 -
2025-07-29 18:35:58,019 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10958, 191, 20472, 20473, , null, null, null, 2025-07-29 21:35:37.843544, 2025-07-29 21:35:57.673379, f, reactflow__edge-start-d63aac8foutput-message-25554d0edefault, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rex/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10958, 191, 20472, 20473, , null, null, null, 2025-07-29 21:35:37.843544, 2025-07-29 21:35:57.673379, f, reactflow__edge-start-d63aac8foutput-message-25554d0edefault, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20472, 'target_flow_id': 20473, 'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 29, 21, 35, 57, 673379), 'flow_edges_id': 10958}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-29 18:35:58,031 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 191
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10958, 191, 20472, 20473, , null, null, null, 2025-07-29 21:35:37.843544, 2025-07-29 21:35:57.673379, f, reactflow__edge-start-d63aac8foutput-message-25554d0edefault, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rex/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rex/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rex/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rex/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10958, 191, 20472, 20473, , null, null, null, 2025-07-29 21:35:37.843544, 2025-07-29 21:35:57.673379, f, reactflow__edge-start-d63aac8foutput-message-25554d0edefault, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20472, 'target_flow_id': 20473, 'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 29, 21, 35, 57, 673379), 'flow_edges_id': 10958}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-29 18:35:58,034 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 191
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10958, 191, 20472, 20473, , null, null, null, 2025-07-29 21:35:37.843544, 2025-07-29 21:35:57.673379, f, reactflow__edge-start-d63aac8foutput-message-25554d0edefault, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rex/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rex/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rex/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10958, 191, 20472, 20473, , null, null, null, 2025-07-29 21:35:37.843544, 2025-07-29 21:35:57.673379, f, reactflow__edge-start-d63aac8foutput-message-25554d0edefault, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20472, 'target_flow_id': 20473, 'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 29, 21, 35, 57, 673379), 'flow_edges_id': 10958}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-29 18:35:58,209 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:35:58] "[35m[1mPATCH /api/flow/191 HTTP/1.1[0m" 500 -
2025-07-29 18:55:57,809 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:55:57] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 18:55:59,125 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 18:55:59] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 19:01:09,127 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:01:09] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 19:01:10,429 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:01:10] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 19:01:10,505 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:01:10] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:01:11,024 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 19:01:11,706 - api.flow_api - INFO - DB query for flows returned 14 items.
2025-07-29 19:01:11,881 - api.flow_api - INFO - DB query for edges returned 17 items.
2025-07-29 19:01:11,881 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 19:01:12,225 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:01:12] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:08:52,999 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:08:52] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:08:53,617 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 19:08:54,623 - api.flow_api - INFO - DB query for flows returned 14 items.
2025-07-29 19:08:54,804 - api.flow_api - INFO - DB query for edges returned 17 items.
2025-07-29 19:08:54,805 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 19:08:55,204 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:08:55] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:26:20,294 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:20] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 19:26:21,502 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:21] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 19:26:22,844 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:22] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 19:26:24,035 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:24] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 19:26:24,110 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:24] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:26:24,347 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:24] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 19:26:24,360 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:24] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-29 19:26:24,363 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:24] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 422 -
2025-07-29 19:26:24,640 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 19:26:25,316 - api.flow_api - INFO - DB query for flows returned 14 items.
2025-07-29 19:26:25,489 - api.flow_api - INFO - DB query for edges returned 17 items.
2025-07-29 19:26:25,490 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 19:26:25,567 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:25] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 19:26:25,834 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:25] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:26:28,909 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:26:28] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 19:44:45,303 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:45] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 19:44:46,567 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:46] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 19:44:47,374 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:47] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 19:44:48,599 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:48] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 19:44:48,667 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:48] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 19:44:48,689 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:48] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-29 19:44:48,694 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:48] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 422 -
2025-07-29 19:44:48,699 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:48] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:44:49,232 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 19:44:49,919 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:49] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 19:44:50,010 - api.flow_api - INFO - DB query for flows returned 14 items.
2025-07-29 19:44:50,182 - api.flow_api - INFO - DB query for edges returned 17 items.
2025-07-29 19:44:50,183 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 19:44:50,534 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:50] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:44:53,275 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:53] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 19:44:58,744 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:44:58] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:44:59,264 - api.flow_api - INFO - [PATCH /api/flow/191] Received raw data: {'plubotId': '191', 'flowName': 'Vida', 'nodes': [{'data': {'height': 164, 'id': 'emotionDetection-f535d882', 'label': 'Detecci√≥n de Emoci√≥n', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 324}, 'id': 'emotionDetection-f535d882', 'position': {'x': 107.76372783975216, 'y': -77.97762974783679}, 'type': 'emotionDetection', 'width': 324, 'height': 164}, {'data': {'height': 156, 'id': 'message-a7ed24a2', 'label': 'Mensaje', 'lastUpdated': '2025-06-10T03:05:09.073Z', 'message': 'Gracias capo', 'style': {'opacity': 1, 'visibility': 'visible'}, 'variables': [], 'width': 224}, 'id': 'message-a7ed24a2', 'position': {'x': 336.5007085912268, 'y': 266.261702850799}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'height': 153, 'id': 'message-76d803ff', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-76d803ff', 'position': {'x': 303.1049228151488, 'y': 458.20152386540656}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-06e0f8c5', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-06e0f8c5', 'position': {'x': 68.7806797899485, 'y': 456.2791757561571}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-68cbf983', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-68cbf983', 'position': {'x': 24.675756974799413, 'y': 265.73260445332136}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-b51462c7', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-b51462c7', 'position': {'x': 407.5079705459617, 'y': 105.94129726875693}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 153, 'id': 'message-2affa394', 'label': 'Mensaje', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 210}, 'id': 'message-2affa394', 'position': {'x': -79.24127743714224, 'y': 103.35798046176936}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'height': 132, 'id': 'end-477c21b9', 'label': 'Fin', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 308}, 'id': 'end-477c21b9', 'position': {'x': 164.9157347534054, 'y': 629.370594771904}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'height': 156, 'id': 'message-4342eb18', 'label': 'Mensaje', 'lastUpdated': '2025-06-10T04:08:40.795Z', 'message': 'Como te sientes ??', 'style': {'opacity': 1, 'visibility': 'visible'}, 'variables': [], 'width': 224}, 'id': 'message-4342eb18', 'position': {'x': 144.17183378677112, 'y': -245.86470823616682}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'category': 'inteligencia', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'error': None, 'height': 55, 'icon': 'üß†', 'id': 'advancedAiPower-34ad7880', 'image': '/marketplace/extension-openai.webp', 'interpolatedPromptPreview': 'Vista previa interpolada para: Saluda con respeto al usuario ...', 'isCollapsed': True, 'isLoading': False, 'label': 'IA Avanzada Configurable', 'lastResponse': '¬°Hola, estimado usuario! Es un placer saludarte con todo el respeto y cari√±o que mereces. Que este d√≠a est√© lleno de bendiciones para ti, que el amor y la paz te acompa√±en en cada paso que des. ¬øEn qu√© puedo ayudarte?', 'maxTokens': 512, 'nodeTypeToCreate': 'ai', 'promptTemplate': 'Saluda con respeto al usuario y bend√≠celo', 'responseVariable': 'ai_response', 'streaming': False, 'style': {'opacity': 1, 'visibility': 'visible'}, 'systemMessage': 'Eres un experto en amor', 'temperature': 0.9, 'title': 'IA Avanzada Configurable', 'ultraMode': False, 'width': 331}, 'id': 'advancedAiPower-34ad7880', 'position': {'x': -205.4049662088027, 'y': -209.38820885871743}, 'type': 'ai', 'width': 345, 'height': 56}, {'data': {'height': 156, 'id': 'message-1749165026635-411', 'isEditing': True, 'label': 'Nuevo message', 'lastModified': '2025-06-06T03:39:20.458Z', 'lastUpdated': '2025-06-09T07:09:50.101Z', 'message': 'Hola, buenas tardes!', 'style': {'opacity': 1, 'visibility': 'visible'}, 'title': 'Mensaje de Sistema', 'variables': [], 'width': 224}, 'id': 'message-1749165026635-411', 'position': {'x': -90.84814789545874, 'y': -398.740978470144}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'dynamicContent': 'Bienvenido al flujo de inicio.', 'height': 142, 'id': 'start-1749165025642-952', 'label': 'Inicio', 'lastModified': '2025-06-05T23:40:22.497Z', 'startMessage': 'Inicio de la conversaci√≥n', 'style': {'opacity': 1, 'visibility': 'visible'}, 'width': 229}, 'id': 'start-1749165025642-952', 'position': {'x': -332.4889088639147, 'y': -403.6760710547748}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'animated': True, 'id': '10942', 'label': '', 'source': 'message-4342eb18', 'target': 'emotionDetection-f535d882', 'targetHandle': 'input-text', 'type': 'elite-edge'}, {'animated': True, 'id': '10943', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-frustrated', 'target': 'message-a7ed24a2', 'type': 'elite-edge'}, {'animated': True, 'id': '10944', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-neutral', 'target': 'message-76d803ff', 'type': 'elite-edge'}, {'animated': True, 'id': '10945', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-sad', 'target': 'message-06e0f8c5', 'type': 'elite-edge'}, {'animated': True, 'id': '10946', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-angry', 'target': 'message-68cbf983', 'type': 'elite-edge'}, {'animated': True, 'id': '10947', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-surprised', 'target': 'message-b51462c7', 'type': 'elite-edge'}, {'animated': True, 'id': '10948', 'label': '', 'source': 'emotionDetection-f535d882', 'sourceHandle': 'emotion-happy', 'target': 'message-2affa394', 'type': 'elite-edge'}, {'animated': True, 'id': '10949', 'label': '', 'source': 'message-76d803ff', 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '10950', 'label': '', 'source': 'message-06e0f8c5', 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '10951', 'label': '', 'source': 'message-68cbf983', 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '10952', 'label': '', 'source': 'message-b51462c7', 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '10953', 'label': '', 'source': 'message-2affa394', 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '10954', 'label': '', 'source': 'message-a7ed24a2', 'target': 'end-477c21b9', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '10955', 'label': '', 'source': 'advancedAiPower-34ad7880', 'target': 'message-4342eb18', 'type': 'elite-edge'}, {'animated': True, 'id': '10956', 'label': '', 'source': 'message-1749165026635-411', 'target': 'advancedAiPower-34ad7880', 'targetHandle': 'input', 'type': 'elite-edge'}, {'animated': True, 'id': '10957', 'label': '', 'source': 'start-1749165025642-952', 'target': 'message-1749165026635-411', 'type': 'elite-edge'}]}
2025-07-29 19:44:59,267 - api.flow_api - INFO - [PATCH /api/flow/191] Extracted: nodes_count=12, edges_count=16, name='N/A'
2025-07-29 19:44:59,976 - api.flow_api - INFO - [update_full_flow - plubot_id=191] Starting update. Received: nodes_count=12, edges_count=16, name='None'
2025-07-29 19:45:05,384 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 191
2025-07-29 19:45:05,385 - api.flow_api - INFO - Flujo actualizado para plubot 191 por usuario 3
2025-07-29 19:45:05,559 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:45:05] "PATCH /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:47:16,882 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:47:16] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 19:47:17,406 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 19:47:18,244 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 19:47:18,417 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 19:47:18,418 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 19:47:18,758 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 19:47:18] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:00:00,069 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:00:00] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 20:00:01,326 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:00:01] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 20:03:06,704 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:03:06] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 20:03:07,857 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:03:07] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 20:03:07,947 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:03:07] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:03:08,469 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 20:03:09,169 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 20:03:09,348 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 20:03:09,349 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 20:03:09,697 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:03:09] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:03:25,181 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:03:25] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:03:25,700 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:03:25,872 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:03:25] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:06:59,720 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:06:59] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 20:07:00,254 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:07:00] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 20:07:01,734 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:07:01] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 20:07:02,855 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:07:02] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 20:07:10,062 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:07:10] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:07:10,595 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:07:10,774 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:07:10] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:07:13,446 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:07:13] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-07-29 20:08:10,836 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:08:10] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:08:11,372 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 20:08:12,065 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 20:08:12,248 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 20:08:12,249 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 20:08:12,597 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:08:12] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:09:12,079 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:09:12] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:09:12,605 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:09:12,781 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:09:12] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:10:09,660 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:10:09] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:10:10,275 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:10:10,450 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:10:10] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:11:50,942 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:11:50] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:11:51,471 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:11:51,651 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:11:51] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:13:20,978 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:13:20] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:13:21,518 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 20:13:22,234 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 20:13:22,406 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 20:13:22,407 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 20:13:22,752 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:13:22] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:13:25,136 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:13:25,306 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:13:25] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:13:48,390 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:13:48] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:13:48,923 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:13:49,095 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:13:49] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:14:08,349 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:14:08] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:14:08,898 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:14:09,078 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:14:09] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:15:43,168 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:15:43] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:15:43,699 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:15:43,869 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:15:43] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:17:05,757 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:17:05] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:17:06,278 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:17:06,476 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:17:06] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:17:52,772 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:17:52] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:17:53,301 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:17:53,476 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:17:53] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:18:43,257 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:18:43] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:18:43,770 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 20:18:44,486 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 20:18:44,659 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 20:18:44,659 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 20:18:45,006 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:18:45] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:19:27,832 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:19:27] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:19:28,358 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:19:28,531 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:19:28] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:22:54,963 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:22:54] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:22:55,493 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:22:55,668 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:22:55] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:45:28,510 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:45:28] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:45:29,053 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 20:45:30,147 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 20:45:30,324 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 20:45:30,324 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 20:45:30,678 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:45:30] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:46:34,800 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:46:34] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 20:46:35,323 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 20:46:35,496 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 20:46:35] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 21:26:24,511 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 21:26:24] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 21:26:24,531 - app - WARNING - Authentication error: Signature has expired
2025-07-29 21:26:24,533 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 21:26:24] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 21:26:29,115 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 21:26:29] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 21:26:30,357 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 21:26:30] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 21:26:30,539 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 21:26:30] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 21:26:31,103 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 21:26:31,994 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 21:26:32,165 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 21:26:32,165 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 21:26:32,508 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 21:26:32] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 21:32:15,338 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 21:32:15] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 21:32:15,914 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 21:32:16,610 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 21:32:16,784 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 21:32:16,784 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 21:32:17,131 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 21:32:17] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 22:13:49,745 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:13:49] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 22:13:50,989 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:13:50] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 22:22:19,694 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:22:19] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 22:22:20,998 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:22:20] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 22:22:21,121 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:22:21] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 22:22:21,651 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 22:22:22,486 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 22:22:22,664 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 22:22:22,665 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 22:22:23,010 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:22:23] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 22:22:24,740 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:22:24] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 22:22:25,922 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:22:25] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 22:41:45,987 - root - INFO - Sistema de logging configurado correctamente
2025-07-29 22:41:45,995 - root - INFO - Sistema de logging configurado correctamente
2025-07-29 22:41:46,008 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-29 22:41:46,008 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-29 22:41:49,793 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:41:49] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 22:41:53,138 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 22:41:53,144 - api.flow_api - INFO - Cache miss for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 22:41:56,348 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 22:41:56,350 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-29 22:41:56,525 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 22:41:56,525 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 22:41:56,528 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-29 22:41:56,529 - api.flow_api - INFO - Flow data for plubot 191 stored in cache with key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 22:41:56,876 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:41:56] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 22:41:56,879 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:41:56] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 22:42:02,078 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:42:02] "OPTIONS /api/flow/190 HTTP/1.1" 200 -
2025-07-29 22:42:02,602 - api.flow_api - INFO - Cache miss for key flow:190:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 22:42:03,798 - api.flow_api - INFO - DB query for flows returned 19 items.
2025-07-29 22:42:03,971 - api.flow_api - INFO - DB query for edges returned 21 items.
2025-07-29 22:42:03,972 - api.flow_api - INFO - Flow data for plubot 190 stored in cache with key flow:190:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 22:42:04,318 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:42:04] "GET /api/flow/190 HTTP/1.1" 200 -
2025-07-29 22:42:05,254 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:42:05] "OPTIONS /api/flow/191 HTTP/1.1" 200 -
2025-07-29 22:42:05,772 - api.flow_api - INFO - Cache hit for key flow:191:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 22:42:05,949 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:42:05] "GET /api/flow/191 HTTP/1.1" 200 -
2025-07-29 22:42:22,024 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:42:22] "OPTIONS /api/flow/190 HTTP/1.1" 200 -
2025-07-29 22:42:22,547 - api.flow_api - INFO - Cache hit for key flow:190:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 22:42:22,721 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 22:42:22] "GET /api/flow/190 HTTP/1.1" 200 -
2025-07-29 23:20:01,668 - root - INFO - Sistema de logging configurado correctamente
2025-07-29 23:20:01,676 - root - INFO - Sistema de logging configurado correctamente
2025-07-29 23:20:02,791 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-29 23:20:02,791 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-29 23:23:38,774 - api.auth - INFO - Recibida solicitud para /api/auth/register con m√©todo OPTIONS
2025-07-29 23:23:38,776 - api.auth - INFO - Respondiendo a solicitud OPTIONS para /api/auth/register
2025-07-29 23:23:38,780 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:23:38] "OPTIONS /api/auth/register HTTP/1.1" 200 -
2025-07-29 23:23:38,992 - api.auth - INFO - Recibida solicitud para /api/auth/register con m√©todo POST
2025-07-29 23:23:42,951 - api.auth - INFO - Iniciando env√≠o de email de verificaci√≥n para technical.thrush.zsly@letterprotect.net
2025-07-29 23:23:47,968 - api.auth - INFO - Correo de verificaci√≥n encolado para env√≠o as√≠ncrono a technical.thrush.zsly@letterprotect.net
2025-07-29 23:23:48,143 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:23:48] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 201 -
2025-07-29 23:23:59,130 - api.auth - INFO - Correo as√≠ncrono enviado exitosamente a ['technical.thrush.zsly@letterprotect.net']
2025-07-29 23:24:26,970 - api.auth - ERROR - Error al verificar el email con token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1Mzg0MjIyMiwianRpIjoiYjc5YTQxNGYtODczMC00YzM0LTg4OTQtMGQyNjYwZDIwZTg4IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc1IiwibmJmIjoxNzUzODQyMjIyLCJjc3JmIjoiODVhYTFmNmEtYjIwZC00MDJkLWJiMTYtNmFlYTg0NDYwYWQxIiwiZXhwIjoxNzUzOTI4NjIyLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.ZKefSgGVZHpnXipJvpxol2RN9yarqm8VFt8y_UjMKZ4 Si no te registraste en Plubot, por favor ignora este correo. Saludos, El equipo de Plubot
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 288, in _load
    payload = base64url_decode(payload_segment)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/utils.py", line 33, in base64url_decode
    return base64.urlsafe_b64decode(input_bytes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/base64.py", line 134, in urlsafe_b64decode
    return b64decode(s)
           ^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/base64.py", line 88, in b64decode
    return binascii.a2b_base64(s, strict_mode=validate)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
binascii.Error: Incorrect padding

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/auth.py", line 190, in verify_email
    decoded_token = decode_token(token)
                    ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/utils.py", line 128, in decode_token
    return jwt_manager._decode_jwt_from_config(encoded_token, csrf_value, allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/jwt_manager.py", line 535, in _decode_jwt_from_config
    unverified_claims = jwt.decode(
                        ^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 222, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 156, in decode_complete
    decoded = api_jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 209, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                ^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 290, in _load
    raise DecodeError("Invalid payload padding") from err
jwt.exceptions.DecodeError: Invalid payload padding
2025-07-29 23:24:26,978 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:24:26] "[31m[1mGET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1Mzg0MjIyMiwianRpIjoiYjc5YTQxNGYtODczMC00YzM0LTg4OTQtMGQyNjYwZDIwZTg4IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc1IiwibmJmIjoxNzUzODQyMjIyLCJjc3JmIjoiODVhYTFmNmEtYjIwZC00MDJkLWJiMTYtNmFlYTg0NDYwYWQxIiwiZXhwIjoxNzUzOTI4NjIyLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.ZKefSgGVZHpnXipJvpxol2RN9yarqm8VFt8y_UjMKZ4%20Si%20no%20te%20registraste%20en%20Plubot,%20por%20favor%20ignora%20este%20correo.%20Saludos,%20El%20equipo%20de%20Plubot HTTP/1.1[0m" 400 -
2025-07-29 23:24:47,220 - api.auth - ERROR - Error al verificar el email con token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1Mzg0MjIyMiwianRpIjoiYjc5YTQxNGYtODczMC00YzM0LTg4OTQtMGQyNjYwZDIwZTg4IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc1IiwibmJmIjoxNzUzODQyMjIyLCJjc3JmIjoiODVhYTFmNmEtYjIwZC00MDJkLWJiMTYtNmFlYTg0NDYwYWQxIiwiZXhwIjoxNzUzOTI4NjIyLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.ZKefSgGVZHpnXipJvpxol2RN9yarqm8VFt8y_UjMKZ4 Si no te registraste en Plubot, por favor ignora este correo. Saludos, El equipo de Plubot
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 288, in _load
    payload = base64url_decode(payload_segment)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/utils.py", line 33, in base64url_decode
    return base64.urlsafe_b64decode(input_bytes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/base64.py", line 134, in urlsafe_b64decode
    return b64decode(s)
           ^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/base64.py", line 88, in b64decode
    return binascii.a2b_base64(s, strict_mode=validate)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
binascii.Error: Incorrect padding

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/auth.py", line 190, in verify_email
    decoded_token = decode_token(token)
                    ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/utils.py", line 128, in decode_token
    return jwt_manager._decode_jwt_from_config(encoded_token, csrf_value, allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/jwt_manager.py", line 535, in _decode_jwt_from_config
    unverified_claims = jwt.decode(
                        ^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 222, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 156, in decode_complete
    decoded = api_jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 209, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                ^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 290, in _load
    raise DecodeError("Invalid payload padding") from err
jwt.exceptions.DecodeError: Invalid payload padding
2025-07-29 23:24:47,222 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:24:47] "[31m[1mGET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1Mzg0MjIyMiwianRpIjoiYjc5YTQxNGYtODczMC00YzM0LTg4OTQtMGQyNjYwZDIwZTg4IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc1IiwibmJmIjoxNzUzODQyMjIyLCJjc3JmIjoiODVhYTFmNmEtYjIwZC00MDJkLWJiMTYtNmFlYTg0NDYwYWQxIiwiZXhwIjoxNzUzOTI4NjIyLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.ZKefSgGVZHpnXipJvpxol2RN9yarqm8VFt8y_UjMKZ4%20Si%20no%20te%20registraste%20en%20Plubot,%20por%20favor%20ignora%20este%20correo.%20Saludos,%20El%20equipo%20de%20Plubot HTTP/1.1[0m" 400 -
2025-07-29 23:24:48,880 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:24:48] "GET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1Mzg0MjIyMiwianRpIjoiYjc5YTQxNGYtODczMC00YzM0LTg4OTQtMGQyNjYwZDIwZTg4IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc1IiwibmJmIjoxNzUzODQyMjIyLCJjc3JmIjoiODVhYTFmNmEtYjIwZC00MDJkLWJiMTYtNmFlYTg0NDYwYWQxIiwiZXhwIjoxNzUzOTI4NjIyLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.ZKefSgGVZHpnXipJvpxol2RN9yarqm8VFt8y_UjMKZ4 HTTP/1.1" 200 -
2025-07-29 23:24:59,687 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:24:59] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 23:25:00,793 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:25:00] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 23:38:59,397 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:38:59] "OPTIONS /api/plubots/create HTTP/1.1" 200 -
2025-07-29 23:39:03,862 - services.grok_service - INFO - Successfully connected to Redis for caching.
2025-07-29 23:39:07,122 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:39:07] "POST /api/plubots/create HTTP/1.1" 200 -
2025-07-29 23:39:07,142 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:39:07] "OPTIONS /api/auth/profile HTTP/1.1" 200 -
2025-07-29 23:39:08,531 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:39:08] "GET /api/auth/profile HTTP/1.1" 200 -
2025-07-29 23:39:09,814 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:39:09] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:39:10,339 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 23:39:10,866 - api.flow_api - INFO - DB query for flows returned 0 items.
2025-07-29 23:39:11,039 - api.flow_api - INFO - DB query for edges returned 0 items.
2025-07-29 23:39:11,039 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 23:39:11,383 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:39:11] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:40:13,179 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:40:13] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:40:13,714 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'id': 'start-b78e93c0', 'type': 'start', 'position': {'x': 496, 'y': 151}, 'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 231, 'height': 144, 'selected': True, 'positionAbsolute': {'x': 496, 'y': 151}, 'dragging': False}, {'id': 'message-10b3a1d1', 'type': 'message', 'position': {'x': 762, 'y': 313}, 'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'message': 'Hola rey', 'variables': [], 'lastUpdated': '2025-07-30T02:39:33.186Z'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 762, 'y': 313}, 'dragging': False}, {'id': 'decision-5f4d71a4', 'type': 'decision', 'position': {'x': 729, 'y': 451}, 'data': {'id': 'decision-5f4d71a4', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A', 'color': '#3498db'}, {'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B', 'color': '#e74c3c'}, {'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C', 'condition': '', 'color': '#FFA500'}], 'isEditing': False, 'question': 'Cual camino prefieres?'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 729, 'y': 451}, 'dragging': False}, {'id': 'end-95fa255f', 'type': 'end', 'position': {'x': 1019, 'y': 1016}, 'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 310, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1019, 'y': 1016}, 'dragging': False}, {'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'type': 'option', 'position': {'x': 348, 'y': 766}, 'data': {'sourceNode': 'decision-5f4d71a4', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A', 'instruction': 'A', 'color': '#3498db', 'lastUpdated': '2025-07-30T02:39:57.610Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 348, 'y': 766}, 'dragging': False}, {'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'type': 'option', 'position': {'x': 690, 'y': 721}, 'data': {'sourceNode': 'decision-5f4d71a4', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B', 'instruction': 'B', 'color': '#e74c3c', 'lastUpdated': '2025-07-30T02:39:57.610Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 690, 'y': 721}, 'dragging': False}, {'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'type': 'option', 'position': {'x': 1029, 'y': 793}, 'data': {'sourceNode': 'decision-5f4d71a4', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C', 'instruction': 'C', 'color': '#FFA500', 'lastUpdated': '2025-07-30T02:39:57.610Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 1029, 'y': 793}, 'dragging': False}], 'edges': [{'zIndex': 0, 'source': 'start-b78e93c0', 'sourceHandle': 'output', 'target': 'message-10b3a1d1', 'targetHandle': 'default', 'id': 'reactflow__edge-start-b78e93c0output-message-10b3a1d1default'}, {'zIndex': 0, 'source': 'message-10b3a1d1', 'sourceHandle': 'default', 'target': 'decision-5f4d71a4', 'targetHandle': None, 'id': 'reactflow__edge-message-10b3a1d1default-decision-5f4d71a4'}, {'zIndex': 0, 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96source-end-95fa255f'}, {'zIndex': 0, 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6source-end-95fa255f'}, {'zIndex': 0, 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783source-end-95fa255f'}, {'id': 'edge-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}]}
2025-07-29 23:40:13,714 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-29 23:40:14,407 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-29 23:40:16,662 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-29 23:40:16,663 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-29 23:40:16,836 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:40:16] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:51:09,572 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:51:09] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:51:10,096 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 23:51:10,618 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 23:51:10,790 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 23:51:10,791 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 23:51:11,511 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:51:11] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:51:55,097 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:51:55] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:51:55,616 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 23:51:55,788 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:51:55] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:52:33,844 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:52:33] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:52:34,365 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 23:52:34,537 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:52:34] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:52:51,443 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:52:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:52:51,964 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 23:52:52,134 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:52:52] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:54:02,476 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:54:02] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:54:03,001 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 23:54:03,172 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:54:03] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:55:57,335 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:55:57] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-29 23:55:57,855 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 23:55:58,026 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 23:55:58] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:02:22,281 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:02:22] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:02:23,179 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 496, 'y': 151}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 757, 'y': 288}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 757, 'y': 288}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 728, 'y': 445}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 728, 'y': 445}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 310, 'height': 132, 'selected': True, 'positionAbsolute': {'x': 1076, 'y': 1013}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 357, 'y': 753}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 712, 'y': 724}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 1093, 'y': 772}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10975', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'animated': True, 'id': '10976', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '10977', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10978', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10979', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10980', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10981', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10982', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-30 00:02:23,180 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-30 00:02:23,869 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-30 00:02:26,972 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-30 00:02:26,972 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-30 00:02:27,143 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:02:27] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:02:39,901 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:02:39] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:02:40,425 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-30 00:02:40,942 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-30 00:02:41,114 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-30 00:02:41,114 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-30 00:02:41,458 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:02:41] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:21:51,709 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:21:51] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-30 00:21:52,972 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:21:52] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-30 00:40:06,115 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:40:06] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-30 00:40:07,223 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:40:07] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-30 00:40:07,261 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:40:07] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:40:07,776 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-30 00:40:08,301 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-30 00:40:08,473 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-30 00:40:08,474 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-30 00:40:08,817 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:40:08] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:55:10,219 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:55:10] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-30 00:55:11,425 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:55:11] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-30 00:57:48,813 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:57:48] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-30 00:57:49,942 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:57:49] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-30 00:57:49,967 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:57:49] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:57:50,481 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-30 00:57:50,999 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-30 00:57:51,171 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-30 00:57:51,172 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-30 00:57:51,512 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:57:51] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:59:43,741 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:59:43] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 00:59:44,251 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-30 00:59:44,419 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 00:59:44] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 01:23:45,821 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:23:45] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 01:23:46,333 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-30 01:23:46,857 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-30 01:23:47,027 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-30 01:23:47,028 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-30 01:23:47,368 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:23:47] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 01:24:32,588 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:24:32] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-30 01:24:33,786 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:24:33] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-30 01:24:40,313 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:24:40] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-30 01:24:41,419 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:24:41] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-30 01:24:41,456 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:24:41] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 01:24:41,969 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-30 01:24:42,137 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:24:42] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 01:26:01,598 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:26:01] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 01:26:02,109 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-30 01:26:02,279 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:26:02] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 01:28:15,701 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:28:15] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 01:28:16,213 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-30 01:28:16,383 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 01:28:16] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 23:42:43,734 - root - INFO - Sistema de logging configurado correctamente
2025-07-30 23:42:43,742 - root - INFO - Sistema de logging configurado correctamente
2025-07-30 23:42:43,760 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-30 23:42:43,760 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-30 23:43:05,754 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:43:05] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-30 23:43:09,395 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:43:09] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-30 23:43:09,520 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:43:09] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 23:43:10,526 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:43:10] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-30 23:43:12,514 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-30 23:43:13,038 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-30 23:43:13,215 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-30 23:43:13,215 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-30 23:43:13,556 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:43:13] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 23:49:50,830 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:49:50] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 23:49:51,394 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-30 23:49:51,922 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-30 23:49:52,095 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-30 23:49:52,095 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-30 23:49:52,437 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:49:52] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-30 23:59:32,187 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:59:32] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-30 23:59:32,700 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-30 23:59:33,215 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-30 23:59:33,386 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-30 23:59:33,386 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-30 23:59:33,767 - werkzeug - INFO - 127.0.0.1 - - [30/Jul/2025 23:59:33] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 00:14:39,280 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:14:39] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 00:14:40,487 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:14:40] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-31 00:34:40,179 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:40] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 00:34:41,294 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:41] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 00:34:41,332 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:41] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 00:34:41,380 - app - WARNING - Authentication error: Missing Authorization Header
2025-07-31 00:34:41,381 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:41] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-07-31 00:34:41,845 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:41] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-31 00:34:44,307 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:44] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 00:34:51,796 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:51] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 00:34:52,893 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:52] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 00:34:52,936 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:52] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 00:34:53,440 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 00:34:53,966 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 00:34:54,139 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 00:34:54,139 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 00:34:54,479 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:34:54] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 00:35:28,033 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:35:28] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 00:35:28,538 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 00:35:28,706 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:35:28] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 00:45:03,067 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:45:03] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 00:45:03,577 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 00:45:04,093 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 00:45:04,264 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 00:45:04,264 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 00:45:04,603 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 00:45:04] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:01:35,960 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:01:35] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 01:01:37,165 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:01:37] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-31 01:08:30,601 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:08:30] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 01:08:31,705 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:08:31] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 01:08:31,758 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:08:31] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:08:32,273 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 01:08:32,800 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 01:08:32,977 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 01:08:32,978 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 01:08:33,322 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:08:33] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:18:18,327 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:18:18] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:18:18,841 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 01:18:19,364 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 01:18:19,538 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 01:18:19,538 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 01:18:19,879 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:18:19] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:18:28,087 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:18:28] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:18:28,603 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 01:18:28,774 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:18:28] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:18:30,061 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:18:30] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 01:18:30,621 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:18:30] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-31 01:18:33,743 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:18:33] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 01:18:34,845 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:18:34] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 01:27:23,007 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:27:23] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:27:23,519 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 01:27:24,039 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 01:27:24,211 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 01:27:24,212 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 01:27:24,578 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:27:24] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:28:35,813 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:28:35] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-31 01:28:35,814 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:28:35] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-31 01:28:35,817 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:28:35] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-31 01:28:35,818 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:28:35] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-31 01:28:36,709 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:28:36] "OPTIONS /api/whatsapp/status/123 HTTP/1.1" 200 -
2025-07-31 01:28:38,065 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:28:38] "OPTIONS /api/whatsapp/initiate HTTP/1.1" 200 -
2025-07-31 01:28:38,068 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:28:38] "[31m[1mPOST /api/whatsapp/initiate HTTP/1.1[0m" 405 -
2025-07-31 01:28:52,444 - services.whatsapp_service - ERROR - Error en la comunicaci√≥n con la API de WhatsApp
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-31 01:28:52,457 - services.whatsapp_service - ERROR - Error al verificar el estado de WhatsApp para 123
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-31 01:28:52,458 - app - ERROR - Exception on /api/whatsapp/status/123 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/whatsapp_api.py", line 75, in get_status
    status = service.get_connection_status(plubot_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 104, in get_connection_status
    connection = WhatsAppConnection.query.filter_by(plubot_id=plubot_id).first()
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WhatsAppConnection' has no attribute 'query'
2025-07-31 01:28:52,633 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:28:52] "[35m[1mGET /api/whatsapp/status/123 HTTP/1.1[0m" 500 -
2025-07-31 01:36:01,825 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:36:01] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 01:36:02,341 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 01:36:02,892 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 01:36:03,073 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 01:36:03,073 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 01:36:03,416 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 01:36:03] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 02:49:28,683 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:28] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 02:49:28,686 - app - WARNING - Authentication error: Signature has expired
2025-07-31 02:49:28,688 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:28] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-31 02:49:46,344 - root - INFO - Sistema de logging configurado correctamente
2025-07-31 02:49:46,352 - root - INFO - Sistema de logging configurado correctamente
2025-07-31 02:49:46,365 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-31 02:49:46,365 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-31 02:49:52,477 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:52] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 02:49:52,480 - app - WARNING - Authentication error: Signature has expired
2025-07-31 02:49:52,481 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:52] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-31 02:49:53,022 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:53] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 02:49:56,756 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:56] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 02:49:56,992 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:56] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 02:49:58,248 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:58] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 02:49:59,370 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:49:59] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 02:49:59,963 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 02:50:00,506 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 02:50:00,682 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 02:50:00,682 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 02:50:01,024 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:50:01] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 02:50:07,370 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:50:07] "OPTIONS /api/opinion/ HTTP/1.1" 200 -
2025-07-31 02:50:07,372 - api.opinion - INFO - Respuesta inmediata enviada para la opini√≥n de hola. El correo se est√° procesando.
2025-07-31 02:50:07,372 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 02:50:07] "POST /api/opinion/ HTTP/1.1" 200 -
2025-07-31 02:50:23,225 - app - INFO - Correo enviado a info@plubot.com con asunto: Nueva opini√≥n de hola
2025-07-31 02:50:23,225 - api.opinion - INFO - Correo de opini√≥n enviado exitosamente en segundo plano.
2025-07-31 03:21:25,335 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 03:21:25] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 03:21:26,538 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 03:21:26] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-31 03:21:27,238 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 03:21:27] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 03:21:28,354 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 03:21:28] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 03:21:28,398 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 03:21:28] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 03:21:28,907 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 03:21:29,430 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 03:21:29,605 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 03:21:29,605 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 03:21:29,947 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 03:21:29] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 04:00:43,883 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 04:00:43] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 04:00:45,096 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 04:00:45] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-31 04:00:45,848 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 04:00:45] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 04:00:46,836 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 04:00:46] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-31 04:00:46,949 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 04:00:46] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 04:00:46,999 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 04:00:46] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 04:00:47,511 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 04:00:48,059 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 04:00:48,233 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 04:00:48,234 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 04:00:48,574 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 04:00:48] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:00:06,888 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:00:06] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 05:00:08,107 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:00:08] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-31 05:00:08,613 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:00:08] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 05:00:09,715 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:00:09] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 05:00:09,773 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:00:09] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:00:10,288 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:00:10,817 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 05:00:10,993 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 05:00:10,994 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:00:11,340 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:00:11] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:00:36,667 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:00:36] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:00:37,181 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:00:37,350 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:00:37] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:05:29,483 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:05:29] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:05:30,002 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 308, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 320, 'height': 127}, {'id': 'message-572b214f', 'type': 'message', 'position': {'x': 358, 'y': 388}, 'data': {'id': 'message-572b214f', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'message-a88f6ff0', 'type': 'message', 'position': {'x': 350, 'y': 174}, 'data': {'id': 'message-a88f6ff0', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'message-837b34e5', 'type': 'message', 'position': {'x': 275, 'y': 443}, 'data': {'id': 'message-837b34e5', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'message-fbac117f', 'type': 'message', 'position': {'x': 252, 'y': 552}, 'data': {'id': 'message-fbac117f', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'webhookNode-9cc7a8ac', 'type': 'webhookNode', 'position': {'x': 343, 'y': 378}, 'data': {'id': 'webhookNode-9cc7a8ac', 'label': 'Webhook'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'message-c51ea2ae', 'type': 'message', 'position': {'x': 387, 'y': 309}, 'data': {'id': 'message-c51ea2ae', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'end-e6c1c053', 'type': 'end', 'position': {'x': 361, 'y': 389}, 'data': {'id': 'end-e6c1c053', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 308, 'height': 132}, {'id': 'httpRequestNode-f74a39ab', 'type': 'httpRequestNode', 'position': {'x': 293, 'y': 573}, 'data': {'id': 'httpRequestNode-f74a39ab', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 256, 'height': 324}, {'id': 'databaseNode-e5f7eb66', 'type': 'databaseNode', 'position': {'x': 114, 'y': 1037}, 'data': {'id': 'databaseNode-e5f7eb66', 'label': 'Base de Datos'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'webhookNode-3b7b7d82', 'type': 'webhookNode', 'position': {'x': 311, 'y': 1007}, 'data': {'id': 'webhookNode-3b7b7d82', 'label': 'Webhook'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'powerNode-541635a0', 'type': 'powerNode', 'position': {'x': 316, 'y': 1036}, 'data': {'id': 'powerNode-541635a0', 'label': 'Poder'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 232, 'height': 68}, {'id': 'httpRequestNode-58e5db86', 'type': 'httpRequestNode', 'position': {'x': 179, 'y': 948}, 'data': {'id': 'httpRequestNode-58e5db86', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 256, 'height': 324}, {'id': 'advancedAiPower-04f5ad73', 'type': 'ai', 'position': {'x': 347, 'y': 1197}, 'data': {'promptTemplate': '', 'temperature': 0.7, 'maxTokens': 512, 'systemMessage': '', 'responseVariable': 'ai_response', 'streaming': False, 'ultraMode': False, 'isLoading': False, 'interpolatedPromptPreview': '', 'id': 'advancedAiPower-04f5ad73', 'label': 'IA Avanzada Configurable', 'title': 'IA Avanzada Configurable', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'icon': 'üß†', 'image': '/marketplace/extension-openai.webp', 'category': 'inteligencia', 'nodeTypeToCreate': 'ai'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 345, 'height': 785}, {'id': 'emotionDetection-40fd6f8e', 'type': 'emotionDetection', 'position': {'x': 509, 'y': 1068}, 'data': {'id': 'emotionDetection-40fd6f8e', 'label': 'Detecci√≥n de Emoci√≥n'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 324, 'height': 164}, {'id': 'httpRequestNode-b46e766f', 'type': 'httpRequestNode', 'position': {'x': 750, 'y': 1360}, 'data': {'id': 'httpRequestNode-b46e766f', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 256, 'height': 324}, {'id': 'message-f036d544', 'type': 'message', 'position': {'x': 769, 'y': 1173}, 'data': {'id': 'message-f036d544', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'decision-1b2702c5', 'type': 'decision', 'position': {'x': 841, 'y': 1094}, 'data': {'id': 'decision-1b2702c5', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '376be804-d415-423b-bc3a-156e1f518dfc', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '1560bfd9-b6c9-412b-bacc-42908f65b529', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#FFA500'}, {'id': 'condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#ADFF2F'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': True, 'positionAbsolute': {'x': 841, 'y': 1094}, 'dragging': False}, {'id': 'option-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'type': 'option', 'position': {'x': 702, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': '376be804-d415-423b-bc3a-156e1f518dfc', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'type': 'option', 'position': {'x': 952, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': '1560bfd9-b6c9-412b-bacc-42908f65b529', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'type': 'option', 'position': {'x': 1202, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': 'condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#FFA500', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'type': 'option', 'position': {'x': 1452, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': 'condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#ADFF2F', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'end-0422cdbd', 'type': 'end', 'position': {'x': 759, 'y': 913}, 'data': {'id': 'end-0422cdbd', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 308, 'height': 132}, {'id': 'decision-eff4bd2c', 'type': 'decision', 'position': {'x': 603, 'y': 999}, 'data': {'id': 'decision-eff4bd2c', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': 'c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'text': 'Opci√≥n B', 'color': '#e74c3c'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'option-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'type': 'option', 'position': {'x': 603, 'y': 1099}, 'data': {'sourceNode': 'decision-eff4bd2c', 'conditionId': '5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db'}, 'width': 320, 'height': 127}, {'id': 'option-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'type': 'option', 'position': {'x': 603, 'y': 1179}, 'data': {'sourceNode': 'decision-eff4bd2c', 'conditionId': 'c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c'}, 'width': 320, 'height': 127}, {'id': 'message-e4399eef', 'type': 'message', 'position': {'x': 576, 'y': 752}, 'data': {'id': 'message-e4399eef', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'decision-0ff91219', 'type': 'decision', 'position': {'x': 440, 'y': 990}, 'data': {'id': 'decision-0ff91219', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '611f230c-5d3e-497f-ba97-58088de4739f', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'text': 'Opci√≥n B', 'color': '#e74c3c'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'option-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'type': 'option', 'position': {'x': 440, 'y': 1090}, 'data': {'sourceNode': 'decision-0ff91219', 'conditionId': '611f230c-5d3e-497f-ba97-58088de4739f', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db'}, 'width': 320, 'height': 127}, {'id': 'option-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'type': 'option', 'position': {'x': 440, 'y': 1170}, 'data': {'sourceNode': 'decision-0ff91219', 'conditionId': '9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c'}, 'width': 320, 'height': 127}, {'id': 'message-6340f3e5', 'type': 'message', 'position': {'x': 668, 'y': 722}, 'data': {'id': 'message-6340f3e5', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'message-312f28fd', 'type': 'message', 'position': {'x': 1161, 'y': 582}, 'data': {'id': 'message-312f28fd', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'advancedAiPower-b08a0868', 'type': 'ai', 'position': {'x': 1251, 'y': 1142}, 'data': {'promptTemplate': '', 'temperature': 0.7, 'maxTokens': 512, 'systemMessage': '', 'responseVariable': 'ai_response', 'streaming': False, 'ultraMode': False, 'isLoading': False, 'interpolatedPromptPreview': '', 'id': 'advancedAiPower-b08a0868', 'label': 'IA Avanzada Configurable', 'title': 'IA Avanzada Configurable', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'icon': 'üß†', 'image': '/marketplace/extension-openai.webp', 'category': 'inteligencia', 'nodeTypeToCreate': 'ai'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 345, 'height': 785}, {'id': 'aiNodePro-9f3ec400', 'type': 'aiNodePro', 'position': {'x': 1326, 'y': 670}, 'data': {'id': 'aiNodePro-9f3ec400', 'label': 'IA Pro'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 300, 'height': 269}], 'edges': [{'animated': True, 'id': '10983', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'animated': True, 'id': '10984', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '10985', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10986', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10987', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10988', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10989', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10990', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': 'edge-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'sourceHandle': 'output-376be804-d415-423b-bc3a-156e1f518dfc', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'sourceHandle': 'output-1560bfd9-b6c9-412b-bacc-42908f65b529', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'sourceHandle': 'output-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'sourceHandle': 'output-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#ADFF2F', 'strokeWidth': 2}}, {'id': 'edge-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'source': 'decision-eff4bd2c', 'target': 'option-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'sourceHandle': 'output-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'source': 'decision-eff4bd2c', 'target': 'option-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'sourceHandle': 'output-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'source': 'decision-0ff91219', 'target': 'option-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'sourceHandle': 'output-611f230c-5d3e-497f-ba97-58088de4739f', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'source': 'decision-0ff91219', 'target': 'option-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'sourceHandle': 'output-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}]}
2025-07-31 05:05:30,006 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=40, edges_count=16, name='N/A'
2025-07-31 05:05:30,706 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=40, edges_count=16, name='None'
2025-07-31 05:05:31,991 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 308, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 320, 'height': 127}, {'id': 'message-572b214f', 'type': 'message', 'position': {'x': 358, 'y': 388}, 'data': {'id': 'message-572b214f', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'message-a88f6ff0', 'type': 'message', 'position': {'x': 350, 'y': 174}, 'data': {'id': 'message-a88f6ff0', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'message-837b34e5', 'type': 'message', 'position': {'x': 275, 'y': 443}, 'data': {'id': 'message-837b34e5', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'message-fbac117f', 'type': 'message', 'position': {'x': 252, 'y': 552}, 'data': {'id': 'message-fbac117f', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'webhookNode-9cc7a8ac', 'type': 'webhookNode', 'position': {'x': 343, 'y': 378}, 'data': {'id': 'webhookNode-9cc7a8ac', 'label': 'Webhook'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'message-c51ea2ae', 'type': 'message', 'position': {'x': 387, 'y': 309}, 'data': {'id': 'message-c51ea2ae', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'end-e6c1c053', 'type': 'end', 'position': {'x': 361, 'y': 389}, 'data': {'id': 'end-e6c1c053', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 308, 'height': 132}, {'id': 'httpRequestNode-f74a39ab', 'type': 'httpRequestNode', 'position': {'x': 293, 'y': 573}, 'data': {'id': 'httpRequestNode-f74a39ab', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 256, 'height': 324}, {'id': 'databaseNode-e5f7eb66', 'type': 'databaseNode', 'position': {'x': 114, 'y': 1037}, 'data': {'id': 'databaseNode-e5f7eb66', 'label': 'Base de Datos'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'webhookNode-3b7b7d82', 'type': 'webhookNode', 'position': {'x': 311, 'y': 1007}, 'data': {'id': 'webhookNode-3b7b7d82', 'label': 'Webhook'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'powerNode-541635a0', 'type': 'powerNode', 'position': {'x': 316, 'y': 1036}, 'data': {'id': 'powerNode-541635a0', 'label': 'Poder'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 232, 'height': 68}, {'id': 'httpRequestNode-58e5db86', 'type': 'httpRequestNode', 'position': {'x': 179, 'y': 948}, 'data': {'id': 'httpRequestNode-58e5db86', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 256, 'height': 324}, {'id': 'advancedAiPower-04f5ad73', 'type': 'ai', 'position': {'x': 347, 'y': 1197}, 'data': {'promptTemplate': '', 'temperature': 0.7, 'maxTokens': 512, 'systemMessage': '', 'responseVariable': 'ai_response', 'streaming': False, 'ultraMode': False, 'isLoading': False, 'interpolatedPromptPreview': '', 'id': 'advancedAiPower-04f5ad73', 'label': 'IA Avanzada Configurable', 'title': 'IA Avanzada Configurable', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'icon': 'üß†', 'image': '/marketplace/extension-openai.webp', 'category': 'inteligencia', 'nodeTypeToCreate': 'ai'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 345, 'height': 785}, {'id': 'emotionDetection-40fd6f8e', 'type': 'emotionDetection', 'position': {'x': 509, 'y': 1068}, 'data': {'id': 'emotionDetection-40fd6f8e', 'label': 'Detecci√≥n de Emoci√≥n'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 324, 'height': 164}, {'id': 'httpRequestNode-b46e766f', 'type': 'httpRequestNode', 'position': {'x': 750, 'y': 1360}, 'data': {'id': 'httpRequestNode-b46e766f', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 256, 'height': 324}, {'id': 'message-f036d544', 'type': 'message', 'position': {'x': 769, 'y': 1173}, 'data': {'id': 'message-f036d544', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'decision-1b2702c5', 'type': 'decision', 'position': {'x': 841, 'y': 1094}, 'data': {'id': 'decision-1b2702c5', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '376be804-d415-423b-bc3a-156e1f518dfc', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '1560bfd9-b6c9-412b-bacc-42908f65b529', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#FFA500'}, {'id': 'condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#ADFF2F'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': True, 'positionAbsolute': {'x': 841, 'y': 1094}, 'dragging': False}, {'id': 'option-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'type': 'option', 'position': {'x': 702, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': '376be804-d415-423b-bc3a-156e1f518dfc', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'type': 'option', 'position': {'x': 952, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': '1560bfd9-b6c9-412b-bacc-42908f65b529', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'type': 'option', 'position': {'x': 1202, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': 'condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#FFA500', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'type': 'option', 'position': {'x': 1452, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': 'condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#ADFF2F', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'end-0422cdbd', 'type': 'end', 'position': {'x': 759, 'y': 913}, 'data': {'id': 'end-0422cdbd', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 308, 'height': 132}, {'id': 'decision-eff4bd2c', 'type': 'decision', 'position': {'x': 603, 'y': 999}, 'data': {'id': 'decision-eff4bd2c', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': 'c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'text': 'Opci√≥n B', 'color': '#e74c3c'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'option-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'type': 'option', 'position': {'x': 603, 'y': 1099}, 'data': {'sourceNode': 'decision-eff4bd2c', 'conditionId': '5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db'}, 'width': 320, 'height': 127}, {'id': 'option-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'type': 'option', 'position': {'x': 603, 'y': 1179}, 'data': {'sourceNode': 'decision-eff4bd2c', 'conditionId': 'c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c'}, 'width': 320, 'height': 127}, {'id': 'message-e4399eef', 'type': 'message', 'position': {'x': 576, 'y': 752}, 'data': {'id': 'message-e4399eef', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'decision-0ff91219', 'type': 'decision', 'position': {'x': 440, 'y': 990}, 'data': {'id': 'decision-0ff91219', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '611f230c-5d3e-497f-ba97-58088de4739f', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'text': 'Opci√≥n B', 'color': '#e74c3c'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'option-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'type': 'option', 'position': {'x': 440, 'y': 1090}, 'data': {'sourceNode': 'decision-0ff91219', 'conditionId': '611f230c-5d3e-497f-ba97-58088de4739f', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db'}, 'width': 320, 'height': 127}, {'id': 'option-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'type': 'option', 'position': {'x': 440, 'y': 1170}, 'data': {'sourceNode': 'decision-0ff91219', 'conditionId': '9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c'}, 'width': 320, 'height': 127}, {'id': 'message-6340f3e5', 'type': 'message', 'position': {'x': 668, 'y': 722}, 'data': {'id': 'message-6340f3e5', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'message-312f28fd', 'type': 'message', 'position': {'x': 1161, 'y': 582}, 'data': {'id': 'message-312f28fd', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'advancedAiPower-b08a0868', 'type': 'ai', 'position': {'x': 1251, 'y': 1142}, 'data': {'promptTemplate': '', 'temperature': 0.7, 'maxTokens': 512, 'systemMessage': '', 'responseVariable': 'ai_response', 'streaming': False, 'ultraMode': False, 'isLoading': False, 'interpolatedPromptPreview': '', 'id': 'advancedAiPower-b08a0868', 'label': 'IA Avanzada Configurable', 'title': 'IA Avanzada Configurable', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'icon': 'üß†', 'image': '/marketplace/extension-openai.webp', 'category': 'inteligencia', 'nodeTypeToCreate': 'ai'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 345, 'height': 785}, {'id': 'aiNodePro-9f3ec400', 'type': 'aiNodePro', 'position': {'x': 1326, 'y': 670}, 'data': {'id': 'aiNodePro-9f3ec400', 'label': 'IA Pro'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 300, 'height': 269}], 'edges': [{'animated': True, 'id': '10983', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'animated': True, 'id': '10984', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '10985', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10986', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10987', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10988', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10989', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10990', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': 'edge-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'sourceHandle': 'output-376be804-d415-423b-bc3a-156e1f518dfc', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'sourceHandle': 'output-1560bfd9-b6c9-412b-bacc-42908f65b529', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'sourceHandle': 'output-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'sourceHandle': 'output-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#ADFF2F', 'strokeWidth': 2}}, {'id': 'edge-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'source': 'decision-eff4bd2c', 'target': 'option-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'sourceHandle': 'output-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'source': 'decision-eff4bd2c', 'target': 'option-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'sourceHandle': 'output-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'source': 'decision-0ff91219', 'target': 'option-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'sourceHandle': 'output-611f230c-5d3e-497f-ba97-58088de4739f', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'source': 'decision-0ff91219', 'target': 'option-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'sourceHandle': 'output-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}]}
2025-07-31 05:05:31,993 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=40, edges_count=16, name='N/A'
2025-07-31 05:05:33,614 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=40, edges_count=16, name='None'
2025-07-31 05:05:39,143 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:05:39,143 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:05:39,310 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:05:39] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:05:43,192 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:05:43] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:05:43,700 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-572b214f', 'type': 'message', 'position': {'x': 358, 'y': 388}, 'data': {'id': 'message-572b214f', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'message-a88f6ff0', 'type': 'message', 'position': {'x': 350, 'y': 174}, 'data': {'id': 'message-a88f6ff0', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'message-837b34e5', 'type': 'message', 'position': {'x': 275, 'y': 443}, 'data': {'id': 'message-837b34e5', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'message-fbac117f', 'type': 'message', 'position': {'x': 252, 'y': 552}, 'data': {'id': 'message-fbac117f', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'webhookNode-9cc7a8ac', 'type': 'webhookNode', 'position': {'x': 343, 'y': 378}, 'data': {'id': 'webhookNode-9cc7a8ac', 'label': 'Webhook'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'message-c51ea2ae', 'type': 'message', 'position': {'x': 387, 'y': 309}, 'data': {'id': 'message-c51ea2ae', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'end-e6c1c053', 'type': 'end', 'position': {'x': 361, 'y': 389}, 'data': {'id': 'end-e6c1c053', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'httpRequestNode-f74a39ab', 'type': 'httpRequestNode', 'position': {'x': 293, 'y': 573}, 'data': {'id': 'httpRequestNode-f74a39ab', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'databaseNode-e5f7eb66', 'type': 'databaseNode', 'position': {'x': 114, 'y': 1037}, 'data': {'id': 'databaseNode-e5f7eb66', 'label': 'Base de Datos'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'webhookNode-3b7b7d82', 'type': 'webhookNode', 'position': {'x': 311, 'y': 1007}, 'data': {'id': 'webhookNode-3b7b7d82', 'label': 'Webhook'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'powerNode-541635a0', 'type': 'powerNode', 'position': {'x': 316, 'y': 1036}, 'data': {'id': 'powerNode-541635a0', 'label': 'Poder'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'httpRequestNode-58e5db86', 'type': 'httpRequestNode', 'position': {'x': 179, 'y': 948}, 'data': {'id': 'httpRequestNode-58e5db86', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'advancedAiPower-04f5ad73', 'type': 'ai', 'position': {'x': 347, 'y': 1197}, 'data': {'promptTemplate': '', 'temperature': 0.7, 'maxTokens': 512, 'systemMessage': '', 'responseVariable': 'ai_response', 'streaming': False, 'ultraMode': False, 'isLoading': False, 'interpolatedPromptPreview': '', 'id': 'advancedAiPower-04f5ad73', 'label': 'IA Avanzada Configurable', 'title': 'IA Avanzada Configurable', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'icon': 'üß†', 'image': '/marketplace/extension-openai.webp', 'category': 'inteligencia', 'nodeTypeToCreate': 'ai'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'emotionDetection-40fd6f8e', 'type': 'emotionDetection', 'position': {'x': 509, 'y': 1068}, 'data': {'id': 'emotionDetection-40fd6f8e', 'label': 'Detecci√≥n de Emoci√≥n'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'httpRequestNode-b46e766f', 'type': 'httpRequestNode', 'position': {'x': 750, 'y': 1360}, 'data': {'id': 'httpRequestNode-b46e766f', 'label': 'Solicitud HTTP'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'message-f036d544', 'type': 'message', 'position': {'x': 769, 'y': 1173}, 'data': {'id': 'message-f036d544', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'decision-1b2702c5', 'type': 'decision', 'position': {'x': 841, 'y': 1094}, 'data': {'id': 'decision-1b2702c5', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '376be804-d415-423b-bc3a-156e1f518dfc', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '1560bfd9-b6c9-412b-bacc-42908f65b529', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#FFA500'}, {'id': 'condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#ADFF2F'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42, 'selected': True, 'positionAbsolute': {'x': 841, 'y': 1094}, 'dragging': False}, {'id': 'option-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'type': 'option', 'position': {'x': 702, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': '376be804-d415-423b-bc3a-156e1f518dfc', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 150, 'height': 42}, {'id': 'option-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'type': 'option', 'position': {'x': 952, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': '1560bfd9-b6c9-412b-bacc-42908f65b529', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 150, 'height': 42}, {'id': 'option-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'type': 'option', 'position': {'x': 1202, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': 'condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#FFA500', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 150, 'height': 42}, {'id': 'option-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'type': 'option', 'position': {'x': 1452, 'y': 1398}, 'data': {'sourceNode': 'decision-1b2702c5', 'conditionId': 'condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#ADFF2F', 'lastUpdated': '2025-07-31T08:05:05.779Z'}, 'draggable': True, 'deletable': True, 'width': 150, 'height': 42}, {'id': 'end-0422cdbd', 'type': 'end', 'position': {'x': 759, 'y': 913}, 'data': {'id': 'end-0422cdbd', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'decision-eff4bd2c', 'type': 'decision', 'position': {'x': 603, 'y': 999}, 'data': {'id': 'decision-eff4bd2c', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': 'c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'text': 'Opci√≥n B', 'color': '#e74c3c'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'option-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'type': 'option', 'position': {'x': 603, 'y': 1099}, 'data': {'sourceNode': 'decision-eff4bd2c', 'conditionId': '5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db'}, 'width': 150, 'height': 42}, {'id': 'option-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'type': 'option', 'position': {'x': 603, 'y': 1179}, 'data': {'sourceNode': 'decision-eff4bd2c', 'conditionId': 'c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c'}, 'width': 150, 'height': 42}, {'id': 'message-e4399eef', 'type': 'message', 'position': {'x': 576, 'y': 752}, 'data': {'id': 'message-e4399eef', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'decision-0ff91219', 'type': 'decision', 'position': {'x': 440, 'y': 990}, 'data': {'id': 'decision-0ff91219', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '611f230c-5d3e-497f-ba97-58088de4739f', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'text': 'Opci√≥n B', 'color': '#e74c3c'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'option-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'type': 'option', 'position': {'x': 440, 'y': 1090}, 'data': {'sourceNode': 'decision-0ff91219', 'conditionId': '611f230c-5d3e-497f-ba97-58088de4739f', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db'}, 'width': 150, 'height': 42}, {'id': 'option-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'type': 'option', 'position': {'x': 440, 'y': 1170}, 'data': {'sourceNode': 'decision-0ff91219', 'conditionId': '9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c'}, 'width': 150, 'height': 42}, {'id': 'message-6340f3e5', 'type': 'message', 'position': {'x': 668, 'y': 722}, 'data': {'id': 'message-6340f3e5', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'message-312f28fd', 'type': 'message', 'position': {'x': 1161, 'y': 582}, 'data': {'id': 'message-312f28fd', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'advancedAiPower-b08a0868', 'type': 'ai', 'position': {'x': 1251, 'y': 1142}, 'data': {'promptTemplate': '', 'temperature': 0.7, 'maxTokens': 512, 'systemMessage': '', 'responseVariable': 'ai_response', 'streaming': False, 'ultraMode': False, 'isLoading': False, 'interpolatedPromptPreview': '', 'id': 'advancedAiPower-b08a0868', 'label': 'IA Avanzada Configurable', 'title': 'IA Avanzada Configurable', 'description': 'IA con prompts din√°micos, modelos y par√°metros ajustables.', 'icon': 'üß†', 'image': '/marketplace/extension-openai.webp', 'category': 'inteligencia', 'nodeTypeToCreate': 'ai'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}, {'id': 'aiNodePro-9f3ec400', 'type': 'aiNodePro', 'position': {'x': 1326, 'y': 670}, 'data': {'id': 'aiNodePro-9f3ec400', 'label': 'IA Pro'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 42}], 'edges': [{'animated': True, 'id': '10983', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'animated': True, 'id': '10984', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '10985', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10986', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10987', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10988', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10989', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10990', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': 'edge-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-376be804-d415-423b-bc3a-156e1f518dfc', 'sourceHandle': 'output-376be804-d415-423b-bc3a-156e1f518dfc', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-1560bfd9-b6c9-412b-bacc-42908f65b529', 'sourceHandle': 'output-1560bfd9-b6c9-412b-bacc-42908f65b529', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'sourceHandle': 'output-condition-7b7b4d69-79ff-4e85-8189-f75627238670', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'id': 'edge-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'source': 'decision-1b2702c5', 'target': 'option-decision-1b2702c5-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'sourceHandle': 'output-condition-7819205f-28ef-4f6c-ba20-d36aa4744e8a', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#ADFF2F', 'strokeWidth': 2}}, {'id': 'edge-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'source': 'decision-eff4bd2c', 'target': 'option-decision-eff4bd2c-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'sourceHandle': 'output-5bfb8a85-671e-47c3-9ddd-3eb52774b46c', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'source': 'decision-eff4bd2c', 'target': 'option-decision-eff4bd2c-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'sourceHandle': 'output-c5022325-9b3e-4fac-b96a-4d4368a75b9b', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'source': 'decision-0ff91219', 'target': 'option-decision-0ff91219-611f230c-5d3e-497f-ba97-58088de4739f', 'sourceHandle': 'output-611f230c-5d3e-497f-ba97-58088de4739f', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'source': 'decision-0ff91219', 'target': 'option-decision-0ff91219-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'sourceHandle': 'output-9ec0111d-1f65-42d4-9809-5dd2e082cd53', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}]}
2025-07-31 05:05:43,702 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=40, edges_count=16, name='N/A'
2025-07-31 05:05:44,605 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=40, edges_count=16, name='None'
2025-07-31 05:05:46,021 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:05:46,021 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:05:46,189 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:05:46] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:05:48,283 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:05:48,284 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:05:48,455 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:05:48] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:06:08,501 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:06:08] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:06:09,035 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:06:09,883 - api.flow_api - INFO - DB query for flows returned 73 items.
2025-07-31 05:06:10,059 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-31 05:06:10,061 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:06:10,403 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:06:10] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:06:13,774 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:06:13] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:06:14,300 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:06:14,472 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:06:14] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:12:51,494 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:12:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:12:52,004 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:12:52,855 - api.flow_api - INFO - DB query for flows returned 73 items.
2025-07-31 05:12:53,032 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-31 05:12:53,034 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:12:53,378 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:12:53] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:13:02,023 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:13:02] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:13:02,549 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:13:02,721 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:13:02] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:13:34,950 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:13:34] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:13:35,460 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:13:35,461 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 05:13:36,320 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 05:13:36,398 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:13:36,399 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 05:13:37,277 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 05:13:49,978 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:13:49] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:13:51,507 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:13:51,681 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:13:51] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:14:02,942 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:14:02,943 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:14:03,113 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:14:03] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:14:25,567 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:14:25,568 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:14:25,741 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:14:25] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:16:07,145 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:16:07] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:16:07,669 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:16:08,355 - api.flow_api - INFO - DB query for flows returned 40 items.
2025-07-31 05:16:08,532 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 05:16:08,532 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:16:08,882 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:16:08] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:16:51,534 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:16:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:16:52,172 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:16:52,173 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 05:16:52,857 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:16:52,858 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 05:16:53,032 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 05:16:53,714 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 05:16:54,830 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:16:54,831 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:16:56,389 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:16:56,390 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:16:56,579 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:16:56,579 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:16:56,606 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:16:57,037 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:16:57,038 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:16:58,153 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:16:58,303 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:16:58,805 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:17:12,337 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:12] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:12,341 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:12] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:12,343 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:12] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:12,346 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:12] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:12,983 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:17:12,984 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:17:13,781 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:17:13,781 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:17:14,752 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:17:15,713 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:17:16,029 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:17:16,029 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:17:16,343 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:17:16,344 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:17:16,610 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 510, 'y': 172}, 'dragging': False}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 767, 'y': 292}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 42, 'selected': False, 'positionAbsolute': {'x': 739, 'y': 447}, 'dragging': False}, {'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 150, 'height': 42}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 150, 'height': 42}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 150, 'height': 42}, {'id': 'message-3797061a', 'type': 'message', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}], 'edges': [{'id': '10983', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'id': '10984', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'id': '10985', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10986', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10987', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'end-95fa255f', 'sourceHandle': 'source', 'type': 'eliteEdge'}, {'id': '10988', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10989', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'id': '10990', 'source': 'decision-5f4d71a4', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}]}
2025-07-31 05:17:16,611 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=8, edges_count=8, name='N/A'
2025-07-31 05:17:16,804 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:16,805 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:16,975 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:16] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:17,051 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:17:17,577 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-31 05:17:17,654 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:17:17,752 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 05:17:17,752 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:17:17,944 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:17:18,096 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:18] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:18,225 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=8, edges_count=8, name='None'
2025-07-31 05:17:18,341 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:18,342 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:18,516 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:18] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:18,661 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:18,661 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:18,744 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:18,744 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:18,837 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:18] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:18,917 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:18] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:26,638 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:26] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:27,152 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:17:27,678 - api.flow_api - INFO - DB query for flows returned 9 items.
2025-07-31 05:17:27,853 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 05:17:27,853 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:17:28,196 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:28] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:39,312 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:39,313 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:39,488 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:39] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:39,505 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:39,505 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:39,591 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:39,591 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:39,602 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:39,603 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:39,613 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:39,613 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:39,680 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:39] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:39,760 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:39] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:39,774 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:39] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:39,787 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:39] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:39,846 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:39,846 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:40,117 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:40] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:17:40,120 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:17:40,121 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:17:40,294 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:17:40] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:20:39,296 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:20:39] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:20:39,829 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:20:40,351 - api.flow_api - INFO - DB query for flows returned 15 items.
2025-07-31 05:20:40,523 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 05:20:40,523 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:20:40,871 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:20:40] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:20:44,115 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:20:44] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:20:44,635 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 308, 'height': 132}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 40}], 'edges': [{'animated': True, 'id': '10996', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10997', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10998', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10992', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '10993', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10994', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10995', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '10991', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}]}
2025-07-31 05:20:44,635 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 05:20:45,397 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 05:20:48,240 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:20:48,241 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:20:48,413 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:20:48] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:25:22,593 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:25:22] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:25:23,143 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:25:23,668 - api.flow_api - INFO - DB query for flows returned 14 items.
2025-07-31 05:25:23,843 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 05:25:23,843 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:25:24,191 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:25:24] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:25:28,516 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:25:28] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:25:29,042 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 308, 'height': 132}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 40}], 'edges': [{'animated': True, 'id': '11007', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11008', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11009', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11010', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '11011', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11012', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11013', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11014', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}]}
2025-07-31 05:25:29,042 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 05:25:29,746 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 05:25:32,614 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 05:25:32,614 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 05:25:32,791 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:25:32] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:27:44,906 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:27:44] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:27:45,414 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:27:45,929 - api.flow_api - INFO - DB query for flows returned 13 items.
2025-07-31 05:27:46,100 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 05:27:46,101 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:27:46,441 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:27:46] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:27:56,802 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:27:56] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:27:57,329 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:27:57,502 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:27:57] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:29:09,535 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:29:09] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:29:10,056 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:29:10,228 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:29:10] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:30:32,380 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:30:32] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:30:32,925 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:30:33,099 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:30:33] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:31:25,248 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:31:25] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:31:25,765 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:31:25,935 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:31:25] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:34:33,593 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:34:33] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:34:34,120 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 05:34:34,638 - api.flow_api - INFO - DB query for flows returned 13 items.
2025-07-31 05:34:34,813 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 05:34:34,814 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 05:34:35,154 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:34:35] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:34:49,780 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:34:49] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 05:34:50,321 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 05:34:50,493 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 05:34:50] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 13:20:17,845 - root - INFO - Sistema de logging configurado correctamente
2025-07-31 13:20:17,852 - root - INFO - Sistema de logging configurado correctamente
2025-07-31 13:20:17,870 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-31 13:20:17,870 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-31 13:21:46,076 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:46] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 13:21:46,078 - app - WARNING - Authentication error: Signature has expired
2025-07-31 13:21:46,078 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:46] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-07-31 13:21:46,091 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:46] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-31 13:21:46,092 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:46] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-31 13:21:46,095 - app - WARNING - Authentication error: Signature has expired
2025-07-31 13:21:46,095 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:46] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-31 13:21:46,096 - app - WARNING - Authentication error: Signature has expired
2025-07-31 13:21:46,096 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:46] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-31 13:21:46,107 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:46] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 13:21:46,109 - app - WARNING - Authentication error: Signature has expired
2025-07-31 13:21:46,110 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:46] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-31 13:21:49,898 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:49] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 13:21:53,826 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:53] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 13:21:53,902 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 13:21:56,893 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 13:21:57,430 - api.flow_api - INFO - DB query for flows returned 13 items.
2025-07-31 13:21:57,604 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 13:21:57,605 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 13:21:57,947 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 13:21:57] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 20:34:34,100 - root - INFO - Sistema de logging configurado correctamente
2025-07-31 20:34:34,107 - root - INFO - Sistema de logging configurado correctamente
2025-07-31 20:34:34,124 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-31 20:34:34,124 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-31 20:34:57,079 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:34:57] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 20:34:57,083 - app - WARNING - Authentication error: Signature has expired
2025-07-31 20:34:57,084 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:34:57] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-07-31 20:34:57,092 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:34:57] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-31 20:34:57,094 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:34:57] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-31 20:34:57,096 - app - WARNING - Authentication error: Signature has expired
2025-07-31 20:34:57,096 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:34:57] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-31 20:34:57,097 - app - WARNING - Authentication error: Signature has expired
2025-07-31 20:34:57,097 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:34:57] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-31 20:34:57,106 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:34:57] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 20:34:57,108 - app - WARNING - Authentication error: Signature has expired
2025-07-31 20:34:57,109 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:34:57] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-31 20:35:00,422 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:35:00] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 20:35:04,137 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:35:04] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 20:35:04,238 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:35:04] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 20:35:07,283 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 20:35:07,816 - api.flow_api - INFO - DB query for flows returned 13 items.
2025-07-31 20:35:08,025 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 20:35:08,026 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 20:35:08,372 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 20:35:08] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 21:28:59,533 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:28:59] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 21:29:07,506 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:07] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 21:29:09,610 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:09] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 21:29:23,075 - app - ERROR - Exception on /api/auth/login [OPTIONS]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1295, in __inner
    self.limiter._check_request_limit(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1169, in _check_request_limit
    raise e
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1150, in _check_request_limit
    self.__evaluate_limits(endpoint, all_limits)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1087, in __evaluate_limits
    if not method(lim.limit, *args, **kwargs):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/strategies.py", line 157, in hit
    self.storage.incr(
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5640, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5849, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5833, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 622, in execute_command
    return self._execute_command(*args, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 633, in _execute_command
    return conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 92, in call_with_retry
    raise error
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 87, in call_with_retry
    return do()
           ^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 634, in <lambda>
    lambda: self._send_command_parse_response(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 605, in _send_command_parse_response
    return self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 652, in parse_response
    response = connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/connection.py", line 644, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 25, in _read_response
    raw = self._buffer.readline()
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 115, in readline
    self._read_from_socket()
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 68, in _read_from_socket
    raise ConnectionError(SERVER_CLOSED_CONNECTION_ERROR)
redis.exceptions.ConnectionError: Connection closed by server.
2025-07-31 21:29:23,085 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:23] "[35m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 500 -
2025-07-31 21:29:33,573 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:33] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 21:29:34,571 - app - ERROR - Exception on /api/auth/logout [POST]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 167, in decorator
    verify_jwt_in_request(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 94, in verify_jwt_in_request
    jwt_data, jwt_header, jwt_location = _decode_jwt_from_request(
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 368, in _decode_jwt_from_request
    verify_token_not_blocklisted(jwt_header, decoded_token)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/internal_utils.py", line 58, in verify_token_not_blocklisted
    if jwt_manager._token_in_blocklist_callback(jwt_header, jwt_data):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/app.py", line 84, in check_if_token_in_blocklist
    token = db.session.query(TokenBlocklist.id).filter_by(jti=jti).scalar()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: SELECT token_blocklist.id AS token_blocklist_id 
FROM token_blocklist 
WHERE token_blocklist.jti = %(jti_1)s]
[parameters: {'jti_1': 'af21520f-0c58-4158-b144-f114cedf6597'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-31 21:29:34,578 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:34] "[35m[1mPOST /api/auth/logout HTTP/1.1[0m" 500 -
2025-07-31 21:29:34,696 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:34] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 21:29:34,774 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:34] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 21:29:36,378 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 21:29:36,896 - api.flow_api - INFO - DB query for flows returned 13 items.
2025-07-31 21:29:37,068 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 21:29:37,068 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 21:29:37,417 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:37] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 21:29:41,755 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:41] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 21:29:42,276 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 308, 'height': 132}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 40}], 'edges': [{'animated': True, 'id': '11015', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11016', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11017', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11018', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '11019', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11020', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11021', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11022', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}]}
2025-07-31 21:29:42,277 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 21:29:42,584 - app - ERROR - Exception on /api/auth/logout [POST]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/auth.py", line 406, in logout
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: INSERT INTO token_blocklist (jti, created_at) VALUES (%(jti)s, %(created_at)s) RETURNING token_blocklist.id]
[parameters: {'jti': 'af21520f-0c58-4158-b144-f114cedf6597', 'created_at': datetime.datetime(2025, 8, 1, 0, 29, 3, 932843)}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-31 21:29:42,761 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:42] "[35m[1mPOST /api/auth/logout HTTP/1.1[0m" 500 -
2025-07-31 21:29:42,979 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 21:29:45,822 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 21:29:45,823 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 21:29:45,997 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:29:45] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 21:36:48,347 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:36:48] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 21:36:49,852 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 21:36:51,314 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-31 21:36:51,484 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 21:36:51,484 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 21:36:51,827 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:36:51] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 21:48:04,048 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:48:04] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 21:48:06,312 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 21:48:06] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-31 22:28:57,398 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 22:28:57] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 22:28:58,505 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 22:28:58] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 22:28:58,562 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 22:28:58] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 22:28:59,077 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 22:28:59,604 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-31 22:28:59,777 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 22:28:59,778 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 22:29:00,126 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 22:29:00] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 22:35:58,690 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 22:35:58] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-31 22:35:58,693 - app - WARNING - Authentication error: Signature has expired
2025-07-31 22:35:58,693 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 22:35:58] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-31 23:20:30,848 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:20:30] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-31 23:20:32,000 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:20:32] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-31 23:20:32,082 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:20:32] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:20:32,611 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 23:20:33,138 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-31 23:20:33,312 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 23:20:33,312 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 23:20:33,657 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:20:33] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:21:28,411 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:21:28] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:21:28,938 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:21:29,114 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:21:29] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:23:42,022 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:23:42] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:23:42,543 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:23:42,716 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:23:42] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:24:25,048 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:24:25] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:24:25,569 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:24:25,741 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:24:25] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:24:57,250 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:24:57] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:24:57,771 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:24:57,944 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:24:57] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:25:13,718 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:25:13] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:25:14,239 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:25:14,412 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:25:14] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:27:40,562 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:27:40] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:27:41,094 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 23:27:41,623 - api.flow_api - INFO - DB query for flows returned 12 items.
2025-07-31 23:27:41,797 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 23:27:41,798 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 23:27:42,144 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:27:42] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:30:12,524 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:30:12] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:30:13,053 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 308, 'height': 132}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 40}], 'edges': [{'animated': True, 'id': '11023', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11024', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11025', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11026', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '11027', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11028', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11029', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11030', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}]}
2025-07-31 23:30:13,054 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 23:30:13,743 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 23:30:16,505 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 23:30:16,505 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 23:30:16,680 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:30:16] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:32:53,859 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:32:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:32:54,387 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 198, 'height': 76}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 178, 'height': 58}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 198, 'height': 76}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 198, 'height': 76}], 'edges': [{'animated': True, 'id': '11023', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11024', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11025', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11026', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '11027', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11028', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11029', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11030', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}]}
2025-07-31 23:32:54,388 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 23:32:55,076 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 23:32:55,388 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 198, 'height': 76}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 178, 'height': 58}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 198, 'height': 76}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 198, 'height': 76}], 'edges': [{'animated': True, 'id': '11023', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11024', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11025', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11026', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '11027', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11028', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11029', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11030', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}]}
2025-07-31 23:32:55,389 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-31 23:32:56,082 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-31 23:32:57,161 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 23:32:57,162 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 23:32:57,336 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:32:57] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:32:57,509 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 23:32:57,509 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 23:32:57,684 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:32:57] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:32:59,070 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 23:32:59,591 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-07-31 23:32:59,809 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 23:32:59,809 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 23:33:00,156 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:33:00] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:35:19,926 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:35:19] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:35:20,452 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:35:20,631 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:35:20] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:35:25,904 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:35:25] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:35:26,433 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:35:26,608 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:35:26] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:39:08,380 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:39:08] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:39:08,904 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 23:39:09,426 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-07-31 23:39:09,599 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-31 23:39:09,600 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 23:39:09,947 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:39:09] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:39:17,947 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:39:17] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:39:18,477 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-95fa255f', 'label': 'Fin'}, 'id': 'end-95fa255f', 'position': {'x': 1076, 'y': 1013}, 'type': 'end', 'width': 308, 'height': 132}, {'data': {'id': 'message-10b3a1d1', 'label': 'Mensaje', 'lastUpdated': '2025-07-30T02:39:33.186Z', 'message': 'Hola rey', 'variables': []}, 'id': 'message-10b3a1d1', 'position': {'x': 767, 'y': 292}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'instruction': 'A', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'A'}, 'id': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'position': {'x': 357, 'y': 753}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'instruction': 'B', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'B'}, 'id': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'position': {'x': 712, 'y': 724}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'instruction': 'C', 'lastUpdated': '2025-07-30T02:39:57.610Z', 'sourceNode': 'decision-5f4d71a4', 'text': 'C'}, 'id': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'position': {'x': 1093, 'y': 772}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'start-b78e93c0', 'label': 'Inicio'}, 'id': 'start-b78e93c0', 'position': {'x': 510, 'y': 172}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'conditions': [{'color': '#3498db', 'id': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'text': 'A'}, {'color': '#e74c3c', 'id': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-5f4d71a4', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Cual camino prefieres?'}, 'id': 'decision-5f4d71a4', 'position': {'x': 739, 'y': 447}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'id': 'message-3797061a', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'id': 'message-3797061a', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'message-3797061a', 'label': 'Mensaje'}, 'id': 'message-3797061a', 'position': {'x': 79.63957575364877, 'y': 466.22479066368663}, 'type': 'message', 'width': 212, 'height': 101}], 'edges': [{'animated': True, 'id': '11031', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11032', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11033', 'label': '', 'source': 'decision-5f4d71a4', 'sourceHandle': 'output-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11036', 'label': '', 'source': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11037', 'label': '', 'source': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'animated': True, 'id': '11038', 'label': '', 'source': 'start-b78e93c0', 'target': 'message-10b3a1d1', 'type': 'default'}, {'animated': True, 'id': '11034', 'label': '', 'source': 'message-10b3a1d1', 'target': 'decision-5f4d71a4', 'type': 'eliteEdge'}, {'animated': True, 'id': '11035', 'label': '', 'source': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'sourceHandle': 'source', 'target': 'end-95fa255f', 'type': 'eliteEdge'}, {'zIndex': 0, 'source': 'decision-5f4d71a4', 'sourceHandle': 'c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'target': 'option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96', 'targetHandle': 'target', 'id': 'reactflow__edge-decision-5f4d71a4c341f3fe-e5b3-47e0-a0fa-4188c946ed96-option-decision-5f4d71a4-c341f3fe-e5b3-47e0-a0fa-4188c946ed96target'}, {'zIndex': 0, 'source': 'decision-5f4d71a4', 'sourceHandle': '59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'target': 'option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6', 'targetHandle': 'target', 'id': 'reactflow__edge-decision-5f4d71a459ce0819-f9b4-44ab-8f64-20f4f648cdf6-option-decision-5f4d71a4-59ce0819-f9b4-44ab-8f64-20f4f648cdf6target'}, {'zIndex': 0, 'source': 'decision-5f4d71a4', 'sourceHandle': 'condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'target': 'option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783', 'targetHandle': 'target', 'id': 'reactflow__edge-decision-5f4d71a4condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783-option-decision-5f4d71a4-condition-9f776dd3-9df6-4ae2-8f7f-f510ef304783target'}]}
2025-07-31 23:39:18,477 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=10, edges_count=11, name='N/A'
2025-07-31 23:39:19,165 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=10, edges_count=11, name='None'
2025-07-31 23:39:21,451 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-07-31 23:39:21,451 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-07-31 23:39:21,624 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:39:21] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:41:15,261 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:41:15] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:41:15,789 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 23:41:16,474 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-07-31 23:41:16,646 - api.flow_api - INFO - DB query for edges returned 11 items.
2025-07-31 23:41:16,647 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 23:41:16,992 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:41:16] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:43:13,433 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:43:13] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:43:13,959 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:43:14,133 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:43:14] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:43:23,756 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:43:23] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:43:24,286 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:43:24,459 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:43:24] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:49:17,718 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:49:17] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:49:18,249 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 23:49:18,928 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-07-31 23:49:19,100 - api.flow_api - INFO - DB query for edges returned 11 items.
2025-07-31 23:49:19,101 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 23:49:19,442 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:49:19] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:53:37,321 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:53:37] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:53:37,860 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:53:38,034 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:53:38] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:57:59,889 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:57:59] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:58:00,421 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-31 23:58:01,104 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-07-31 23:58:01,277 - api.flow_api - INFO - DB query for edges returned 11 items.
2025-07-31 23:58:01,277 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-31 23:58:01,622 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:58:01] "GET /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:59:24,014 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:59:24] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-07-31 23:59:24,538 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-31 23:59:24,711 - werkzeug - INFO - 127.0.0.1 - - [31/Jul/2025 23:59:24] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:02:26,147 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:02:26] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:02:26,678 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-01 00:02:26,854 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:02:26] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:02:54,830 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:02:54] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:02:55,751 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-01 00:02:55,923 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:02:55] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:03:13,754 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:03:13] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:03:14,478 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-01 00:03:15,156 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-08-01 00:03:15,331 - api.flow_api - INFO - DB query for edges returned 11 items.
2025-08-01 00:03:15,332 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-01 00:03:15,674 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:03:15] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:03:39,165 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:03:39] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:03:39,692 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-01 00:03:39,865 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:03:39] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:05:10,477 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:05:10] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-01 00:05:11,006 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-01 00:05:11,180 - werkzeug - INFO - 127.0.0.1 - - [01/Aug/2025 00:05:11] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:51:26,441 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 00:51:26,452 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 00:51:26,464 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-03 00:51:26,464 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 00:51:30,312 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:51:30] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:51:33,387 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 00:51:36,536 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 00:51:36,711 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-08-03 00:51:36,712 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 00:51:37,056 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:51:37] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:51:37,392 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:51:37] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:51:37,918 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 00:51:38,090 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:51:38] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:58:45,411 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:58:45] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:58:45,942 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 00:58:46,624 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 00:58:46,798 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-08-03 00:58:46,799 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 00:58:47,142 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:58:47] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:59:20,962 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:59:20] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:59:21,482 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 00:59:21,654 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:59:21] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:59:38,275 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:59:38] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:59:38,794 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 00:59:38,967 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:59:38] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:59:50,570 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:59:50] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 00:59:51,092 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 00:59:51,264 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 00:59:51] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:00:09,341 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:00:09] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:00:09,925 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:00:10,099 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:00:10] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:05:47,546 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:05:47] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:05:48,071 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:05:48,752 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:05:48,924 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-08-03 01:05:48,924 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:05:49,268 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:05:49] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:07:48,540 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:07:48] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:07:49,065 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'text': 'A'}, {'color': '#e74c3c', 'id': 'acfae742-66ce-42ed-9fab-1bf289120863', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-0617783f', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Camino A, B o C?'}, 'id': 'decision-0617783f', 'position': {'x': -70.72705846972765, 'y': -348.03683598472423}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-4abe377d', 'label': 'Mensaje', 'lastUpdated': '2025-08-02T08:50:03.805Z', 'message': 'Hola, buenas tardes', 'variables': []}, 'id': 'message-4abe377d', 'position': {'x': -39.04525010191162, 'y': -507.8219699810586}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': '1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'instruction': 'A', 'lastUpdated': '2025-08-02T08:50:27.533Z', 'sourceNode': 'decision-0617783f', 'text': 'A'}, 'id': 'option-decision-0617783f-1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'position': {'x': -409.77525607107054, 'y': -79.98374188288491}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'acfae742-66ce-42ed-9fab-1bf289120863', 'instruction': 'B', 'lastUpdated': '2025-08-02T08:50:27.533Z', 'sourceNode': 'decision-0617783f', 'text': 'B'}, 'id': 'option-decision-0617783f-acfae742-66ce-42ed-9fab-1bf289120863', 'position': {'x': -74.73251728148307, 'y': 85.14673732808936}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'instruction': 'C', 'lastUpdated': '2025-08-02T08:50:27.533Z', 'sourceNode': 'decision-0617783f', 'text': 'C'}, 'id': 'option-decision-0617783f-condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'position': {'x': 241.53428294259345, 'y': -13.378585953425173}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-14f955f2', 'label': 'Fin'}, 'id': 'end-14f955f2', 'position': {'x': 419.33834635644655, 'y': 348.671307139263}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-77d7d805', 'label': 'Inicio'}, 'id': 'start-77d7d805', 'position': {'x': -341.42136683148027, 'y': -632.0707944295722}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'animated': True, 'id': '11392', 'label': '', 'source': 'decision-0617783f', 'sourceHandle': 'output-1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'target': 'option-decision-0617783f-1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11393', 'label': '', 'source': 'decision-0617783f', 'sourceHandle': 'output-acfae742-66ce-42ed-9fab-1bf289120863', 'target': 'option-decision-0617783f-acfae742-66ce-42ed-9fab-1bf289120863', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11394', 'label': '', 'source': 'decision-0617783f', 'sourceHandle': 'output-condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'target': 'option-decision-0617783f-condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11395', 'label': '', 'source': 'option-decision-0617783f-acfae742-66ce-42ed-9fab-1bf289120863', 'sourceHandle': 'source', 'target': 'end-14f955f2', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11396', 'label': '', 'source': 'option-decision-0617783f-condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'sourceHandle': 'source', 'target': 'end-14f955f2', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11397', 'label': '', 'source': 'option-decision-0617783f-1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'sourceHandle': 'source', 'target': 'end-14f955f2', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11384', 'label': '', 'source': 'decision-0617783f', 'sourceHandle': 'output-1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'target': 'option-decision-0617783f-1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11385', 'label': '', 'source': 'decision-0617783f', 'sourceHandle': 'output-acfae742-66ce-42ed-9fab-1bf289120863', 'target': 'option-decision-0617783f-acfae742-66ce-42ed-9fab-1bf289120863', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11386', 'label': '', 'source': 'decision-0617783f', 'sourceHandle': 'output-condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'target': 'option-decision-0617783f-condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11387', 'label': '', 'source': 'option-decision-0617783f-acfae742-66ce-42ed-9fab-1bf289120863', 'sourceHandle': 'source', 'target': 'end-14f955f2', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11388', 'label': '', 'source': 'option-decision-0617783f-condition-bf5a1228-0603-4543-9e4d-d58ae71c25f8', 'sourceHandle': 'source', 'target': 'end-14f955f2', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11389', 'label': '', 'source': 'option-decision-0617783f-1c1a7dcb-2725-4daa-94a6-ff2d252c70a8', 'sourceHandle': 'source', 'target': 'end-14f955f2', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'zIndex': 0, 'source': 'message-4abe377d', 'sourceHandle': 'default', 'target': 'decision-0617783f', 'targetHandle': None, 'id': 'reactflow__edge-message-4abe377ddefault-decision-0617783f'}, {'zIndex': 0, 'source': 'start-77d7d805', 'sourceHandle': 'output', 'target': 'message-4abe377d', 'targetHandle': 'default', 'id': 'reactflow__edge-start-77d7d805output-message-4abe377ddefault'}]}
2025-08-03 01:07:49,066 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=14, name='N/A'
2025-08-03 01:07:49,756 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=14, name='None'
2025-08-03 01:07:52,174 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:07:52,175 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:07:52,346 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:07:52] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:07:56,492 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:07:56] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:07:57,016 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:07:57,855 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:07:58,029 - api.flow_api - INFO - DB query for edges returned 22 items.
2025-08-03 01:07:58,030 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:07:58,373 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:07:58] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:09:25,155 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:09:25] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:09:25,694 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:09:25,867 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:09:25] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:10:10,910 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:10:10] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:10:11,434 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:10:11,607 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:10:11] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:12:07,528 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:12:07] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:12:08,047 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:12:08,219 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:12:08] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:13:25,153 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:13:25] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:13:25,678 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'id': 'start-698962b4', 'type': 'start', 'position': {'x': -414.5894430432464, 'y': -817.8369119328526}, 'data': {'id': 'start-698962b4', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': -414.5894430432464, 'y': -817.8369119328526}, 'dragging': False}, {'id': 'message-5dd1ce67', 'type': 'message', 'position': {'x': -111.67080424316194, 'y': -726.3712190484116}, 'data': {'id': 'message-5dd1ce67', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': -111.67080424316194, 'y': -726.3712190484116}, 'dragging': False}, {'id': 'decision-3192f05a', 'type': 'decision', 'position': {'x': -117.57181668731941, 'y': -583.7634183146056}, 'data': {'id': 'decision-3192f05a', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '14a5ddad-cb4e-4585-a254-e83d74b05c18', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': 'bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': -117.57181668731941, 'y': -583.7634183146056}, 'dragging': False}, {'id': 'option-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'type': 'option', 'position': {'x': -494.4435842367055, 'y': -382.77991624057927}, 'data': {'sourceNode': 'decision-3192f05a', 'conditionId': '14a5ddad-cb4e-4585-a254-e83d74b05c18', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-08-03T04:13:15.577Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -494.4435842367055, 'y': -382.77991624057927}, 'dragging': False}, {'id': 'option-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'type': 'option', 'position': {'x': -155.9283975743431, 'y': -339.5058249834244}, 'data': {'sourceNode': 'decision-3192f05a', 'conditionId': 'bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T04:13:15.577Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -155.9283975743431, 'y': -339.5058249834244}, 'dragging': False}, {'id': 'option-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'type': 'option', 'position': {'x': 213.07535338283293, 'y': -390.6479328327893}, 'data': {'sourceNode': 'decision-3192f05a', 'conditionId': 'condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#FFA500', 'lastUpdated': '2025-08-03T04:13:15.577Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 213.07535338283293, 'y': -390.6479328327893}, 'dragging': False}, {'id': 'end-f5531eb6', 'type': 'end', 'position': {'x': 284.68053158941615, 'y': -93.97938544953386}, 'data': {'id': 'end-f5531eb6', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 303, 'height': 132, 'selected': True, 'positionAbsolute': {'x': 284.68053158941615, 'y': -93.97938544953386}, 'dragging': False}], 'edges': [{'zIndex': 0, 'source': 'start-698962b4', 'sourceHandle': 'output', 'target': 'message-5dd1ce67', 'targetHandle': 'default', 'id': 'reactflow__edge-start-698962b4output-message-5dd1ce67default'}, {'zIndex': 0, 'source': 'message-5dd1ce67', 'sourceHandle': 'default', 'target': 'decision-3192f05a', 'targetHandle': None, 'id': 'reactflow__edge-message-5dd1ce67default-decision-3192f05a'}, {'id': 'edge-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'source': 'decision-3192f05a', 'target': 'option-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'sourceHandle': 'output-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'source': 'decision-3192f05a', 'target': 'option-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'sourceHandle': 'output-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'source': 'decision-3192f05a', 'target': 'option-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'sourceHandle': 'output-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'sourceHandle': 'source', 'target': 'end-f5531eb6', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18source-end-f5531eb6input'}, {'zIndex': 0, 'source': 'option-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'sourceHandle': 'source', 'target': 'end-f5531eb6', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4source-end-f5531eb6input'}, {'zIndex': 0, 'source': 'option-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'sourceHandle': 'source', 'target': 'end-f5531eb6', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57source-end-f5531eb6input'}]}
2025-08-03 01:13:25,678 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:13:26,369 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:13:33,560 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:13:33] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:13:35,019 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'id': 'start-698962b4', 'type': 'start', 'position': {'x': -414.5894430432464, 'y': -817.8369119328526}, 'data': {'id': 'start-698962b4', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': -414.5894430432464, 'y': -817.8369119328526}, 'dragging': False}, {'id': 'message-5dd1ce67', 'type': 'message', 'position': {'x': -111.67080424316194, 'y': -726.3712190484116}, 'data': {'id': 'message-5dd1ce67', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': -111.67080424316194, 'y': -726.3712190484116}, 'dragging': False}, {'id': 'decision-3192f05a', 'type': 'decision', 'position': {'x': -139.66153250868518, 'y': -566.4945888036016}, 'data': {'id': 'decision-3192f05a', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '14a5ddad-cb4e-4585-a254-e83d74b05c18', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': 'bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': True, 'positionAbsolute': {'x': -139.66153250868518, 'y': -566.4945888036016}, 'dragging': False}, {'id': 'option-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'type': 'option', 'position': {'x': -494.4435842367055, 'y': -382.77991624057927}, 'data': {'sourceNode': 'decision-3192f05a', 'conditionId': '14a5ddad-cb4e-4585-a254-e83d74b05c18', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-08-03T04:13:15.577Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -494.4435842367055, 'y': -382.77991624057927}, 'dragging': False}, {'id': 'option-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'type': 'option', 'position': {'x': -155.9283975743431, 'y': -339.5058249834244}, 'data': {'sourceNode': 'decision-3192f05a', 'conditionId': 'bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T04:13:15.577Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -155.9283975743431, 'y': -339.5058249834244}, 'dragging': False}, {'id': 'option-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'type': 'option', 'position': {'x': 213.07535338283293, 'y': -390.6479328327893}, 'data': {'sourceNode': 'decision-3192f05a', 'conditionId': 'condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#FFA500', 'lastUpdated': '2025-08-03T04:13:15.577Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 213.07535338283293, 'y': -390.6479328327893}, 'dragging': False}, {'id': 'end-f5531eb6', 'type': 'end', 'position': {'x': 284.68053158941615, 'y': -93.97938544953386}, 'data': {'id': 'end-f5531eb6', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 284.68053158941615, 'y': -93.97938544953386}, 'dragging': False}], 'edges': [{'zIndex': 0, 'source': 'start-698962b4', 'sourceHandle': 'output', 'target': 'message-5dd1ce67', 'targetHandle': 'default', 'id': 'reactflow__edge-start-698962b4output-message-5dd1ce67default'}, {'zIndex': 0, 'source': 'message-5dd1ce67', 'sourceHandle': 'default', 'target': 'decision-3192f05a', 'targetHandle': None, 'id': 'reactflow__edge-message-5dd1ce67default-decision-3192f05a'}, {'id': 'edge-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'source': 'decision-3192f05a', 'target': 'option-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'sourceHandle': 'output-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'source': 'decision-3192f05a', 'target': 'option-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'sourceHandle': 'output-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'source': 'decision-3192f05a', 'target': 'option-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'sourceHandle': 'output-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18', 'sourceHandle': 'source', 'target': 'end-f5531eb6', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-3192f05a-14a5ddad-cb4e-4585-a254-e83d74b05c18source-end-f5531eb6input'}, {'zIndex': 0, 'source': 'option-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4', 'sourceHandle': 'source', 'target': 'end-f5531eb6', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-3192f05a-bef5173a-f878-4b75-9d81-4f9fbaeea1e4source-end-f5531eb6input'}, {'zIndex': 0, 'source': 'option-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57', 'sourceHandle': 'source', 'target': 'end-f5531eb6', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-3192f05a-condition-374273e8-856e-46bc-bd8d-a14d96d4ce57source-end-f5531eb6input'}]}
2025-08-03 01:13:35,019 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:13:36,626 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:13:37,416 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:13:37,416 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:13:37,591 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:13:37] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:13:37,758 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:13:38,282 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:13:38,454 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:13:38,454 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:13:38,794 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:13:38] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:13:43,274 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11421, 256, 20597, 20598, , null, null, null, 2025-08-03 04:13:36.553466, 2025-08-03 04:13:42.936029, f, reactflow__edge-start-698962b4output-message-5dd1ce67default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11421, 256, 20597, 20598, , null, null, null, 2025-08-03 04:13:36.553466, 2025-08-03 04:13:42.936029, f, reactflow__edge-start-698962b4output-message-5dd1ce67default, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20597, 'target_flow_id': 20598, 'edge_type': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 13, 42, 936029), 'flow_edges_id': 11421}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:13:43,286 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11421, 256, 20597, 20598, , null, null, null, 2025-08-03 04:13:36.553466, 2025-08-03 04:13:42.936029, f, reactflow__edge-start-698962b4output-message-5dd1ce67default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11421, 256, 20597, 20598, , null, null, null, 2025-08-03 04:13:36.553466, 2025-08-03 04:13:42.936029, f, reactflow__edge-start-698962b4output-message-5dd1ce67default, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20597, 'target_flow_id': 20598, 'edge_type': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 13, 42, 936029), 'flow_edges_id': 11421}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:13:43,290 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11421, 256, 20597, 20598, , null, null, null, 2025-08-03 04:13:36.553466, 2025-08-03 04:13:42.936029, f, reactflow__edge-start-698962b4output-message-5dd1ce67default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11421, 256, 20597, 20598, , null, null, null, 2025-08-03 04:13:36.553466, 2025-08-03 04:13:42.936029, f, reactflow__edge-start-698962b4output-message-5dd1ce67default, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20597, 'target_flow_id': 20598, 'edge_type': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 13, 42, 936029), 'flow_edges_id': 11421}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:13:43,462 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:13:43] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:14:21,240 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:14:21] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:14:21,765 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:14:21,938 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:14:21] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:14:48,681 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:14:48] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:14:49,195 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'id': 'start-06a83ae8', 'type': 'start', 'position': {'x': -296, 'y': -902}, 'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142}, {'id': 'message-b69d9b69', 'type': 'message', 'position': {'x': 6, 'y': -764}, 'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 6, 'y': -764}, 'dragging': False}, {'id': 'decision-135f3c2e', 'type': 'decision', 'position': {'x': 12, 'y': -621}, 'data': {'id': 'decision-135f3c2e', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 12, 'y': -621}, 'dragging': False}, {'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'type': 'option', 'position': {'x': -233, 'y': -337}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-08-03T04:14:39.477Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'type': 'option', 'position': {'x': 17, 'y': -337}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T04:14:39.477Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'type': 'option', 'position': {'x': 267, 'y': -337}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#FFA500', 'lastUpdated': '2025-08-03T04:14:39.477Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'end-a3e615e8', 'type': 'end', 'position': {'x': 91, 'y': -69}, 'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 303, 'height': 132}], 'edges': [{'zIndex': 0, 'source': 'start-06a83ae8', 'sourceHandle': 'output', 'target': 'message-b69d9b69', 'targetHandle': 'default', 'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69default'}, {'zIndex': 0, 'source': 'message-b69d9b69', 'sourceHandle': 'default', 'target': 'decision-135f3c2e', 'targetHandle': None, 'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e'}, {'id': 'edge-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10source-end-a3e615e8input'}, {'zIndex': 0, 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7source-end-a3e615e8input'}, {'zIndex': 0, 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1source-end-a3e615e8input'}]}
2025-08-03 01:14:49,196 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:14:49,883 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:14:55,166 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:14:55] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:14:55,685 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'id': 'start-06a83ae8', 'type': 'start', 'position': {'x': -296, 'y': -902}, 'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142}, {'id': 'message-b69d9b69', 'type': 'message', 'position': {'x': 6, 'y': -764}, 'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 6, 'y': -764}, 'dragging': False}, {'id': 'decision-135f3c2e', 'type': 'decision', 'position': {'x': 12, 'y': -621}, 'data': {'id': 'decision-135f3c2e', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 12, 'y': -621}, 'dragging': False}, {'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'type': 'option', 'position': {'x': -233, 'y': -337}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-08-03T04:14:39.477Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'type': 'option', 'position': {'x': 17, 'y': -337}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T04:14:39.477Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'type': 'option', 'position': {'x': 267, 'y': -337}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n', 'instruction': 'Nueva condici√≥n', 'color': '#FFA500', 'lastUpdated': '2025-08-03T04:14:39.477Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'end-a3e615e8', 'type': 'end', 'position': {'x': 91, 'y': -69}, 'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 303, 'height': 132}], 'edges': [{'zIndex': 0, 'source': 'start-06a83ae8', 'sourceHandle': 'output', 'target': 'message-b69d9b69', 'targetHandle': 'default', 'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69default'}, {'zIndex': 0, 'source': 'message-b69d9b69', 'sourceHandle': 'default', 'target': 'decision-135f3c2e', 'targetHandle': None, 'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e'}, {'id': 'edge-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10source-end-a3e615e8input'}, {'zIndex': 0, 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7source-end-a3e615e8input'}, {'zIndex': 0, 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'id': 'reactflow__edge-option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1source-end-a3e615e8input'}]}
2025-08-03 01:14:55,686 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:14:56,369 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:14:58,488 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:14:58,489 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:14:58,657 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:14:58] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:14:59,336 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:14:59,856 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:15:00,027 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:15:00,027 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:15:00,371 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:15:00] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:15:03,270 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11429, 256, 20611, 20612, , null, null, null, 2025-08-03 04:14:57.626111, 2025-08-03 04:15:02.928689, f, reactflow__edge-start-06a83ae8output-message-b69d9b69default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11429, 256, 20611, 20612, , null, null, null, 2025-08-03 04:14:57.626111, 2025-08-03 04:15:02.928689, f, reactflow__edge-start-06a83ae8output-message-b69d9b69default, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20611, 'target_flow_id': 20612, 'edge_type': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 15, 2, 928689), 'flow_edges_id': 11429}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:15:03,272 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11429, 256, 20611, 20612, , null, null, null, 2025-08-03 04:14:57.626111, 2025-08-03 04:15:02.928689, f, reactflow__edge-start-06a83ae8output-message-b69d9b69default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11429, 256, 20611, 20612, , null, null, null, 2025-08-03 04:14:57.626111, 2025-08-03 04:15:02.928689, f, reactflow__edge-start-06a83ae8output-message-b69d9b69default, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20611, 'target_flow_id': 20612, 'edge_type': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 15, 2, 928689), 'flow_edges_id': 11429}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:15:03,274 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11429, 256, 20611, 20612, , null, null, null, 2025-08-03 04:14:57.626111, 2025-08-03 04:15:02.928689, f, reactflow__edge-start-06a83ae8output-message-b69d9b69default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11429, 256, 20611, 20612, , null, null, null, 2025-08-03 04:14:57.626111, 2025-08-03 04:15:02.928689, f, reactflow__edge-start-06a83ae8output-message-b69d9b69default, output, default, null, t).

[SQL: UPDATE flow_edges SET source_flow_id=%(source_flow_id)s, target_flow_id=%(target_flow_id)s, edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'source_flow_id': 20611, 'target_flow_id': 20612, 'edge_type': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 15, 2, 928689), 'flow_edges_id': 11429}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:15:03,447 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:15:03] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:19:51,994 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:19:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:19:52,527 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:19:52,697 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:19:52] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:21:28,116 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:21:28] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:21:28,651 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:21:29,177 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:21:29,351 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:21:29,351 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:21:29,697 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:21:29] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:21:51,878 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:21:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:21:52,397 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'animated': True, 'id': '11431', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11432', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11433', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11434', 'label': '', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11435', 'label': '', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11436', 'label': '', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'zIndex': 0, 'source': 'message-b69d9b69', 'sourceHandle': 'default', 'target': 'decision-135f3c2e', 'targetHandle': None, 'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e'}, {'zIndex': 0, 'source': 'start-06a83ae8', 'sourceHandle': 'output', 'target': 'message-b69d9b69', 'targetHandle': 'input', 'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input'}]}
2025-08-03 01:21:52,397 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:21:53,082 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:21:53,765 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:21:53.426141, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:21:53.426141, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 21, 53, 426141), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:21:53,767 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:21:53.426141, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:21:53.426141, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 21, 53, 426141), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:21:53,770 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:21:53.426141, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:21:53.426141, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 21, 53, 426141), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:21:53,943 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:21:53] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:21:58,833 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:21:58] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:21:59,350 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'animated': True, 'id': '11431', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11432', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11433', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11434', 'label': '', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11435', 'label': '', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11436', 'label': '', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'zIndex': 0, 'source': 'message-b69d9b69', 'sourceHandle': 'default', 'target': 'decision-135f3c2e', 'targetHandle': None, 'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e'}, {'zIndex': 0, 'source': 'start-06a83ae8', 'sourceHandle': 'output', 'target': 'message-b69d9b69', 'targetHandle': 'input', 'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input'}]}
2025-08-03 01:21:59,350 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:22:00,041 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:22:00,731 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:00.388472, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:00.388472, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 22, 0, 388472), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:22:00,734 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:00.388472, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:00.388472, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 22, 0, 388472), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:22:00,737 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:00.388472, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:00.388472, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 22, 0, 388472), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:22:00,909 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:22:00] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:22:48,687 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:22:48] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:22:49,228 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:22:49,401 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:22:49] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:22:56,985 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:22:56] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:22:57,508 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'animated': True, 'id': '11431', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11432', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11433', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11434', 'label': '', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11435', 'label': '', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11436', 'label': '', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'zIndex': 0, 'source': 'message-b69d9b69', 'sourceHandle': 'default', 'target': 'decision-135f3c2e', 'targetHandle': None, 'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e'}, {'zIndex': 0, 'source': 'start-06a83ae8', 'sourceHandle': 'output', 'target': 'message-b69d9b69', 'targetHandle': 'input', 'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input'}]}
2025-08-03 01:22:57,509 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:22:58,196 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:22:58,884 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:58.542059, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:58.542059, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 22, 58, 542059), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:22:58,887 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:58.542059, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:58.542059, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 22, 58, 542059), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:22:58,889 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:58.542059, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:22:58.542059, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 22, 58, 542059), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:22:59,062 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:22:59] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:23:00,938 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'animated': True, 'id': '11431', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11432', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11433', 'label': '', 'source': 'decision-135f3c2e', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '11434', 'label': '', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11435', 'label': '', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11436', 'label': '', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'zIndex': 0, 'source': 'message-b69d9b69', 'sourceHandle': 'default', 'target': 'decision-135f3c2e', 'targetHandle': None, 'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e'}, {'zIndex': 0, 'source': 'start-06a83ae8', 'sourceHandle': 'output', 'target': 'message-b69d9b69', 'targetHandle': 'input', 'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input'}]}
2025-08-03 01:23:00,938 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:23:01,629 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:23:02,323 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:23:01.976598, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:23:01.976598, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 23, 1, 976598), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:23:02,327 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:23:01.976598, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:23:01.976598, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 23, 1, 976598), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:23:02,329 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:23:01.976598, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:23:01.976598, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 23, 1, 976598), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:23:02,501 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:23:02] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:24:51,671 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:24:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:24:52,201 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje', 'message': 'Hola, buenas tardes', 'variables': [], 'lastUpdated': '2025-08-03T04:24:28.305Z'}, 'id': 'message-b69d9b69', 'position': {'x': -58.01568088148461, 'y': -866.9271731819949}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': -58.01568088148461, 'y': -866.9271731819949}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n', 'isEditing': False, 'question': 'Camino A, B o C\n'}, 'id': 'decision-135f3c2e', 'position': {'x': -113.5304401194397, 'y': -668.370532171989}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': True, 'positionAbsolute': {'x': -113.5304401194397, 'y': -668.370532171989}, 'dragging': False}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 124.8906545843154, 'y': 134.34392750589225}, 'type': 'end', 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 124.8906545843154, 'y': 134.34392750589225}, 'dragging': False}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -447.8803409148949, 'y': -979.8229846010204}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': -447.8803409148949, 'y': -979.8229846010204}}, {'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'type': 'option', 'position': {'x': -602.020231638696, 'y': -265.0266046660968}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'A', 'instruction': 'A', 'color': '#3498db', 'lastUpdated': '2025-08-03T04:24:45.529Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -602.020231638696, 'y': -265.0266046660968}, 'dragging': False}, {'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'type': 'option', 'position': {'x': -104.74397411609868, 'y': -244.94325380131733}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'B', 'instruction': 'B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T04:24:45.529Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -104.74397411609868, 'y': -244.94325380131733}, 'dragging': False}, {'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'type': 'option', 'position': {'x': 216.80296333967817, 'y': -239.92241608512248}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'C', 'instruction': 'C', 'color': '#FFA500', 'lastUpdated': '2025-08-03T04:24:45.529Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 216.80296333967817, 'y': -239.92241608512248}, 'dragging': False}], 'edges': [{'animated': True, 'id': '11434', 'label': '', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11435', 'label': '', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'animated': True, 'id': '11436', 'label': '', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'source', 'target': 'end-a3e615e8', 'targetHandle': 'input', 'type': 'eliteEdge'}, {'zIndex': 0, 'source': 'message-b69d9b69', 'sourceHandle': 'default', 'target': 'decision-135f3c2e', 'targetHandle': None, 'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e'}, {'zIndex': 0, 'source': 'start-06a83ae8', 'sourceHandle': 'output', 'target': 'message-b69d9b69', 'targetHandle': 'input', 'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input'}, {'id': 'edge-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}]}
2025-08-03 01:24:52,202 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:24:52,891 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:24:54,789 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:24:54.446296, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:24:54.446296, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 24, 54, 446296), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:24:54,794 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:24:54.446296, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:24:54.446296, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 24, 54, 446296), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:24:54,797 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:24:54.446296, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:24:54.446296, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 24, 54, 446296), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:24:54,974 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:24:54] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:27:06,475 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:06] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:27:07,003 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:27:07,529 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:27:07,701 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:27:07,702 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:27:08,045 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:08] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:27:19,771 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:19] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:27:20,284 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:27:20,284 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:27:20,971 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:27:21,659 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:21.316975, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:21.316975, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 21, 316975), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:21,662 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:21.316975, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:21.316975, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 21, 316975), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:21,665 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:21.316975, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:21.316975, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 21, 316975), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:21,837 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:21] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:27:25,838 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:25] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:27:26,370 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:27:26,551 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:26] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:27:33,010 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:33] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:27:33,535 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:27:33,535 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:27:34,221 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:27:34,910 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:34.566968, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:34.566968, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 34, 566968), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:34,913 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:34.566968, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:34.566968, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 34, 566968), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:34,915 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:34.566968, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:34.566968, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 34, 566968), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:35,093 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:35] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:27:37,959 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:27:37,960 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:27:38,651 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:27:39,336 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:38.995448, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:38.995448, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 38, 995448), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:39,338 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:38.995448, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:38.995448, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 38, 995448), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:39,342 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:38.995448, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:27:38.995448, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 27, 38, 995448), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:27:39,513 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:27:39] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:28:16,418 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:28:16] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:28:16,954 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:28:17,128 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:28:17] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:28:24,059 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:28:24] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:28:24,584 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:28:24,584 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:28:25,281 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:28:25,977 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:28:25.631393, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:28:25.631393, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 28, 25, 631393), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:28:25,981 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:28:25.631393, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:28:25.631393, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 28, 25, 631393), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:28:25,985 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:28:25.631393, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:28:25.631393, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 28, 25, 631393), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:28:26,161 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:28:26] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:28:58,966 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:28:58] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:28:59,568 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:28:59,738 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:28:59] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:29:51,999 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:29:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:29:52,532 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:29:52,710 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:29:52] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:30:01,464 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:30:01] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:30:01,983 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:30:01,984 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:30:02,670 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:30:03,361 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:03.016781, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:03.016781, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 30, 3, 16781), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:30:03,363 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:03.016781, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:03.016781, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 30, 3, 16781), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:30:03,366 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:03.016781, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:03.016781, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 30, 3, 16781), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:30:03,540 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:30:03] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:30:06,327 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:30:06,327 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:30:07,016 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:30:07,706 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:07.362228, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:07.362228, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 30, 7, 362228), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:30:07,707 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:07.362228, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:07.362228, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 30, 7, 362228), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:30:07,709 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:07.362228, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:30:07.362228, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 30, 7, 362228), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:30:07,881 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:30:07] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:31:01,102 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:31:01] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:31:01,626 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:31:01,798 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:31:01] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:31:27,097 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:31:27] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:31:27,629 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:31:27,801 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:31:27] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:31:35,666 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:31:35] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:31:36,404 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:31:36,405 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:31:37,097 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:31:37,789 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:37.446926, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:37.446926, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 31, 37, 446926), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:31:37,792 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:37.446926, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:37.446926, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 31, 37, 446926), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:31:37,794 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:37.446926, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:37.446926, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 31, 37, 446926), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:31:37,965 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:31:37] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:31:40,473 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:31:40,474 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:31:41,161 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:31:41,852 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:41.507845, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:41.507845, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 31, 41, 507845), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:31:41,854 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:41.507845, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:41.507845, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 31, 41, 507845), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:31:41,855 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 256
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:41.507845, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/rey/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (11430, 256, 20605, 20606, , null, null, null, 2025-08-03 04:14:57.797103, 2025-08-03 04:31:41.507845, f, reactflow__edge-message-b69d9b69default-decision-135f3c2e, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 8, 3, 4, 31, 41, 507845), 'flow_edges_id': 11430}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-03 01:31:42,029 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:31:42] "[35m[1mPATCH /api/flow/256 HTTP/1.1[0m" 500 -
2025-08-03 01:33:17,774 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 01:33:17,783 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 01:33:17,795 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-03 01:33:17,795 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 01:33:21,658 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:21] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:33:21,662 - app - WARNING - Authentication error: Signature has expired
2025-08-03 01:33:21,663 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:21] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-08-03 01:33:21,693 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:21] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 01:33:21,694 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:21] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 01:33:21,698 - app - WARNING - Authentication error: Signature has expired
2025-08-03 01:33:21,699 - app - WARNING - Authentication error: Signature has expired
2025-08-03 01:33:21,699 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:21] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 01:33:21,699 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:21] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 01:33:21,724 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:21] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 01:33:21,727 - app - WARNING - Authentication error: Signature has expired
2025-08-03 01:33:21,728 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:21] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-08-03 01:33:25,441 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:25] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 01:33:29,394 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:29] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 01:33:29,534 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:29] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:33:32,546 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:33:33,081 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:33:33,256 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:33:33,257 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:33:33,599 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:33] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:33:39,370 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:39] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:33:39,911 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11431', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11432', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11433', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11434', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11435', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11436', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:33:39,911 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:33:40,606 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:33:42,514 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:33:42,514 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:33:42,685 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:42] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:33:47,098 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:47] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:33:47,621 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:33:48,143 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:33:48,318 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:33:48,319 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:33:48,664 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:48] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:33:54,902 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:54] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:33:55,423 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11437', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11438', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11439', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11440', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11441', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11442', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:33:55,423 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:33:56,124 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:33:57,857 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:33:57,857 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:33:58,027 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:33:58] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:36:58,471 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:36:58] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:36:59,016 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:36:59,543 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:36:59,718 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:36:59,718 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:37:00,064 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:37:00] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:37:37,914 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:37:37] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:37:38,433 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:37:38,606 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:37:38] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:37:48,464 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:37:48] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:37:48,995 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11444', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11445', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11446', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11447', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11448', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11449', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:37:48,995 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:37:49,741 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:37:51,483 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:37:51,483 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:37:51,653 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:37:51] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:37:54,210 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:37:54] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:37:54,731 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:37:55,253 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:37:55,425 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:37:55,425 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:37:55,776 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:37:55] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:39:39,790 - app - WARNING - Authentication error: Missing Authorization Header
2025-08-03 01:39:39,792 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:39:39] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-08-03 01:39:48,600 - app - WARNING - Authentication error: Missing Authorization Header
2025-08-03 01:39:48,600 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:39:48] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-08-03 01:40:17,308 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:40:17] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:40:17,835 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:40:18,006 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:40:18] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:40:45,270 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:40:45] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:40:45,794 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:40:45,965 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:40:45] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:40:51,486 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:40:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:40:52,009 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11450', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11451', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11452', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11453', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11454', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11455', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:40:52,010 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:40:52,712 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:40:54,453 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:40:54,458 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:40:54,639 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:40:54] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:40:57,562 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:40:57] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:40:58,093 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:40:58,617 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:40:58,794 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:40:58,794 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:40:59,136 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:40:59] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:41:06,102 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:41:06] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:41:06,619 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11456', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11457', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11458', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11459', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11460', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11461', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:41:06,620 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:41:07,311 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:41:09,069 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:41:09,070 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:41:09,240 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:41:09] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:41:42,580 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:41:42] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:41:43,106 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}, {'id': 'start-8d64d67b', 'type': 'start', 'position': {'x': 526.0061881188119, 'y': -740.5297029702972}, 'data': {'id': 'start-8d64d67b', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142}, {'id': 'decision-ccbda31d', 'type': 'decision', 'position': {'x': 940.1918316831683, 'y': -455.32920792079216}, 'data': {'id': 'decision-ccbda31d', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': 'f2cd561f-eb45-465e-8cd6-a0dcada73a6f', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': 'e722382d-a848-403e-b4d4-9b033b758f97', 'text': 'Opci√≥n B', 'color': '#e74c3c'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40}, {'id': 'option-decision-ccbda31d-f2cd561f-eb45-465e-8cd6-a0dcada73a6f', 'type': 'option', 'position': {'x': 940.1918316831683, 'y': -355.32920792079216}, 'data': {'sourceNode': 'decision-ccbda31d', 'conditionId': 'f2cd561f-eb45-465e-8cd6-a0dcada73a6f', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db'}, 'width': 320, 'height': 127}, {'id': 'option-decision-ccbda31d-e722382d-a848-403e-b4d4-9b033b758f97', 'type': 'option', 'position': {'x': 940.1918316831683, 'y': -275.32920792079216}, 'data': {'sourceNode': 'decision-ccbda31d', 'conditionId': 'e722382d-a848-403e-b4d4-9b033b758f97', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c'}, 'width': 320, 'height': 127}], 'edges': [{'id': '11456', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11457', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11458', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11459', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11460', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11461', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}, {'id': 'edge-decision-ccbda31d-f2cd561f-eb45-465e-8cd6-a0dcada73a6f', 'source': 'decision-ccbda31d', 'target': 'option-decision-ccbda31d-f2cd561f-eb45-465e-8cd6-a0dcada73a6f', 'sourceHandle': 'output-f2cd561f-eb45-465e-8cd6-a0dcada73a6f', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-ccbda31d-e722382d-a848-403e-b4d4-9b033b758f97', 'source': 'decision-ccbda31d', 'target': 'option-decision-ccbda31d-e722382d-a848-403e-b4d4-9b033b758f97', 'sourceHandle': 'output-e722382d-a848-403e-b4d4-9b033b758f97', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'reactflow__edge-start-8d64d67boutput-decision-ccbda31d', 'source': 'start-8d64d67b', 'target': 'decision-ccbda31d', 'sourceHandle': 'output'}]}
2025-08-03 01:41:43,106 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=11, edges_count=10, name='N/A'
2025-08-03 01:41:43,794 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=11, edges_count=10, name='None'
2025-08-03 01:41:45,347 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:41:45,348 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:41:45,518 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:41:45] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:41:46,758 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:41:47,278 - api.flow_api - INFO - DB query for flows returned 11 items.
2025-08-03 01:41:47,451 - api.flow_api - INFO - DB query for edges returned 10 items.
2025-08-03 01:41:47,451 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:41:47,793 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:41:47] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:01,545 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:01] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:02,063 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}, {'id': 'message-a738de95', 'type': 'message', 'position': {'x': 707.9264645099964, 'y': -483.74114574571314}, 'data': {'id': 'message-a738de95', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101}, {'id': 'end-3d46e4d0', 'type': 'end', 'position': {'x': 903.1472017820521, 'y': -184.809391797878}, 'data': {'id': 'end-3d46e4d0', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 301, 'height': 132}], 'edges': [{'id': '11462', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11463', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11464', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11465', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11466', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11467', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-a738de95default-end-3d46e4d0input', 'source': 'message-a738de95', 'target': 'end-3d46e4d0', 'sourceHandle': 'default', 'targetHandle': 'input'}]}
2025-08-03 01:42:02,063 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=9, edges_count=7, name='N/A'
2025-08-03 01:42:02,755 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=9, edges_count=7, name='None'
2025-08-03 01:42:05,632 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:42:05,806 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:05] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:08,326 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:42:08,327 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:42:08,498 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:08] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:14,607 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:14] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:15,151 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:42:15,681 - api.flow_api - INFO - DB query for flows returned 9 items.
2025-08-03 01:42:15,854 - api.flow_api - INFO - DB query for edges returned 7 items.
2025-08-03 01:42:15,855 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:42:16,199 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:16] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:22,387 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:22] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:22,912 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'end-3d46e4d0', 'label': 'Fin'}, 'id': 'end-3d46e4d0', 'position': {'x': 903.1472017820521, 'y': -184.809391797878}, 'type': 'end', 'width': 301, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-a738de95', 'label': 'Mensaje'}, 'id': 'message-a738de95', 'position': {'x': 707.9264645099964, 'y': -483.74114574571314}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'dragging': False}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11471', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11472', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11473', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11474', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11475', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11476', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-a738de95default-end-3d46e4d0input', 'source': 'message-a738de95', 'target': 'end-3d46e4d0', 'sourceHandle': 'default', 'targetHandle': 'input'}]}
2025-08-03 01:42:22,913 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=9, edges_count=7, name='N/A'
2025-08-03 01:42:23,603 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=9, edges_count=7, name='None'
2025-08-03 01:42:25,362 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:42:25,363 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:42:25,445 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:42:25,534 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:25] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:25,972 - api.flow_api - INFO - DB query for flows returned 9 items.
2025-08-03 01:42:26,144 - api.flow_api - INFO - DB query for edges returned 7 items.
2025-08-03 01:42:26,145 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:42:26,490 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:26] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:49,937 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 01:42:49,947 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 01:42:49,959 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-03 01:42:49,959 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 01:42:53,300 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:42:56,376 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:42:59,336 - api.flow_api - INFO - DB query for flows returned 9 items.
2025-08-03 01:42:59,506 - api.flow_api - INFO - DB query for edges returned 7 items.
2025-08-03 01:42:59,507 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:42:59,850 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:42:59] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:43:08,400 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:43:08] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:43:08,922 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11478', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11479', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11480', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11481', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11482', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11483', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}, {'id': 'reactflow__edge-start-06a83ae8output-message-b69d9b69input', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input'}]}
2025-08-03 01:43:08,922 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:43:09,598 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:43:12,825 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:43:12,825 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:43:12,996 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:43:12] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:43:13,806 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:43:14,317 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:43:14,486 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:43:14,486 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:43:14,824 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:43:14] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:43:53,424 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:43:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:43:53,940 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:43:54,110 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:43:54] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:44:53,035 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:44:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:44:53,550 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:44:53,721 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:44:53] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:45:05,261 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:45:05] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:45:05,785 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 267, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 12, 'y': -621}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 6, 'y': -764}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11484', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11485', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11486', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11487', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11488', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11489', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11491', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}]}
2025-08-03 01:45:05,785 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:45:06,464 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:45:08,344 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:45:08,344 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:45:08,515 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:45:08] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:45:09,634 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:45:10,191 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:45:10,362 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:45:10,363 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:45:10,701 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:45:10] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:46:10,658 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:46:10] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:46:11,172 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 99, 'y': -622}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': True, 'positionAbsolute': {'x': 99, 'y': -622}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 326, 'y': -366}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 326, 'y': -366}, 'dragging': False}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 56, 'y': -881}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 56, 'y': -881}, 'dragging': False}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -296, 'y': -902}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11492', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11493', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11494', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11495', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11496', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11497', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11498', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}]}
2025-08-03 01:46:11,172 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:46:11,850 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:46:14,240 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:46:14,240 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:46:14,410 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:46:14] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:46:17,552 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:46:17] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:46:18,088 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 99, 'y': -622}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 99, 'y': -622}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 326, 'y': -366}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 326, 'y': -366}, 'dragging': False}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 103, 'y': -792}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 103, 'y': -792}, 'dragging': False}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -197, 'y': -957}, 'type': 'start', 'width': 231, 'height': 144, 'selected': True, 'positionAbsolute': {'x': -197, 'y': -957}, 'dragging': False}], 'edges': [{'id': '11492', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11493', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11494', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11495', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11496', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11497', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11498', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2e', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default'}]}
2025-08-03 01:46:18,089 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:46:18,769 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:46:19,621 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:46:19,621 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:46:19,792 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:46:19] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:46:22,883 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:46:22] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:46:23,399 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:46:23,914 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:46:24,084 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:46:24,084 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:46:24,425 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:46:24] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:48:44,856 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:48:44] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:48:45,374 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 39, 'y': -636}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': True, 'positionAbsolute': {'x': 39, 'y': -636}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 326, 'y': -366}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 103, 'y': -792}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -197, 'y': -957}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11499', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11500', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11501', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11502', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11503', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11504', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11505', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2einput', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default', 'targetHandle': 'input'}]}
2025-08-03 01:48:45,374 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:48:46,055 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:48:47,073 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:48:47,244 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:48:47] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:48:48,266 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:48:48,266 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:48:48,440 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:48:48] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:48:54,734 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:48:54] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:48:55,261 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 99, 'y': -622}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -233, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 17, 'y': -337}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 326, 'y': -366}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 91, 'y': -69}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 103, 'y': -792}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -197, 'y': -957}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11499', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11500', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11501', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11502', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11503', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11504', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11505', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': 'reactflow__edge-message-b69d9b69default-decision-135f3c2einput', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default', 'targetHandle': 'input'}]}
2025-08-03 01:48:55,262 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 01:48:55,944 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 01:48:56,627 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 01:48:56,628 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 01:48:56,798 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:48:56] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:48:57,067 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:48:57,587 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:48:57,757 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:48:57,757 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:48:58,097 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:48:58] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:49:01,672 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:49:01] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:49:02,187 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:49:02,357 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:49:02] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:51:31,693 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:51:31] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:51:32,207 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:51:32,378 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:51:32] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:51:40,503 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:51:40] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:51:41,020 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:51:41,191 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:51:41] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:52:41,815 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:52:41] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:52:42,328 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:52:42,499 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:52:42] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:53:13,336 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:53:13] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:53:13,852 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:53:14,023 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:53:14] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:53:20,036 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:53:20] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:53:20,551 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:53:20,724 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:53:20] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:54:37,078 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:54:37] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:54:37,593 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 01:54:38,110 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 01:54:38,280 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 01:54:38,280 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 01:54:38,620 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:54:38] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:54:46,369 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:54:46] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:54:46,883 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:54:47,053 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:54:47] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:55:00,396 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:55:00] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:55:00,911 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:55:01,082 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:55:01] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:56:00,876 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:56:00] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:56:01,398 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:56:01,578 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:56:01] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:56:36,776 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:56:36] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:56:37,292 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:56:37,463 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:56:37] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:56:56,695 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:56:56] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:56:57,207 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:56:57,379 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:56:57] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:57:05,025 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:57:05] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:57:05,539 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:57:05,710 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:57:05] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:57:21,213 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:57:21] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:57:21,727 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:57:21,898 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:57:21] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:57:57,120 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:57:57] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:57:57,635 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:57:57,808 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:57:57] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:59:16,779 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:59:16] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 01:59:17,296 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 01:59:17,467 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 01:59:17] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:00:32,336 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:00:32] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:00:32,850 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:00:33,367 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:00:33,537 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:00:33,538 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:00:33,880 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:00:33] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:02:29,882 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:02:29] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:02:30,405 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:02:30,577 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:02:30] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:03:53,961 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:03:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:03:54,493 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:03:54,664 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:03:54] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:04:40,911 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:04:40] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:04:41,439 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:04:41,612 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:04:41] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:05:53,736 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:05:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:05:54,258 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:05:54,779 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:05:54,951 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:05:54,951 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:05:55,293 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:05:55] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:08:03,686 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:08:03] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:08:04,206 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:08:04,376 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:08:04] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:08:05,815 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:08:05] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 02:08:05,818 - app - WARNING - Authentication error: Signature has expired
2025-08-03 02:08:05,819 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:08:05] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-08-03 02:09:22,102 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:09:22] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 02:09:23,210 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:09:23] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 02:09:23,522 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:09:23] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:09:24,051 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:09:24,224 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:09:24] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:11:08,037 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:11:08] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:11:08,562 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:11:09,081 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:11:09,250 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:11:09,250 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:11:09,590 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:11:09] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:11:26,996 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:11:26] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:11:27,520 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:11:27,693 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:11:27] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:16:29,830 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:16:29] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:16:30,362 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:16:30,879 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:16:31,049 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:16:31,050 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:16:31,390 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:16:31] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:18:55,059 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:18:55] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:18:55,591 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:18:55,764 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:18:55] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:19:46,007 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:19:46] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:19:46,525 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:19:46,696 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:19:46] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:24:12,378 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:24:12] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:24:12,896 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:24:13,414 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:24:13,584 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:24:13,585 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:24:13,932 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:24:13] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:25:05,181 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:25:05] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:25:05,695 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:25:05,864 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:25:05] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:26:40,099 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:26:40] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:26:40,611 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:26:40,781 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:26:40] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:27:20,300 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:27:20] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:27:20,811 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:27:20,980 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:27:20] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:27:38,684 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:27:38] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:27:39,200 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:27:39,371 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:27:39] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:29:07,983 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:29:07] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:29:08,507 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:29:08,677 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:29:08] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:29:44,251 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:29:44] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:29:44,774 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:29:45,289 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:29:45,459 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:29:45,460 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:29:45,801 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:29:45] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:29:55,532 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:29:55] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:29:56,046 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:29:56,216 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:29:56] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:30:59,490 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:30:59] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:31:00,005 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -246.63366336633663, 'y': -338.5148514851485}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -246.63366336633663, 'y': -338.5148514851485}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 89.71287128712868, 'y': -241.56435643564362}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 89.71287128712868, 'y': -241.56435643564362}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 429.0099009900989, 'y': -325.09900990099015}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 429.0099009900989, 'y': -325.09900990099015}, 'dragging': False}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 607.5643564356436, 'y': -15.980198019801975}, 'type': 'end', 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 607.5643564356436, 'y': -15.980198019801975}, 'dragging': False}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 131.7821782178218, 'y': -779.8811881188119}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 131.7821782178218, 'y': -779.8811881188119}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 102.02970297029702, 'y': -615.9405940594058}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 102.02970297029702, 'y': -615.9405940594058}, 'dragging': False}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -130.34653465346534, 'y': -903.980198019802}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': -130.34653465346534, 'y': -903.980198019802}, 'dragging': False}], 'edges': [{'id': '11506', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11507', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11508', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11509', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11510', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11511', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11512', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11513', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default', 'targetHandle': 'input', 'type': 'default', 'animated': True}]}
2025-08-03 02:31:00,006 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 02:31:00,690 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 02:31:03,952 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 02:31:03,952 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 02:31:04,121 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:31:04] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:31:48,832 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:31:48] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:31:49,349 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:31:49,957 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:31:50,129 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:31:50,129 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:31:50,470 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:31:50] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:32:44,276 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:32:44] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:32:44,787 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:32:44,955 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:32:44] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:33:35,136 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:33:35] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:33:35,651 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'Opci√≥n A', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -248.14851485148515, 'y': -347.6039603960396}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -248.14851485148515, 'y': -347.6039603960396}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'Opci√≥n B', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Opci√≥n B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 86.68316831683165, 'y': -208.23762376237633}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 86.68316831683165, 'y': -208.23762376237633}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'Nueva condici√≥n', 'lastUpdated': '2025-08-03T04:14:39.477Z', 'sourceNode': 'decision-135f3c2e', 'text': 'Nueva condici√≥n'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 416.8910891089108, 'y': -334.1881188118812}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 416.8910891089108, 'y': -334.1881188118812}, 'dragging': False}, {'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 603.019801980198, 'y': -26.58415841584157}, 'type': 'end', 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 603.019801980198, 'y': -26.58415841584157}, 'dragging': False}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje'}, 'id': 'message-b69d9b69', 'position': {'x': 131.7821782178218, 'y': -779.8811881188119}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'Opci√≥n A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'Opci√≥n B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'Nueva condici√≥n'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n'}, 'id': 'decision-135f3c2e', 'position': {'x': 102.02970297029702, 'y': -615.9405940594058}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -130.34653465346534, 'y': -903.980198019802}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'id': '11514', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11515', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11516', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11517', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11518', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11519', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11520', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11521', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}]}
2025-08-03 02:33:35,651 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 02:33:36,336 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 02:33:36,916 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:33:37,086 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:33:37] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:33:39,082 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 02:33:39,083 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 02:33:39,253 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:33:39] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:33:44,627 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:33:44] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:33:45,139 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:33:45,658 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:33:45,829 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:33:45,830 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:33:46,169 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:33:46] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:34:31,650 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:34:31] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:34:32,186 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:34:32,357 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:34:32] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:35:12,035 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:35:12] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:35:12,545 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:35:12,714 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:35:12] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:35:40,227 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:35:40] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:35:40,753 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:35:40,923 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:35:40] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:36:15,149 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:36:15] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:36:15,670 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:36:15,839 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:36:15] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:37:39,002 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:37:39] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:37:39,532 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:37:39,703 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:37:39] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:39:16,203 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:39:16] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:39:16,740 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 02:39:17,262 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 02:39:17,434 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 02:39:17,435 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 02:39:17,778 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:39:17] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:39:57,228 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:39:57] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:39:57,749 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:39:57,920 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:39:57] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:42:02,389 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:42:02] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:42:02,903 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:42:03,075 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:42:03] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:42:07,764 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:42:07] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:42:08,280 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:42:08,451 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:42:08] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:42:13,277 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:42:13] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:42:13,796 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:42:13,966 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:42:13] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:42:29,899 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:42:29] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:42:30,416 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:42:30,588 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:42:30] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:43:21,997 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:43:21] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 02:43:22,510 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 02:43:22,681 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 02:43:22] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:06,137 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:06] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:06,139 - app - WARNING - Authentication error: Signature has expired
2025-08-03 03:32:06,139 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:06] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-08-03 03:32:06,218 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:06] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 03:32:06,219 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:06] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 03:32:06,224 - app - WARNING - Authentication error: Signature has expired
2025-08-03 03:32:06,224 - app - WARNING - Authentication error: Signature has expired
2025-08-03 03:32:06,225 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:06] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 03:32:06,225 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:06] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 03:32:06,241 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:06] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 03:32:06,244 - app - WARNING - Authentication error: Signature has expired
2025-08-03 03:32:06,245 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:06] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-08-03 03:32:14,295 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 03:32:14,304 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 03:32:14,314 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-03 03:32:14,314 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 03:32:21,111 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:21] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 03:32:24,826 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:24] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 03:32:24,889 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:24] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:27,878 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 03:32:28,410 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 03:32:28,585 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 03:32:28,585 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 03:32:28,929 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:28] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:34,521 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:34] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:35,047 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:32:35,219 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:35] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:42,750 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:42] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:43,275 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:32:43,448 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:43] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:48,669 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:48] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:32:49,188 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:32:49,361 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:32:49] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:36:51,388 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:36:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:36:51,908 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:36:52,080 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:36:52] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:36:56,515 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:36:56] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:36:57,062 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:36:57,235 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:36:57] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:40:10,936 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:40:10] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:40:11,458 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 03:40:12,000 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 03:40:12,173 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 03:40:12,173 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 03:40:12,517 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:40:12] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:41:17,698 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:41:17] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:41:18,217 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:41:18,386 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:41:18] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:45:54,548 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:45:54] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:45:55,082 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 03:45:55,610 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 03:45:55,784 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 03:45:55,784 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 03:45:56,128 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:45:56] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:48:16,973 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:48:16] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:48:17,494 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:48:17,665 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:48:17] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:50:46,535 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:50:46] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:50:47,049 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:50:47,219 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:50:47] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:50:58,068 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:50:58] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:50:58,580 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 03:50:59,102 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 03:50:59,275 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 03:50:59,275 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 03:50:59,616 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:50:59] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:51:06,236 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:51:06] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:51:06,750 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:51:06,920 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:51:06] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:57:17,184 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:57:17] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:57:17,699 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 03:57:18,215 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 03:57:18,385 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 03:57:18,385 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 03:57:18,730 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:57:18] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:57:23,961 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:57:23] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:57:24,481 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:57:24,653 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:57:24] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:59:11,002 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:59:11] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 03:59:11,523 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 03:59:11,695 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 03:59:11] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:00:22,528 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:00:22] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:00:23,056 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:00:23,227 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:00:23] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:00:32,249 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:00:32] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:00:32,766 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:00:32,938 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:00:32] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:02:49,599 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:02:49] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:02:50,150 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 04:02:50,682 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 04:02:50,857 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 04:02:50,858 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 04:02:51,201 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:02:51] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:04:35,069 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:04:35] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:04:35,594 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:04:35,772 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:04:35] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:07:07,082 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:07:07] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:07:07,595 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:07:07,765 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:07:07] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:09:22,124 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:09:22] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:09:22,641 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 04:09:23,165 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 04:09:23,338 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 04:09:23,338 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 04:09:23,682 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:09:23] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:10:32,134 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:10:32] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:10:32,655 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:10:32,828 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:10:32] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:10:54,989 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:10:54] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:10:55,503 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:10:55,674 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:10:55] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:12:59,114 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:12:59] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:12:59,631 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:12:59,802 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:12:59] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:13:05,324 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:13:05] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:13:05,849 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:13:06,020 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:13:06] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:21:37,470 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:21:37] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:21:37,987 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 04:21:38,507 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 04:21:38,680 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 04:21:38,681 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 04:21:39,024 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:21:39] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:30:11,940 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:30:11] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:30:12,463 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 04:30:12,984 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 04:30:13,156 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 04:30:13,157 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 04:30:13,499 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:30:13] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:33:34,073 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:34] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:33:34,075 - app - WARNING - Authentication error: Signature has expired
2025-08-03 04:33:34,077 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:34] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-08-03 04:33:34,084 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:34] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 04:33:34,085 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:34] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 04:33:34,087 - app - WARNING - Authentication error: Signature has expired
2025-08-03 04:33:34,088 - app - WARNING - Authentication error: Signature has expired
2025-08-03 04:33:34,089 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:34] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 04:33:34,089 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:34] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 04:33:34,097 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:34] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 04:33:34,099 - app - WARNING - Authentication error: Signature has expired
2025-08-03 04:33:34,100 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:34] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-08-03 04:33:36,334 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:36] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 04:33:37,446 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:37] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 04:33:38,003 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:33:38,174 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:33:38] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:34:31,468 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:34:31] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:34:31,986 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 603.019801980198, 'y': -26.58415841584157}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje', 'message': 'Hola, buenas tardes', 'variables': [], 'lastUpdated': '2025-08-03T07:33:54.435Z'}, 'id': 'message-b69d9b69', 'position': {'x': 158.1197807637907, 'y': -791.5867892503537}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 158.1197807637907, 'y': -791.5867892503537}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n', 'isEditing': False, 'question': 'Camino A, B o C\n'}, 'id': 'decision-135f3c2e', 'position': {'x': 127.39183875530406, 'y': -617.8915275813295}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 127.39183875530406, 'y': -617.8915275813295}, 'dragging': False}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -130.34653465346534, 'y': -903.980198019802}, 'type': 'start', 'width': 229, 'height': 142}, {'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'type': 'option', 'position': {'x': -207.47376944837342, 'y': -365.21632248939164}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'A', 'instruction': 'A', 'color': '#3498db', 'lastUpdated': '2025-08-03T07:34:10.752Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -207.47376944837342, 'y': -365.21632248939164}, 'dragging': False}, {'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'type': 'option', 'position': {'x': 110.80890381895327, 'y': -206.2152404526165}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'B', 'instruction': 'B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T07:34:10.752Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': True, 'positionAbsolute': {'x': 110.80890381895327, 'y': -206.2152404526165}, 'dragging': False}, {'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'type': 'option', 'position': {'x': 392.0238401697312, 'y': -360.33898868458266}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'C', 'instruction': 'C', 'color': '#FFA500', 'lastUpdated': '2025-08-03T07:34:10.752Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 392.0238401697312, 'y': -360.33898868458266}, 'dragging': False}], 'edges': [{'id': '11525', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11526', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11527', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11528', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11529', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'edge-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}]}
2025-08-03 04:34:31,986 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 04:34:32,675 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 04:34:35,605 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 04:34:35,605 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 04:34:35,775 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:34:35] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:34:48,799 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:34:48] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:34:49,311 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 603.019801980198, 'y': -26.58415841584157}, 'type': 'end', 'width': 303, 'height': 132}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje', 'message': 'Hola, buenas tardes', 'variables': [], 'lastUpdated': '2025-08-03T07:33:54.435Z'}, 'id': 'message-b69d9b69', 'position': {'x': 158.1197807637907, 'y': -791.5867892503537}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 158.1197807637907, 'y': -791.5867892503537}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'label': 'Decisi√≥n', 'isEditing': False, 'question': 'Camino A, B o C\n'}, 'id': 'decision-135f3c2e', 'position': {'x': 127.39183875530406, 'y': -617.8915275813295}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 127.39183875530406, 'y': -617.8915275813295}, 'dragging': False}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -130.34653465346534, 'y': -903.980198019802}, 'type': 'start', 'width': 229, 'height': 142}, {'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'type': 'option', 'position': {'x': -207.47376944837342, 'y': -365.21632248939164}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'A', 'instruction': 'A', 'color': '#3498db', 'lastUpdated': '2025-08-03T07:34:10.752Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -207.47376944837342, 'y': -365.21632248939164}, 'dragging': False}, {'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'type': 'option', 'position': {'x': 110.80890381895327, 'y': -206.2152404526165}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'B', 'instruction': 'B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T07:34:10.752Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': True, 'positionAbsolute': {'x': 110.80890381895327, 'y': -206.2152404526165}, 'dragging': False}, {'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'type': 'option', 'position': {'x': 392.0238401697312, 'y': -360.33898868458266}, 'data': {'sourceNode': 'decision-135f3c2e', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'C', 'instruction': 'C', 'color': '#FFA500', 'lastUpdated': '2025-08-03T07:34:10.752Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 392.0238401697312, 'y': -360.33898868458266}, 'dragging': False}], 'edges': [{'id': '11525', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11526', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11527', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11528', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11529', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'edge-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}]}
2025-08-03 04:34:49,312 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 04:34:50,067 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 04:34:50,582 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 04:34:50,583 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 04:34:50,753 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:34:50] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:34:57,047 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:34:57] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:34:57,563 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 04:34:58,083 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 04:34:58,255 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 04:34:58,255 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 04:34:58,597 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:34:58] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:36:42,372 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:36:42] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:36:42,884 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:36:43,054 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:36:43] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:36:58,364 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:36:58] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:36:58,883 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:36:59,053 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:36:59] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:39:49,468 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 04:39:49,477 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 04:39:49,488 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-03 04:39:49,489 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 04:39:53,807 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:39:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:39:56,880 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 04:39:59,903 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 04:40:00,075 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 04:40:00,075 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 04:40:00,416 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:40:00] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:40:32,461 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:40:32] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:40:32,984 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 04:40:33,159 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:40:33] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:44:55,426 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:44:55] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:44:55,949 - api.flow_api - INFO - [PATCH /api/flow/256] Received raw data: {'plubotId': '256', 'flowName': 'Luz Cosmica', 'nodes': [{'data': {'id': 'end-a3e615e8', 'label': 'Fin'}, 'id': 'end-a3e615e8', 'position': {'x': 588.1117989337396, 'y': -27.515908606245233}, 'type': 'end', 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 588.1117989337396, 'y': -27.515908606245233}, 'dragging': False}, {'data': {'id': 'message-b69d9b69', 'label': 'Mensaje', 'lastUpdated': '2025-08-03T07:33:54.435Z', 'message': 'Hola, buenas tardes', 'variables': []}, 'id': 'message-b69d9b69', 'position': {'x': 157.18803057338704, 'y': -778.5422865847025}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 157.18803057338704, 'y': -778.5422865847025}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '85989e20-28c8-4194-a16e-36c5128b3c10', 'text': 'A'}, {'color': '#e74c3c', 'id': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'text': 'C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-135f3c2e', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Camino A, B o C\n'}, 'id': 'decision-135f3c2e', 'position': {'x': 127.39183875530406, 'y': -617.8915275813295}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '85989e20-28c8-4194-a16e-36c5128b3c10', 'instruction': 'A', 'lastUpdated': '2025-08-03T07:34:10.752Z', 'sourceNode': 'decision-135f3c2e', 'text': 'A'}, 'id': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'position': {'x': -176.72601316505276, 'y': -354.0353202045478}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -176.72601316505276, 'y': -354.0353202045478}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': 'f292b992-3d27-4fae-a2b6-42816b6d57e7', 'instruction': 'B', 'lastUpdated': '2025-08-03T07:34:10.752Z', 'sourceNode': 'decision-135f3c2e', 'text': 'B'}, 'id': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'position': {'x': 111.74065400935692, 'y': -208.07874083342384}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': 111.74065400935692, 'y': -208.07874083342384}}, {'data': {'color': '#FFA500', 'conditionId': 'condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'instruction': 'C', 'lastUpdated': '2025-08-03T07:34:10.752Z', 'sourceNode': 'decision-135f3c2e', 'text': 'C'}, 'id': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'position': {'x': 388.2968394081166, 'y': -349.1579863997388}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 388.2968394081166, 'y': -349.1579863997388}, 'dragging': False}, {'data': {'id': 'start-06a83ae8', 'label': 'Inicio'}, 'id': 'start-06a83ae8', 'position': {'x': -100.53052856054839, 'y': -911.4341995430312}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': -100.53052856054839, 'y': -911.4341995430312}, 'dragging': False}], 'edges': [{'id': '11530', 'source': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11531', 'source': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11532', 'source': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'target': 'end-a3e615e8', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11533', 'source': 'start-06a83ae8', 'target': 'message-b69d9b69', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11534', 'source': 'message-b69d9b69', 'target': 'decision-135f3c2e', 'sourceHandle': 'default', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11535', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-85989e20-28c8-4194-a16e-36c5128b3c10', 'sourceHandle': 'output-85989e20-28c8-4194-a16e-36c5128b3c10', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11536', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'sourceHandle': 'output-f292b992-3d27-4fae-a2b6-42816b6d57e7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11537', 'source': 'decision-135f3c2e', 'target': 'option-decision-135f3c2e-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'sourceHandle': 'output-condition-23894f7d-0bbb-4639-bef9-616844e820d1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}]}
2025-08-03 04:44:55,950 - api.flow_api - INFO - [PATCH /api/flow/256] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-08-03 04:44:56,637 - api.flow_api - INFO - [update_full_flow - plubot_id=256] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-08-03 04:44:59,713 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 256
2025-08-03 04:44:59,713 - api.flow_api - INFO - Flujo actualizado para plubot 256 por usuario 75
2025-08-03 04:44:59,884 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:44:59] "PATCH /api/flow/256 HTTP/1.1" 200 -
2025-08-03 04:47:11,453 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 04:47:11] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-08-03 05:08:57,647 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:08:57] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-08-03 05:09:10,783 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:10] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:09:11,309 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 05:09:11,828 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 05:09:12,001 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 05:09:12,001 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 05:09:12,343 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:12] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:09:23,290 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:23] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:09:23,818 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:09:23,990 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:23] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:09:28,323 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:28] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-08-03 05:09:41,529 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:41] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 05:09:42,735 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:42] "POST /api/auth/logout HTTP/1.1" 200 -
2025-08-03 05:09:45,545 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:45] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 05:09:46,674 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:46] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 05:09:52,952 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:52] "OPTIONS /api/discord-integrations/ HTTP/1.1" 200 -
2025-08-03 05:09:53,477 - api.discord_integrations_api - ERROR - Error al obtener las integraciones de Discord.
Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/discord_integrations_api.py", line 172, in get_discord_integrations
    integrations = DiscordIntegration.query.filter_by(user_id=user_id).all()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'DiscordIntegration' has no attribute 'query'
2025-08-03 05:09:53,650 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:53] "[35m[1mGET /api/discord-integrations/ HTTP/1.1[0m" 500 -
2025-08-03 05:09:56,102 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:56] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:09:56,626 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:09:56,799 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:09:56] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:10:00,159 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:10:00,333 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:10:00] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:10:14,499 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:10:14] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 05:10:15,707 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:10:15] "POST /api/auth/logout HTTP/1.1" 200 -
2025-08-03 05:11:59,061 - api.auth - INFO - Recibida solicitud para /api/auth/register con m√©todo OPTIONS
2025-08-03 05:11:59,061 - api.auth - INFO - Respondiendo a solicitud OPTIONS para /api/auth/register
2025-08-03 05:11:59,061 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:11:59] "OPTIONS /api/auth/register HTTP/1.1" 200 -
2025-08-03 05:11:59,269 - api.auth - INFO - Recibida solicitud para /api/auth/register con m√©todo POST
2025-08-03 05:12:00,514 - api.auth - INFO - Iniciando env√≠o de email de verificaci√≥n para artistic.limpet.uffo@rapidletter.net
2025-08-03 05:12:05,517 - api.auth - INFO - Correo de verificaci√≥n encolado para env√≠o as√≠ncrono a artistic.limpet.uffo@rapidletter.net
2025-08-03 05:12:05,691 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:12:05] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 201 -
2025-08-03 05:12:16,078 - api.auth - INFO - Correo as√≠ncrono enviado exitosamente a ['artistic.limpet.uffo@rapidletter.net']
2025-08-03 05:12:32,541 - api.auth - ERROR - Error al verificar el email con token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1NDIwODcyMCwianRpIjoiYjQ3MTViNzEtOGM5ZS00ZTRjLWIwMGMtMmFkNmI5ZGVmOTkxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc2IiwibmJmIjoxNzU0MjA4NzIwLCJjc3JmIjoiOGU5YzBjOGUtMzdmNy00ZjQ5LTg5NmUtN2FhMGFkNzkzNTlmIiwiZXhwIjoxNzU0Mjk1MTIwLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.GGqGzglUkNq_7y-4smnGW6vqrskEOv8VT85dC5EuSF
Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/auth.py", line 190, in verify_email
    decoded_token = decode_token(token)
                    ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/utils.py", line 128, in decode_token
    return jwt_manager._decode_jwt_from_config(encoded_token, csrf_value, allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/jwt_manager.py", line 557, in _decode_jwt_from_config
    return _decode_jwt(**kwargs, allow_expired=allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/tokens.py", line 96, in _decode_jwt
    decoded_token = jwt.decode(
                    ^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 222, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 156, in decode_complete
    decoded = api_jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 220, in decode_complete
    self._verify_signature(signing_input, header, signature, key, algorithms)
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 328, in _verify_signature
    raise InvalidSignatureError("Signature verification failed")
jwt.exceptions.InvalidSignatureError: Signature verification failed
2025-08-03 05:12:32,545 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:12:32] "[31m[1mGET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1NDIwODcyMCwianRpIjoiYjQ3MTViNzEtOGM5ZS00ZTRjLWIwMGMtMmFkNmI5ZGVmOTkxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc2IiwibmJmIjoxNzU0MjA4NzIwLCJjc3JmIjoiOGU5YzBjOGUtMzdmNy00ZjQ5LTg5NmUtN2FhMGFkNzkzNTlmIiwiZXhwIjoxNzU0Mjk1MTIwLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.GGqGzglUkNq_7y-4smnGW6vqrskEOv8VT85dC5EuSF HTTP/1.1[0m" 400 -
2025-08-03 05:12:44,525 - api.auth - ERROR - Error al verificar el email con token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1NDIwODcyMCwianRpIjoiYjQ3MTViNzEtOGM5ZS00ZTRjLWIwMGMtMmFkNmI5ZGVmOTkxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc2IiwibmJmIjoxNzU0MjA4NzIwLCJjc3JmIjoiOGU5YzBjOGUtMzdmNy00ZjQ5LTg5NmUtN2FhMGFkNzkzNTlmIiwiZXhwIjoxNzU0Mjk1MTIwLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.GGqGzglUkNq_7y-4smnGW6vqrskEOv8VT85dC5EuSF
Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/auth.py", line 190, in verify_email
    decoded_token = decode_token(token)
                    ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/utils.py", line 128, in decode_token
    return jwt_manager._decode_jwt_from_config(encoded_token, csrf_value, allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/jwt_manager.py", line 557, in _decode_jwt_from_config
    return _decode_jwt(**kwargs, allow_expired=allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/tokens.py", line 96, in _decode_jwt
    decoded_token = jwt.decode(
                    ^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 222, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 156, in decode_complete
    decoded = api_jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 220, in decode_complete
    self._verify_signature(signing_input, header, signature, key, algorithms)
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 328, in _verify_signature
    raise InvalidSignatureError("Signature verification failed")
jwt.exceptions.InvalidSignatureError: Signature verification failed
2025-08-03 05:12:44,527 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:12:44] "[31m[1mGET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1NDIwODcyMCwianRpIjoiYjQ3MTViNzEtOGM5ZS00ZTRjLWIwMGMtMmFkNmI5ZGVmOTkxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc2IiwibmJmIjoxNzU0MjA4NzIwLCJjc3JmIjoiOGU5YzBjOGUtMzdmNy00ZjQ5LTg5NmUtN2FhMGFkNzkzNTlmIiwiZXhwIjoxNzU0Mjk1MTIwLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.GGqGzglUkNq_7y-4smnGW6vqrskEOv8VT85dC5EuSF HTTP/1.1[0m" 400 -
2025-08-03 05:12:44,958 - api.auth - ERROR - Error al verificar el email con token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1NDIwODcyMCwianRpIjoiYjQ3MTViNzEtOGM5ZS00ZTRjLWIwMGMtMmFkNmI5ZGVmOTkxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc2IiwibmJmIjoxNzU0MjA4NzIwLCJjc3JmIjoiOGU5YzBjOGUtMzdmNy00ZjQ5LTg5NmUtN2FhMGFkNzkzNTlmIiwiZXhwIjoxNzU0Mjk1MTIwLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.GGqGzglUkNq_7y-4smnGW6vqrskEOv8VT85dC5EuSF
Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/auth.py", line 190, in verify_email
    decoded_token = decode_token(token)
                    ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/utils.py", line 128, in decode_token
    return jwt_manager._decode_jwt_from_config(encoded_token, csrf_value, allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/jwt_manager.py", line 557, in _decode_jwt_from_config
    return _decode_jwt(**kwargs, allow_expired=allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/tokens.py", line 96, in _decode_jwt
    decoded_token = jwt.decode(
                    ^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 222, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 156, in decode_complete
    decoded = api_jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 220, in decode_complete
    self._verify_signature(signing_input, header, signature, key, algorithms)
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 328, in _verify_signature
    raise InvalidSignatureError("Signature verification failed")
jwt.exceptions.InvalidSignatureError: Signature verification failed
2025-08-03 05:12:44,959 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:12:44] "[31m[1mGET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1NDIwODcyMCwianRpIjoiYjQ3MTViNzEtOGM5ZS00ZTRjLWIwMGMtMmFkNmI5ZGVmOTkxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc2IiwibmJmIjoxNzU0MjA4NzIwLCJjc3JmIjoiOGU5YzBjOGUtMzdmNy00ZjQ5LTg5NmUtN2FhMGFkNzkzNTlmIiwiZXhwIjoxNzU0Mjk1MTIwLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.GGqGzglUkNq_7y-4smnGW6vqrskEOv8VT85dC5EuSF HTTP/1.1[0m" 400 -
2025-08-03 05:12:56,392 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:12:56] "GET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1NDIwODcyMCwianRpIjoiYjQ3MTViNzEtOGM5ZS00ZTRjLWIwMGMtMmFkNmI5ZGVmOTkxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc2IiwibmJmIjoxNzU0MjA4NzIwLCJjc3JmIjoiOGU5YzBjOGUtMzdmNy00ZjQ5LTg5NmUtN2FhMGFkNzkzNTlmIiwiZXhwIjoxNzU0Mjk1MTIwLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.GGqGzglUkNq_7y-4smnGW6vqrskEOv8VT85dC5EuSFI HTTP/1.1" 200 -
2025-08-03 05:13:03,170 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:13:03] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 05:13:04,270 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:13:04] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 05:13:34,909 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:13:34] "OPTIONS /api/plubots/create HTTP/1.1" 200 -
2025-08-03 05:13:36,557 - services.grok_service - INFO - Successfully connected to Redis for caching.
2025-08-03 05:13:39,704 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:13:39] "POST /api/plubots/create HTTP/1.1" 200 -
2025-08-03 05:13:39,718 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:13:39] "OPTIONS /api/auth/profile HTTP/1.1" 200 -
2025-08-03 05:13:41,091 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:13:41] "GET /api/auth/profile HTTP/1.1" 200 -
2025-08-03 05:13:42,351 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:13:42] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:13:42,875 - api.flow_api - INFO - Cache miss for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 05:13:43,388 - api.flow_api - INFO - DB query for flows returned 0 items.
2025-08-03 05:13:43,570 - api.flow_api - INFO - DB query for edges returned 0 items.
2025-08-03 05:13:43,571 - api.flow_api - INFO - Flow data for plubot 257 stored in cache with key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 05:13:43,914 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:13:43] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:16:15,501 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:16:15] "OPTIONS /api/byte-assistant HTTP/1.1" 200 -
2025-08-03 05:16:16,872 - api.grok - INFO - Respuesta de Byte (API): ¬°Hola! Soy Byte, tu aliado en flujos de chatbots. ¬øEn qu√© puedo ayudarte con tus circuitos de conversaci√≥n hoy?
2025-08-03 05:16:16,873 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:16:16] "POST /api/byte-assistant HTTP/1.1" 200 -
2025-08-03 05:18:15,502 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:18:15] "OPTIONS /api/byte-assistant HTTP/1.1" 200 -
2025-08-03 05:18:20,813 - api.grok - INFO - Respuesta de Byte (API): ¬°Hey, qu√© tal! Estoy listo para ayudarte con tus flujos de chatbot. ¬øQu√© circuito de conversaci√≥n quieres optimizar o problema necesitas resolver hoy?
2025-08-03 05:18:20,814 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:18:20] "POST /api/byte-assistant HTTP/1.1" 200 -
2025-08-03 05:18:43,486 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:18:43] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-08-03 05:18:43,487 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:18:43] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-08-03 05:18:43,491 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:18:43] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-08-03 05:18:43,492 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:18:43] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-08-03 05:18:44,319 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:18:44] "OPTIONS /api/whatsapp/status/123 HTTP/1.1" 200 -
2025-08-03 05:19:00,037 - services.whatsapp_service - ERROR - Error en la comunicaci√≥n con la API de WhatsApp
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-08-03 05:19:00,050 - services.whatsapp_service - ERROR - Error al verificar el estado de WhatsApp para 123
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-08-03 05:19:00,052 - app - ERROR - Exception on /api/whatsapp/status/123 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/api/whatsapp_api.py", line 75, in get_status
    status = service.get_connection_status(plubot_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rey/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 104, in get_connection_status
    connection = WhatsAppConnection.query.filter_by(plubot_id=plubot_id).first()
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WhatsAppConnection' has no attribute 'query'
2025-08-03 05:19:00,227 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:19:00] "[35m[1mGET /api/whatsapp/status/123 HTTP/1.1[0m" 500 -
2025-08-03 05:22:24,964 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:22:24] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:22:25,497 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 05:22:26,017 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 05:22:26,188 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 05:22:26,188 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 05:22:26,532 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:22:26] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 05:22:29,613 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:22:29] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:22:30,129 - api.flow_api - INFO - Cache miss for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 05:22:30,650 - api.flow_api - INFO - DB query for flows returned 0 items.
2025-08-03 05:22:30,821 - api.flow_api - INFO - DB query for edges returned 0 items.
2025-08-03 05:22:30,821 - api.flow_api - INFO - Flow data for plubot 257 stored in cache with key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 05:22:31,163 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:22:31] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:24:57,066 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:24:57] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:24:57,589 - api.flow_api - INFO - [PATCH /api/flow/257] Received raw data: {'plubotId': '257', 'flowName': 'Cachito', 'nodes': [{'id': 'start-304486e3', 'type': 'start', 'position': {'x': -166.62908219997834, 'y': -964.0798252638451}, 'data': {'id': 'start-304486e3', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142}, {'id': 'message-c223ae87', 'type': 'message', 'position': {'x': 154.93609112174946, 'y': -777.6858531171799}, 'data': {'id': 'message-c223ae87', 'label': 'Mensaje', 'message': 'Hola, buenas tardes', 'variables': [], 'lastUpdated': '2025-08-03T08:23:39.708Z'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 154.93609112174946, 'y': -777.6858531171799}, 'dragging': False}, {'id': 'decision-31d8d049', 'type': 'decision', 'position': {'x': 191.93031460124024, 'y': -643.9375066913285}, 'data': {'id': 'decision-31d8d049', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C', 'condition': '', 'color': '#FFA500'}, {'id': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D', 'condition': '', 'color': '#ADFF2F'}, {'id': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E', 'condition': '', 'color': '#00CED1'}], 'isEditing': False, 'question': 'Caminos A, B, C, D y E\n'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 191.93031460124024, 'y': -643.9375066913285}, 'dragging': False}, {'id': 'aiNodePro-a6f2cfae', 'type': 'aiNodePro', 'position': {'x': -148.1319704602329, 'y': 113.02121988902184}, 'data': {'id': 'aiNodePro-a6f2cfae', 'label': 'IA Pro', 'nodeType': 'aiNodePro'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 300, 'height': 283, 'selected': True, 'positionAbsolute': {'x': -148.1319704602329, 'y': 113.02121988902184}, 'dragging': False}, {'id': 'end-58b8f48a', 'type': 'end', 'position': {'x': 827.9463874986399, 'y': 278.0723707975193}, 'data': {'id': 'end-58b8f48a', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 827.9463874986399, 'y': 278.0723707975193}, 'dragging': False}, {'id': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'type': 'option', 'position': {'x': -276.7668809161137, 'y': -382.75475247524764}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -276.7668809161137, 'y': -382.75475247524764}, 'dragging': False}, {'id': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'type': 'option', 'position': {'x': -36.72686416059199, 'y': -244.73784180176267}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -36.72686416059199, 'y': -244.73784180176267}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'type': 'option', 'position': {'x': 183.39318610597303, 'y': -95.33809313458832}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C', 'instruction': 'C', 'color': '#FFA500', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 183.39318610597303, 'y': -95.33809313458832}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'type': 'option', 'position': {'x': 447.6217335980849, 'y': -250.42926079860737}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D', 'instruction': 'D', 'color': '#ADFF2F', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 447.6217335980849, 'y': -250.42926079860737}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'type': 'option', 'position': {'x': 773.0330353062777, 'y': -388.4461714720924}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E', 'instruction': 'E', 'color': '#00CED1', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 773.0330353062777, 'y': -388.4461714720924}, 'dragging': False}], 'edges': [{'id': 'reactflow__edge-start-304486e3output-message-c223ae87input', 'source': 'start-304486e3', 'target': 'message-c223ae87', 'sourceHandle': 'output', 'targetHandle': 'input'}, {'id': 'reactflow__edge-message-c223ae87default-decision-31d8d049input', 'source': 'message-c223ae87', 'target': 'decision-31d8d049', 'sourceHandle': 'default', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595source-aiNodePro-a6f2cfaeinput', 'source': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'target': 'aiNodePro-a6f2cfae', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-aiNodePro-a6f2cfaeoutput-end-58b8f48ainput', 'source': 'aiNodePro-a6f2cfae', 'target': 'end-58b8f48a', 'sourceHandle': 'output', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6esource-end-58b8f48ainput', 'source': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'edge-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'sourceHandle': 'output-66d164d0-14bd-4251-8025-908d921c1595', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'sourceHandle': 'output-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'sourceHandle': 'output-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'sourceHandle': 'output-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#ADFF2F', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'sourceHandle': 'output-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#00CED1', 'strokeWidth': 2}}]}
2025-08-03 05:24:57,591 - api.flow_api - INFO - [PATCH /api/flow/257] Extracted: nodes_count=10, edges_count=13, name='N/A'
2025-08-03 05:24:58,272 - api.flow_api - INFO - [update_full_flow - plubot_id=257] Starting update. Received: nodes_count=10, edges_count=13, name='None'
2025-08-03 05:24:59,442 - api.flow_api - INFO - [PATCH /api/flow/257] Received raw data: {'plubotId': '257', 'flowName': 'Cachito', 'nodes': [{'id': 'start-304486e3', 'type': 'start', 'position': {'x': -166.62908219997834, 'y': -964.0798252638451}, 'data': {'id': 'start-304486e3', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142}, {'id': 'message-c223ae87', 'type': 'message', 'position': {'x': 154.93609112174946, 'y': -777.6858531171799}, 'data': {'id': 'message-c223ae87', 'label': 'Mensaje', 'message': 'Hola, buenas tardes', 'variables': [], 'lastUpdated': '2025-08-03T08:23:39.708Z'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 154.93609112174946, 'y': -777.6858531171799}, 'dragging': False}, {'id': 'decision-31d8d049', 'type': 'decision', 'position': {'x': 191.93031460124024, 'y': -643.9375066913285}, 'data': {'id': 'decision-31d8d049', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C', 'condition': '', 'color': '#FFA500'}, {'id': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D', 'condition': '', 'color': '#ADFF2F'}, {'id': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E', 'condition': '', 'color': '#00CED1'}], 'isEditing': False, 'question': 'Caminos A, B, C, D y E\n'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 191.93031460124024, 'y': -643.9375066913285}, 'dragging': False}, {'id': 'aiNodePro-a6f2cfae', 'type': 'aiNodePro', 'position': {'x': -148.1319704602329, 'y': 113.02121988902184}, 'data': {'id': 'aiNodePro-a6f2cfae', 'label': 'IA Pro', 'nodeType': 'aiNodePro'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 300, 'height': 283, 'selected': True, 'positionAbsolute': {'x': -148.1319704602329, 'y': 113.02121988902184}, 'dragging': False}, {'id': 'end-58b8f48a', 'type': 'end', 'position': {'x': 827.9463874986399, 'y': 278.0723707975193}, 'data': {'id': 'end-58b8f48a', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 827.9463874986399, 'y': 278.0723707975193}, 'dragging': False}, {'id': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'type': 'option', 'position': {'x': -276.7668809161137, 'y': -382.75475247524764}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -276.7668809161137, 'y': -382.75475247524764}, 'dragging': False}, {'id': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'type': 'option', 'position': {'x': -36.72686416059199, 'y': -244.73784180176267}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -36.72686416059199, 'y': -244.73784180176267}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'type': 'option', 'position': {'x': 183.39318610597303, 'y': -95.33809313458832}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C', 'instruction': 'C', 'color': '#FFA500', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 183.39318610597303, 'y': -95.33809313458832}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'type': 'option', 'position': {'x': 447.6217335980849, 'y': -250.42926079860737}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D', 'instruction': 'D', 'color': '#ADFF2F', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 447.6217335980849, 'y': -250.42926079860737}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'type': 'option', 'position': {'x': 773.0330353062777, 'y': -388.4461714720924}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E', 'instruction': 'E', 'color': '#00CED1', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 773.0330353062777, 'y': -388.4461714720924}, 'dragging': False}], 'edges': [{'id': 'reactflow__edge-start-304486e3output-message-c223ae87input', 'source': 'start-304486e3', 'target': 'message-c223ae87', 'sourceHandle': 'output', 'targetHandle': 'input'}, {'id': 'reactflow__edge-message-c223ae87default-decision-31d8d049input', 'source': 'message-c223ae87', 'target': 'decision-31d8d049', 'sourceHandle': 'default', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595source-aiNodePro-a6f2cfaeinput', 'source': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'target': 'aiNodePro-a6f2cfae', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-aiNodePro-a6f2cfaeoutput-end-58b8f48ainput', 'source': 'aiNodePro-a6f2cfae', 'target': 'end-58b8f48a', 'sourceHandle': 'output', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6esource-end-58b8f48ainput', 'source': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'edge-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'sourceHandle': 'output-66d164d0-14bd-4251-8025-908d921c1595', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'sourceHandle': 'output-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'sourceHandle': 'output-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'sourceHandle': 'output-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#ADFF2F', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'sourceHandle': 'output-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#00CED1', 'strokeWidth': 2}}]}
2025-08-03 05:24:59,443 - api.flow_api - INFO - [PATCH /api/flow/257] Extracted: nodes_count=10, edges_count=13, name='N/A'
2025-08-03 05:25:00,759 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 257
2025-08-03 05:25:00,759 - api.flow_api - INFO - Flujo actualizado para plubot 257 por usuario 75
2025-08-03 05:25:00,930 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:25:00] "PATCH /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:25:01,120 - api.flow_api - INFO - [update_full_flow - plubot_id=257] Starting update. Received: nodes_count=10, edges_count=13, name='None'
2025-08-03 05:25:01,649 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 257
2025-08-03 05:25:01,649 - api.flow_api - INFO - Flujo actualizado para plubot 257 por usuario 75
2025-08-03 05:25:01,821 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:25:01] "PATCH /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:28:00,135 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:28:00] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:28:00,653 - api.flow_api - INFO - [PATCH /api/flow/257] Received raw data: {'plubotId': '257', 'flowName': 'Cachito', 'nodes': [{'id': 'start-304486e3', 'type': 'start', 'position': {'x': -166.62908219997834, 'y': -964.0798252638451}, 'data': {'id': 'start-304486e3', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142}, {'id': 'message-c223ae87', 'type': 'message', 'position': {'x': 154.93609112174946, 'y': -777.6858531171799}, 'data': {'id': 'message-c223ae87', 'label': 'Mensaje', 'message': 'Hola, buenas tardes', 'variables': [], 'lastUpdated': '2025-08-03T08:23:39.708Z'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 154.93609112174946, 'y': -777.6858531171799}, 'dragging': False}, {'id': 'decision-31d8d049', 'type': 'decision', 'position': {'x': 191.93031460124024, 'y': -643.9375066913285}, 'data': {'id': 'decision-31d8d049', 'label': 'Decisi√≥n', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'Opci√≥n A', 'color': '#3498db'}, {'id': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'Opci√≥n B', 'color': '#e74c3c'}, {'id': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C', 'condition': '', 'color': '#FFA500'}, {'id': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D', 'condition': '', 'color': '#ADFF2F'}, {'id': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E', 'condition': '', 'color': '#00CED1'}], 'isEditing': False, 'question': 'Caminos A, B, C, D y E\n'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 191.93031460124024, 'y': -643.9375066913285}, 'dragging': False}, {'id': 'aiNodePro-a6f2cfae', 'type': 'aiNodePro', 'position': {'x': -148.1319704602329, 'y': 113.02121988902184}, 'data': {'id': 'aiNodePro-a6f2cfae', 'label': 'IA Pro', 'nodeType': 'aiNodePro'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 300, 'height': 283, 'selected': True, 'positionAbsolute': {'x': -148.1319704602329, 'y': 113.02121988902184}, 'dragging': False}, {'id': 'end-58b8f48a', 'type': 'end', 'position': {'x': 827.9463874986399, 'y': 278.0723707975193}, 'data': {'id': 'end-58b8f48a', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 827.9463874986399, 'y': 278.0723707975193}, 'dragging': False}, {'id': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'type': 'option', 'position': {'x': -276.7668809161137, 'y': -382.75475247524764}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'Opci√≥n A', 'instruction': 'Opci√≥n A', 'color': '#3498db', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -276.7668809161137, 'y': -382.75475247524764}, 'dragging': False}, {'id': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'type': 'option', 'position': {'x': -36.72686416059199, 'y': -244.73784180176267}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'Opci√≥n B', 'instruction': 'Opci√≥n B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -36.72686416059199, 'y': -244.73784180176267}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'type': 'option', 'position': {'x': 183.39318610597303, 'y': -95.33809313458832}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C', 'instruction': 'C', 'color': '#FFA500', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 183.39318610597303, 'y': -95.33809313458832}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'type': 'option', 'position': {'x': 447.6217335980849, 'y': -250.42926079860737}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D', 'instruction': 'D', 'color': '#ADFF2F', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 447.6217335980849, 'y': -250.42926079860737}, 'dragging': False}, {'id': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'type': 'option', 'position': {'x': 773.0330353062777, 'y': -388.4461714720924}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E', 'instruction': 'E', 'color': '#00CED1', 'lastUpdated': '2025-08-03T08:24:10.858Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 773.0330353062777, 'y': -388.4461714720924}, 'dragging': False}], 'edges': [{'id': 'reactflow__edge-start-304486e3output-message-c223ae87input', 'source': 'start-304486e3', 'target': 'message-c223ae87', 'sourceHandle': 'output', 'targetHandle': 'input'}, {'id': 'reactflow__edge-message-c223ae87default-decision-31d8d049input', 'source': 'message-c223ae87', 'target': 'decision-31d8d049', 'sourceHandle': 'default', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595source-aiNodePro-a6f2cfaeinput', 'source': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'target': 'aiNodePro-a6f2cfae', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-aiNodePro-a6f2cfaeoutput-end-58b8f48ainput', 'source': 'aiNodePro-a6f2cfae', 'target': 'end-58b8f48a', 'sourceHandle': 'output', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6esource-end-58b8f48ainput', 'source': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'reactflow__edge-option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371source-end-58b8f48ainput', 'source': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input'}, {'id': 'edge-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'sourceHandle': 'output-66d164d0-14bd-4251-8025-908d921c1595', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'sourceHandle': 'output-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'sourceHandle': 'output-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'sourceHandle': 'output-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#ADFF2F', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'sourceHandle': 'output-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#00CED1', 'strokeWidth': 2}}]}
2025-08-03 05:28:00,653 - api.flow_api - INFO - [PATCH /api/flow/257] Extracted: nodes_count=10, edges_count=13, name='N/A'
2025-08-03 05:28:01,339 - api.flow_api - INFO - [update_full_flow - plubot_id=257] Starting update. Received: nodes_count=10, edges_count=13, name='None'
2025-08-03 05:28:01,853 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 257
2025-08-03 05:28:01,853 - api.flow_api - INFO - Flujo actualizado para plubot 257 por usuario 75
2025-08-03 05:28:02,025 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:28:02] "PATCH /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:28:02,649 - api.flow_api - INFO - Cache miss for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 05:28:03,333 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-08-03 05:28:03,507 - api.flow_api - INFO - DB query for edges returned 13 items.
2025-08-03 05:28:03,507 - api.flow_api - INFO - Flow data for plubot 257 stored in cache with key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 05:28:03,851 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:28:03] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:30:01,260 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:30:01] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:30:11,987 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Claro! ¬øEn qu√© tema o √°rea necesitas ayuda? Estoy aqu√≠ para ayudarte con cualquier duda o consulta que tengas. üòä
2025-08-03 05:30:11,988 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:30:11] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:30:15,898 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:30:15] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:30:20,958 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Claro que s√≠! Como experto en marketing, puedo ayudarte con estrategias, campa√±as, an√°lisis de mercado, branding, marketing digital, redes sociales, SEO, SEM, contenido, y mucho m√°s. ¬øEn qu√© √°rea espec√≠fica necesitas ayuda o tienes alguna pregunta? Por ejemplo:

- ¬øQuieres desarrollar una estrategia de marketing para tu negocio?
- ¬øNecesitas consejos sobre c√≥mo mejorar tu presencia en redes sociales?
- ¬øBuscas optimizar tu sitio web para motores de b√∫squeda (SEO)?
- ¬øTienes dudas sobre publicidad pagada (Google Ads, Meta Ads, etc.)?
- ¬øQuieres saber c√≥mo conectar mejor con tu audiencia?

Dime qu√© tienes en mente y te dar√© las mejores recomendaciones basadas en las tendencias actuales y las necesidades de tu proyecto. ¬°Estoy aqu√≠ para ayudarte a alcanzar tus objetivos! üöÄ
2025-08-03 05:30:20,960 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:30:20] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:31:17,338 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:31:17] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:31:20,810 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarle. Mi nombre es [tu nombre o simplemente "soy su asesor"], y estoy aqu√≠ para ayudarle con cualquier necesidad o consulta que tenga en materia de marketing. ¬øEn qu√© puedo asistirle hoy?
2025-08-03 05:31:20,811 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:31:20] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:31:35,654 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:31:35] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:31:36,177 - api.flow_api - INFO - Cache hit for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:31:36,349 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:31:36] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:31:44,923 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:31:44] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:31:46,774 - api.grok - INFO - Respuesta de Grok para AiNode: Estimado cliente, 

Ha sido un placer atenderle. Quedo a su disposici√≥n para cualquier consulta o necesidad que pueda surgir en el futuro. Gracias por su confianza. 

Atentamente,  
[Tu nombre]
2025-08-03 05:31:46,774 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:31:46] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:32:17,308 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:32:17] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:32:17,829 - api.flow_api - INFO - [PATCH /api/flow/257] Received raw data: {'plubotId': '257', 'flowName': 'Cachito', 'nodes': [{'data': {'id': 'start-304486e3', 'label': 'Inicio'}, 'id': 'start-304486e3', 'position': {'x': -166.62908219997834, 'y': -964.0798252638451}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'id': 'message-c223ae87', 'label': 'Mensaje', 'lastUpdated': '2025-08-03T08:23:39.708Z', 'message': 'Hola, buenas tardes', 'variables': []}, 'id': 'message-c223ae87', 'position': {'x': 154.93609112174946, 'y': -777.6858531171799}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'conditions': [{'color': '#3498db', 'id': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'A'}, {'color': '#e74c3c', 'id': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C'}, {'color': '#ADFF2F', 'condition': '', 'id': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D'}, {'color': '#00CED1', 'condition': '', 'id': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-31d8d049', 'isEditing': True, 'label': 'Decisi√≥n', 'question': 'Caminos A, B, C, D y E\n'}, 'id': 'decision-31d8d049', 'position': {'x': 191.93031460124024, 'y': -643.9375066913285}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': True, 'dragging': False}, {'data': {'id': 'aiNodePro-a6f2cfae', 'label': 'IA Pro', 'nodeType': 'aiNodePro'}, 'id': 'aiNodePro-a6f2cfae', 'position': {'x': -160.75959893919014, 'y': 162.38376757949092}, 'type': 'aiNodePro', 'width': 300, 'height': 89, 'selected': False, 'positionAbsolute': {'x': -160.75959893919014, 'y': 162.38376757949092}, 'dragging': False}, {'data': {'id': 'end-58b8f48a', 'label': 'Fin'}, 'id': 'end-58b8f48a', 'position': {'x': 827.9463874986399, 'y': 278.0723707975193}, 'type': 'end', 'width': 303, 'height': 132}, {'id': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'type': 'option', 'position': {'x': -308.06968539875976, 'y': -443.9375066913285}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'A', 'instruction': 'A', 'color': '#3498db', 'lastUpdated': '2025-08-03T08:32:15.595Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'type': 'option', 'position': {'x': -58.06968539875976, 'y': -443.9375066913285}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'B', 'instruction': 'B', 'color': '#e74c3c', 'lastUpdated': '2025-08-03T08:32:15.595Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'type': 'option', 'position': {'x': 191.93031460124024, 'y': -443.9375066913285}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C', 'instruction': 'C', 'color': '#FFA500', 'lastUpdated': '2025-08-03T08:32:15.595Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'type': 'option', 'position': {'x': 441.93031460124024, 'y': -443.9375066913285}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D', 'instruction': 'D', 'color': '#ADFF2F', 'lastUpdated': '2025-08-03T08:32:15.595Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}, {'id': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'type': 'option', 'position': {'x': 691.9303146012403, 'y': -443.9375066913285}, 'data': {'sourceNode': 'decision-31d8d049', 'conditionId': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E', 'instruction': 'E', 'color': '#00CED1', 'lastUpdated': '2025-08-03T08:32:15.595Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 127}], 'edges': [{'id': '11546', 'source': 'start-304486e3', 'target': 'message-c223ae87', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11547', 'source': 'message-c223ae87', 'target': 'decision-31d8d049', 'sourceHandle': 'default', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11549', 'source': 'aiNodePro-a6f2cfae', 'target': 'end-58b8f48a', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11548', 'source': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'target': 'aiNodePro-a6f2cfae', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11550', 'source': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11551', 'source': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11552', 'source': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11553', 'source': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': 'edge-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'sourceHandle': 'output-66d164d0-14bd-4251-8025-908d921c1595', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'sourceHandle': 'output-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'sourceHandle': 'output-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'sourceHandle': 'output-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#ADFF2F', 'strokeWidth': 2}}, {'id': 'edge-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'sourceHandle': 'output-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#00CED1', 'strokeWidth': 2}}]}
2025-08-03 05:32:17,830 - api.flow_api - INFO - [PATCH /api/flow/257] Extracted: nodes_count=10, edges_count=13, name='N/A'
2025-08-03 05:32:18,515 - api.flow_api - INFO - [update_full_flow - plubot_id=257] Starting update. Received: nodes_count=10, edges_count=13, name='None'
2025-08-03 05:32:21,789 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 257
2025-08-03 05:32:21,789 - api.flow_api - INFO - Flujo actualizado para plubot 257 por usuario 75
2025-08-03 05:32:21,962 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:32:21] "PATCH /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:33:39,301 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:33:39] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:33:39,815 - api.flow_api - INFO - Cache miss for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 05:33:40,516 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-08-03 05:33:40,690 - api.flow_api - INFO - DB query for edges returned 13 items.
2025-08-03 05:33:40,691 - api.flow_api - INFO - Flow data for plubot 257 stored in cache with key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 05:33:41,035 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:33:41] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:33:50,328 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:33:50] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:33:52,314 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarle. Mi nombre es [tu nombre o simplemente "soy un asistente"], y estoy aqu√≠ para ayudarle con cualquier consulta o necesidad relacionada con marketing. ¬øEn qu√© puedo asistirle hoy?
2025-08-03 05:33:52,315 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:33:52] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:35:02,804 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:35:02] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:35:03,323 - api.flow_api - INFO - Cache hit for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:35:03,494 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:35:03] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:35:15,333 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:35:15] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:35:17,001 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Hola, qu√© gusto verte por aqu√≠! üòä ¬øEn qu√© puedo ayudarte hoy? Estoy a tu disposici√≥n con todo el cari√±o para resolver tus dudas o charlar de lo que quieras.
2025-08-03 05:35:17,001 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:35:17] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:36:14,343 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:36:14] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:36:14,856 - api.flow_api - INFO - Cache hit for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:36:15,027 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:36:15] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:36:28,758 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:36:28] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:36:29,835 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarte. ¬øEn qu√© puedo ayudarte hoy?
2025-08-03 05:36:29,836 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:36:29] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:37:46,320 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:37:46] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:37:46,838 - api.flow_api - INFO - Cache hit for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:37:47,007 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:37:47] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:37:58,416 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:37:58] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:37:59,512 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Hola! ¬øC√≥mo est√°s? Espero que est√©s teniendo un d√≠a incre√≠ble. üòä
2025-08-03 05:37:59,513 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:37:59] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:39:27,887 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:39:27] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:39:28,405 - api.flow_api - INFO - Cache miss for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 05:39:29,076 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-08-03 05:39:29,247 - api.flow_api - INFO - DB query for edges returned 13 items.
2025-08-03 05:39:29,248 - api.flow_api - INFO - Flow data for plubot 257 stored in cache with key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 05:39:29,588 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:39:29] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:39:35,365 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:39:35] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:39:35,574 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarte. ¬øEn qu√© puedo ayudarte hoy?
2025-08-03 05:39:35,575 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:39:35] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:41:25,007 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:41:25] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:41:25,523 - api.flow_api - INFO - Cache hit for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:41:25,697 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:41:25] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:41:32,913 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:41:32] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:41:33,129 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarte. ¬øEn qu√© puedo ayudarte hoy?
2025-08-03 05:41:33,130 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:41:33] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:42:43,107 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:42:43] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:42:43,628 - api.flow_api - INFO - Cache hit for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:42:43,799 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:42:43] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:42:51,480 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:42:51] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:42:51,690 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarte. ¬øEn qu√© puedo ayudarte hoy?
2025-08-03 05:42:51,691 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:42:51] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:44:25,276 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:44:25] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:44:25,823 - api.flow_api - INFO - Cache hit for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:44:25,997 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:44:25] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:44:32,660 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:44:32] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:44:32,870 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarte. ¬øEn qu√© puedo ayudarte hoy?
2025-08-03 05:44:32,870 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:44:32] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:45:45,312 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:45:45] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:45:45,872 - api.flow_api - INFO - Cache miss for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 05:45:46,555 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-08-03 05:45:46,727 - api.flow_api - INFO - DB query for edges returned 13 items.
2025-08-03 05:45:46,728 - api.flow_api - INFO - Flow data for plubot 257 stored in cache with key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 05:45:47,071 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:45:47] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:46:12,911 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:46:12] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:46:13,423 - api.flow_api - INFO - Cache hit for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 05:46:13,596 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:46:13] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:46:22,461 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:46:22] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:46:22,671 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarte. ¬øEn qu√© puedo ayudarte hoy?
2025-08-03 05:46:22,671 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:46:22] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:46:26,861 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:46:26] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:46:27,075 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarte. ¬øEn qu√© puedo ayudarte hoy?
2025-08-03 05:46:27,076 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:46:27] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:47:46,497 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:47:46] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:47:46,707 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Buenos d√≠as/tardes! Es un placer saludarte. ¬øEn qu√© puedo ayudarte hoy?
2025-08-03 05:47:46,708 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:47:46] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:47:59,683 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:47:59] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:48:00,724 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Hasta luego! ¬°Viva la libertad, carajo!
2025-08-03 05:48:00,725 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:48:00] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:48:09,611 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:48:09] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:48:09,824 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Hasta luego! ¬°Viva la libertad, carajo!
2025-08-03 05:48:09,825 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:48:09] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:49:04,052 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:49:04] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:49:06,568 - api.grok - INFO - Respuesta de Grok para AiNode: Claro, si el cliente te pide 10 pantalones, puedes enviarle el siguiente mensaje:

"Hola, gracias por tu pedido de 10 pantalones. Aqu√≠ te comparto el enlace de pago para que puedas realizar la transacci√≥n de manera segura: www.mercadopago.com. Una vez que confirmemos el pago, procederemos con el env√≠o. ¬°Quedo atenta a cualquier duda!" 

Aseg√∫rate de que el enlace sea el correcto y est√© personalizado con los datos de tu cuenta de Mercado Pago para evitar inconvenientes.
2025-08-03 05:49:06,568 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:49:06] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:49:12,936 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:49:12] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:49:13,148 - api.grok - INFO - Respuesta de Grok para AiNode: Claro, si el cliente te pide 10 pantalones, puedes enviarle el siguiente mensaje:

"Hola, gracias por tu pedido de 10 pantalones. Aqu√≠ te comparto el enlace de pago para que puedas realizar la transacci√≥n de manera segura: www.mercadopago.com. Una vez que confirmemos el pago, procederemos con el env√≠o. ¬°Quedo atenta a cualquier duda!" 

Aseg√∫rate de que el enlace sea el correcto y est√© personalizado con los datos de tu cuenta de Mercado Pago para evitar inconvenientes.
2025-08-03 05:49:13,149 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:49:13] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:49:43,085 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:49:43] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:49:44,606 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Muchas gracias por tu compra! Apreciamos mucho tu confianza. Aqu√≠ tienes el enlace de pago para completar la transacci√≥n: www.mercadopago.com. 

Gracias nuevamente por elegirnos, ¬°esperamos verte pronto! Un cordial saludo.
2025-08-03 05:49:44,607 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:49:44] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:49:50,016 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:49:50] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:49:50,229 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Muchas gracias por tu compra! Apreciamos mucho tu confianza. Aqu√≠ tienes el enlace de pago para completar la transacci√≥n: www.mercadopago.com. 

Gracias nuevamente por elegirnos, ¬°esperamos verte pronto! Un cordial saludo.
2025-08-03 05:49:50,230 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:49:50] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:50:09,504 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:50:09] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:50:10,022 - api.flow_api - INFO - [PATCH /api/flow/257] Received raw data: {'plubotId': '257', 'flowName': 'Cachito', 'nodes': [{'data': {'id': 'start-304486e3', 'label': 'Inicio'}, 'id': 'start-304486e3', 'position': {'x': -166.62908219997834, 'y': -964.0798252638451}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'id': 'message-c223ae87', 'label': 'Mensaje', 'lastUpdated': '2025-08-03T08:23:39.708Z', 'message': 'Hola, buenas tardes', 'variables': []}, 'id': 'message-c223ae87', 'position': {'x': 193.41842531993464, 'y': -826.0991122697354}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 193.41842531993464, 'y': -826.0991122697354}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '66d164d0-14bd-4251-8025-908d921c1595', 'text': 'A'}, {'color': '#e74c3c', 'id': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'text': 'B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'text': 'C'}, {'color': '#ADFF2F', 'condition': '', 'id': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'text': 'D'}, {'color': '#00CED1', 'condition': '', 'id': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'text': 'E'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-31d8d049', 'isEditing': False, 'label': 'Decisi√≥n', 'question': 'Caminos A, B, C, D y E\n'}, 'id': 'decision-31d8d049', 'position': {'x': 191.93031460124024, 'y': -643.9375066913285}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-58b8f48a', 'label': 'Fin'}, 'id': 'end-58b8f48a', 'position': {'x': 834.8748859661762, 'y': 265.601073555954}, 'type': 'end', 'width': 303, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 834.8748859661762, 'y': 265.601073555954}, 'dragging': False}, {'data': {'id': 'aiNodePro-a6f2cfae', 'label': 'IA Pro', 'nodeType': 'aiNodePro', 'promptTemplate': 'Agradece por la compra, el enlace de pago es  www.mercadopago.com, agradece y despidete', 'prompt': 'Agradece por la compra, el enlace de pago es  www.mercadopago.com, agradece y despidete', 'lastResponse': '¬°Muchas gracias por tu compra! Apreciamos mucho tu confianza. Aqu√≠ tienes el enlace de pago para completar la transacci√≥n: www.mercadopago.com. \n\nGracias nuevamente por elegirnos, ¬°esperamos verte pronto! Un cordial saludo.', 'lastPrompt': 'Agradece por la compra, el enlace de pago es  www.mercadopago.com, agradece y despidete', 'isCollapsed': True}, 'id': 'aiNodePro-a6f2cfae', 'position': {'x': -226.4427555937282, 'y': 153.1833858247332}, 'type': 'aiNodePro', 'width': 300, 'height': 89, 'selected': True, 'dragging': False, 'positionAbsolute': {'x': -226.4427555937282, 'y': 153.1833858247332}}, {'data': {'color': '#3498db', 'conditionId': '66d164d0-14bd-4251-8025-908d921c1595', 'instruction': 'A', 'lastUpdated': '2025-08-03T08:32:15.595Z', 'sourceNode': 'decision-31d8d049', 'text': 'A'}, 'id': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'position': {'x': -461.88235137806544, 'y': -126.61227687816634}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -461.88235137806544, 'y': -126.61227687816634}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '7069ef29-5adf-45a2-850c-cdd85b313e6e', 'instruction': 'B', 'lastUpdated': '2025-08-03T08:32:15.595Z', 'sourceNode': 'decision-31d8d049', 'text': 'B'}, 'id': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'position': {'x': -124.58327068710813, 'y': -123.8408774911518}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': -124.58327068710813, 'y': -123.8408774911518}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'instruction': 'C', 'lastUpdated': '2025-08-03T08:32:15.595Z', 'sourceNode': 'decision-31d8d049', 'text': 'C'}, 'id': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'position': {'x': 176.6876179726604, 'y': -259.6394474548631}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 176.6876179726604, 'y': -259.6394474548631}, 'dragging': False}, {'data': {'color': '#ADFF2F', 'conditionId': 'condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'instruction': 'D', 'lastUpdated': '2025-08-03T08:32:15.595Z', 'sourceNode': 'decision-31d8d049', 'text': 'D'}, 'id': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'position': {'x': 480.7299060194434, 'y': -118.29807871712278}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 480.7299060194434, 'y': -118.29807871712278}, 'dragging': False}, {'data': {'color': '#00CED1', 'conditionId': 'condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'instruction': 'E', 'lastUpdated': '2025-08-03T08:32:15.595Z', 'sourceNode': 'decision-31d8d049', 'text': 'E'}, 'id': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'position': {'x': 820.8003860974153, 'y': -108.59818086257198}, 'type': 'option', 'width': 320, 'height': 127, 'selected': False, 'positionAbsolute': {'x': 820.8003860974153, 'y': -108.59818086257198}, 'dragging': False}], 'edges': [{'id': '11559', 'source': 'start-304486e3', 'target': 'message-c223ae87', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11560', 'source': 'message-c223ae87', 'target': 'decision-31d8d049', 'sourceHandle': 'default', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11554', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'sourceHandle': 'output-66d164d0-14bd-4251-8025-908d921c1595', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11555', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'sourceHandle': 'output-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11556', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'sourceHandle': 'output-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11557', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'sourceHandle': 'output-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11558', 'source': 'decision-31d8d049', 'target': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'sourceHandle': 'output-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True}, {'id': '11561', 'source': 'aiNodePro-a6f2cfae', 'target': 'end-58b8f48a', 'sourceHandle': 'output', 'targetHandle': 'input', 'type': 'default', 'animated': True}, {'id': '11562', 'source': 'option-decision-31d8d049-66d164d0-14bd-4251-8025-908d921c1595', 'target': 'aiNodePro-a6f2cfae', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11563', 'source': 'option-decision-31d8d049-7069ef29-5adf-45a2-850c-cdd85b313e6e', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11564', 'source': 'option-decision-31d8d049-condition-ca9c9620-698d-4e85-9671-4cb15fe53261', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11565', 'source': 'option-decision-31d8d049-condition-a40c65ab-539f-4bb8-ab75-5a4146cfbdb2', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}, {'id': '11566', 'source': 'option-decision-31d8d049-condition-5c7bf70d-6c54-4ea9-a3dc-2264d79b7371', 'target': 'end-58b8f48a', 'sourceHandle': 'source', 'targetHandle': 'input', 'type': 'eliteEdge', 'animated': True}]}
2025-08-03 05:50:10,023 - api.flow_api - INFO - [PATCH /api/flow/257] Extracted: nodes_count=10, edges_count=13, name='N/A'
2025-08-03 05:50:10,711 - api.flow_api - INFO - [update_full_flow - plubot_id=257] Starting update. Received: nodes_count=10, edges_count=13, name='None'
2025-08-03 05:50:15,165 - services.cache_service - INFO - Cach√© de flujo invalidada para plubot: 257
2025-08-03 05:50:15,166 - api.flow_api - INFO - Flujo actualizado para plubot 257 por usuario 75
2025-08-03 05:50:15,335 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:50:15] "PATCH /api/flow/257 HTTP/1.1" 200 -
2025-08-03 05:50:16,595 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:50:16] "OPTIONS /api/ai-node HTTP/1.1" 200 -
2025-08-03 05:50:16,807 - api.grok - INFO - Respuesta de Grok para AiNode: ¬°Muchas gracias por tu compra! Apreciamos mucho tu confianza. Aqu√≠ tienes el enlace de pago para completar la transacci√≥n: www.mercadopago.com. 

Gracias nuevamente por elegirnos, ¬°esperamos verte pronto! Un cordial saludo.
2025-08-03 05:50:16,808 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 05:50:16] "POST /api/ai-node HTTP/1.1" 200 -
2025-08-03 06:15:21,401 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:21] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 06:15:21,406 - app - WARNING - Authentication error: Signature has expired
2025-08-03 06:15:21,407 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:21] "[31m[1mGET /api/flow/257 HTTP/1.1[0m" 401 -
2025-08-03 06:15:21,413 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:21] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 06:15:21,414 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:21] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 06:15:21,417 - app - WARNING - Authentication error: Signature has expired
2025-08-03 06:15:21,417 - app - WARNING - Authentication error: Signature has expired
2025-08-03 06:15:21,418 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:21] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 06:15:21,418 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:21] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 06:15:21,425 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:21] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 06:15:21,428 - app - WARNING - Authentication error: Signature has expired
2025-08-03 06:15:21,428 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:21] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-08-03 06:15:42,639 - app - ERROR - Exception on /api/auth/login [OPTIONS]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1295, in __inner
    self.limiter._check_request_limit(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1169, in _check_request_limit
    raise e
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1150, in _check_request_limit
    self.__evaluate_limits(endpoint, all_limits)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1087, in __evaluate_limits
    if not method(lim.limit, *args, **kwargs):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/strategies.py", line 157, in hit
    self.storage.incr(
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5640, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5849, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5833, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 622, in execute_command
    return self._execute_command(*args, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 633, in _execute_command
    return conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 92, in call_with_retry
    raise error
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 87, in call_with_retry
    return do()
           ^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 634, in <lambda>
    lambda: self._send_command_parse_response(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 605, in _send_command_parse_response
    return self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 652, in parse_response
    response = connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/connection.py", line 644, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 25, in _read_response
    raw = self._buffer.readline()
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 115, in readline
    self._read_from_socket()
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 68, in _read_from_socket
    raise ConnectionError(SERVER_CLOSED_CONNECTION_ERROR)
redis.exceptions.ConnectionError: Connection closed by server.
2025-08-03 06:15:42,649 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:42] "[35m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 500 -
2025-08-03 06:15:47,500 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:15:47] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 06:15:58,089 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 06:15:58,097 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 06:15:58,106 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-03 06:15:58,106 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 06:16:14,320 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:16:14] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 06:16:17,999 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:16:17] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 06:16:18,053 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:16:18] "OPTIONS /api/flow/257 HTTP/1.1" 200 -
2025-08-03 06:16:21,092 - api.flow_api - INFO - Cache miss for key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 06:16:21,786 - api.flow_api - INFO - DB query for flows returned 10 items.
2025-08-03 06:16:21,964 - api.flow_api - INFO - DB query for edges returned 13 items.
2025-08-03 06:16:21,965 - api.flow_api - INFO - Flow data for plubot 257 stored in cache with key flow:257:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 06:16:22,310 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 06:16:22] "GET /api/flow/257 HTTP/1.1" 200 -
2025-08-03 23:26:09,906 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 23:26:09,913 - root - INFO - Sistema de logging configurado correctamente
2025-08-03 23:26:09,931 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-03 23:26:09,931 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-03 23:26:26,445 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:26] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:26:26,448 - app - WARNING - Authentication error: Signature has expired
2025-08-03 23:26:26,449 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:26] "[31m[1mGET /api/flow/256 HTTP/1.1[0m" 401 -
2025-08-03 23:26:26,457 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:26] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 23:26:26,459 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:26] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-08-03 23:26:26,462 - app - WARNING - Authentication error: Signature has expired
2025-08-03 23:26:26,462 - app - WARNING - Authentication error: Signature has expired
2025-08-03 23:26:26,463 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:26] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 23:26:26,463 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:26] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-08-03 23:26:26,472 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:26] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 23:26:26,475 - app - WARNING - Authentication error: Signature has expired
2025-08-03 23:26:26,476 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:26] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-08-03 23:26:29,714 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:29] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 23:26:33,394 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:33] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 23:26:33,427 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:33] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:26:36,429 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 23:26:36,958 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 23:26:37,136 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 23:26:37,136 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 23:26:37,479 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:37] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:26:51,842 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:51] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:26:52,365 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:26:52,537 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:26:52] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:36:38,505 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:36:38] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:36:39,045 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 23:36:39,567 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 23:36:39,739 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 23:36:39,739 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 23:36:40,163 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:36:40] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:37:02,720 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:37:02] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:37:03,245 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:37:03,418 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:37:03] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:37:59,597 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:37:59] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:38:00,123 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:38:00,295 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:38:00] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:39:21,860 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:39:21] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:39:22,384 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:39:22,556 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:39:22] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:42:43,257 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:42:43] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:42:43,771 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 23:42:44,296 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 23:42:44,472 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 23:42:44,472 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 23:42:44,815 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:42:44] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:44:02,024 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:44:02] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-08-03 23:44:03,254 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:44:03] "POST /api/auth/logout HTTP/1.1" 200 -
2025-08-03 23:44:07,132 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:44:07] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-08-03 23:44:08,237 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:44:08] "POST /api/auth/login HTTP/1.1" 200 -
2025-08-03 23:44:08,315 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:44:08] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:44:08,838 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:44:09,010 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:44:09] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:45:12,968 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:45:12] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:45:13,547 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:45:13,718 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:45:13] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:49:59,723 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:49:59] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:50:00,246 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 23:50:00,766 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 23:50:00,937 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 23:50:00,938 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 23:50:01,286 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:50:01] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:50:30,075 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:50:30] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:50:30,604 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:50:30,777 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:50:30] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:50:38,624 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:50:38] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:50:39,149 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:50:39,323 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:50:39] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:54:53,676 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:54:53] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:54:54,207 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:54:54,379 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:54:54] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:56:05,605 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:56:05] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:56:06,136 - api.flow_api - INFO - Cache miss for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-08-03 23:56:06,668 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-08-03 23:56:06,841 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-08-03 23:56:06,841 - api.flow_api - INFO - Flow data for plubot 256 stored in cache with key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-08-03 23:56:07,187 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:56:07] "GET /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:56:19,450 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:56:19] "OPTIONS /api/flow/256 HTTP/1.1" 200 -
2025-08-03 23:56:20,049 - api.flow_api - INFO - Cache hit for key flow:256:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-08-03 23:56:20,222 - werkzeug - INFO - 127.0.0.1 - - [03/Aug/2025 23:56:20] "GET /api/flow/256 HTTP/1.1" 200 -
