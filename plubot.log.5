2025-07-23 23:44:09,772 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:09.433281, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:09.433281, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 9, 433281), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:09,777 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:09.433281, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:09.433281, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 9, 433281), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:09,779 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:09.433281, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:09.433281, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 9, 433281), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:09,952 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:09] "[35m[1mPATCH /api/flow/252 HTTP/1.1[0m" 500 -
2025-07-23 23:44:10,206 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 122}], 'edges': [{'zIndex': 0, 'source': 'message-bba9c837', 'sourceHandle': 'default', 'target': 'decision-290a2fc8', 'targetHandle': None, 'id': 'reactflow__edge-message-bba9c837default-decision-290a2fc8'}]}
2025-07-23 23:44:10,207 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=1, name='N/A'
2025-07-23 23:44:10,900 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=1, name='None'
2025-07-23 23:44:11,495 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 122}], 'edges': [{'zIndex': 0, 'source': 'message-bba9c837', 'sourceHandle': 'default', 'target': 'decision-290a2fc8', 'targetHandle': None, 'id': 'reactflow__edge-message-bba9c837default-decision-290a2fc8'}]}
2025-07-23 23:44:11,496 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=1, name='N/A'
2025-07-23 23:44:11,596 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:11.24844, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:11.24844, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 11, 248440), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:11,598 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:11.24844, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:11.24844, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 11, 248440), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:11,600 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:11.24844, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:11.24844, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 11, 248440), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:15,561 - root - INFO - Sistema de logging configurado correctamente
2025-07-23 23:44:15,569 - root - INFO - Sistema de logging configurado correctamente
2025-07-23 23:44:15,579 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-23 23:44:15,579 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-23 23:44:15,797 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:15] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:19,017 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 122}], 'edges': [{'zIndex': 0, 'source': 'message-bba9c837', 'sourceHandle': 'default', 'target': 'decision-290a2fc8', 'targetHandle': None, 'id': 'reactflow__edge-message-bba9c837default-decision-290a2fc8'}]}
2025-07-23 23:44:19,017 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 122}], 'edges': [{'zIndex': 0, 'source': 'message-bba9c837', 'sourceHandle': 'default', 'target': 'decision-290a2fc8', 'targetHandle': None, 'id': 'reactflow__edge-message-bba9c837default-decision-290a2fc8'}]}
2025-07-23 23:44:19,018 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=1, name='N/A'
2025-07-23 23:44:19,018 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=1, name='N/A'
2025-07-23 23:44:19,605 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-23 23:44:21,202 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Cargando nombre...', 'nodes': [], 'edges': [], 'viewport': {'x': 0, 'y': 0, 'zoom': 1}}
2025-07-23 23:44:21,203 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=0, edges_count=0, name='N/A'
2025-07-23 23:44:21,240 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:21] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:22,066 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Cargando nombre...', 'nodes': [], 'edges': [], 'viewport': {'x': 0, 'y': 0, 'zoom': 1}}
2025-07-23 23:44:22,067 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=0, edges_count=0, name='N/A'
2025-07-23 23:44:22,265 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=1, name='None'
2025-07-23 23:44:22,303 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=1, name='None'
2025-07-23 23:44:22,850 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-23 23:44:22,947 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.609869, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.609869, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 22, 609869), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:22,958 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.609869, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.609869, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 22, 609869), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:22,961 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.609869, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.609869, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 22, 609869), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:23,029 - api.flow_api - INFO - DB query for edges returned 1 items.
2025-07-23 23:44:23,029 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-23 23:44:23,073 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Cargando nombre...', 'nodes': [], 'edges': [], 'viewport': {'x': 0, 'y': 0, 'zoom': 1}}
2025-07-23 23:44:23,073 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=0, edges_count=0, name='N/A'
2025-07-23 23:44:23,375 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:23] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:23,399 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.652122, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.652122, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 22, 652122), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:23,401 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.652122, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.652122, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 22, 652122), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:23,403 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.652122, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10573, 252, 20401, 20404, , null, null, null, 2025-07-24 02:43:17.851572, 2025-07-24 02:44:22.652122, f, reactflow__edge-message-bba9c837default-decision-290a2fc8, default, null, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, target_handle=%(target_handle)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'target_handle': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 22, 652122), 'flow_edges_id': 10573}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:23,516 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:23] "[35m[1mPATCH /api/flow/252 HTTP/1.1[0m" 500 -
2025-07-23 23:44:23,548 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=0, edges_count=0, name='None'
2025-07-23 23:44:23,577 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:23] "[35m[1mPATCH /api/flow/252 HTTP/1.1[0m" 500 -
2025-07-23 23:44:23,753 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=0, edges_count=0, name='None'
2025-07-23 23:44:24,068 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=0, edges_count=0, name='None'
2025-07-23 23:44:24,598 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Cargando nombre...', 'nodes': [], 'edges': [], 'viewport': {'x': 0, 'y': 0, 'zoom': 1}}
2025-07-23 23:44:24,598 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=0, edges_count=0, name='N/A'
2025-07-23 23:44:25,061 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 122}], 'edges': [{'animated': True, 'id': '10573', 'label': '', 'source': 'message-bba9c837', 'target': 'decision-290a2fc8', 'type': 'eliteEdge'}]}
2025-07-23 23:44:25,062 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=1, name='N/A'
2025-07-23 23:44:25,298 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=0, edges_count=0, name='None'
2025-07-23 23:44:25,753 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=1, name='None'
2025-07-23 23:44:29,759 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Cargando nombre...', 'nodes': [], 'edges': [], 'viewport': {'x': 0, 'y': 0, 'zoom': 1}}
2025-07-23 23:44:29,760 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=0, edges_count=0, name='N/A'
2025-07-23 23:44:30,242 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:30,243 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:30,413 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20401) is not present in table "flows".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20401) is not present in table "flows".

[SQL: INSERT INTO flow_edges (chatbot_id, source_flow_id, target_flow_id, condition, label, edge_type, frontend_id, source_handle, target_handle, animated, edge_metadata, created_at, updated_at, is_deleted) VALUES (%(chatbot_id)s, %(source_flow_id)s, %(target_flow_id)s, %(condition)s, %(label)s, %(edge_type)s, %(frontend_id)s, %(source_handle)s, %(target_handle)s, %(animated)s, %(edge_metadata)s, %(created_at)s, %(updated_at)s, %(is_deleted)s) RETURNING flow_edges.id]
[parameters: {'chatbot_id': 252, 'source_flow_id': 20401, 'target_flow_id': 20404, 'condition': '', 'label': '', 'edge_type': 'eliteEdge', 'frontend_id': '10573', 'source_handle': '', 'target_handle': '', 'animated': True, 'edge_metadata': 'null', 'created_at': datetime.datetime(2025, 7, 24, 2, 44, 26, 490120), 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 26, 490130), 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:30,414 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:30] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:30,417 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20401) is not present in table "flows".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20401) is not present in table "flows".

[SQL: INSERT INTO flow_edges (chatbot_id, source_flow_id, target_flow_id, condition, label, edge_type, frontend_id, source_handle, target_handle, animated, edge_metadata, created_at, updated_at, is_deleted) VALUES (%(chatbot_id)s, %(source_flow_id)s, %(target_flow_id)s, %(condition)s, %(label)s, %(edge_type)s, %(frontend_id)s, %(source_handle)s, %(target_handle)s, %(animated)s, %(edge_metadata)s, %(created_at)s, %(updated_at)s, %(is_deleted)s) RETURNING flow_edges.id]
[parameters: {'chatbot_id': 252, 'source_flow_id': 20401, 'target_flow_id': 20404, 'condition': '', 'label': '', 'edge_type': 'eliteEdge', 'frontend_id': '10573', 'source_handle': '', 'target_handle': '', 'animated': True, 'edge_metadata': 'null', 'created_at': datetime.datetime(2025, 7, 24, 2, 44, 26, 490120), 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 26, 490130), 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:30,422 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20401) is not present in table "flows".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20401) is not present in table "flows".

[SQL: INSERT INTO flow_edges (chatbot_id, source_flow_id, target_flow_id, condition, label, edge_type, frontend_id, source_handle, target_handle, animated, edge_metadata, created_at, updated_at, is_deleted) VALUES (%(chatbot_id)s, %(source_flow_id)s, %(target_flow_id)s, %(condition)s, %(label)s, %(edge_type)s, %(frontend_id)s, %(source_handle)s, %(target_handle)s, %(animated)s, %(edge_metadata)s, %(created_at)s, %(updated_at)s, %(is_deleted)s) RETURNING flow_edges.id]
[parameters: {'chatbot_id': 252, 'source_flow_id': 20401, 'target_flow_id': 20404, 'condition': '', 'label': '', 'edge_type': 'eliteEdge', 'frontend_id': '10573', 'source_handle': '', 'target_handle': '', 'animated': True, 'edge_metadata': 'null', 'created_at': datetime.datetime(2025, 7, 24, 2, 44, 26, 490120), 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 26, 490130), 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:30,597 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:30] "[35m[1mPATCH /api/flow/252 HTTP/1.1[0m" 500 -
2025-07-23 23:44:30,600 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:30] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:30,602 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:30] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:30,938 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 122}], 'edges': [{'animated': True, 'id': '10573', 'label': '', 'source': 'message-bba9c837', 'target': 'decision-290a2fc8', 'type': 'eliteEdge'}]}
2025-07-23 23:44:30,940 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=1, name='N/A'
2025-07-23 23:44:31,203 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 122}], 'edges': [{'animated': True, 'id': '10573', 'label': '', 'source': 'message-bba9c837', 'target': 'decision-290a2fc8', 'type': 'eliteEdge'}]}
2025-07-23 23:44:31,204 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=1, name='N/A'
2025-07-23 23:44:31,394 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=0, edges_count=0, name='None'
2025-07-23 23:44:31,643 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=1, name='None'
2025-07-23 23:44:31,890 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=1, name='None'
2025-07-23 23:44:31,914 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:31,914 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:32,087 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:32] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:32,605 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 122}], 'edges': [{'animated': True, 'id': '10573', 'label': '', 'source': 'message-bba9c837', 'target': 'decision-290a2fc8', 'type': 'eliteEdge'}]}
2025-07-23 23:44:32,606 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=1, name='N/A'
2025-07-23 23:44:33,325 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=1, name='None'
2025-07-23 23:44:33,804 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:33,804 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:33,932 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:33,932 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:33,977 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:33] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:33,981 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:33] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-23 23:44:34,105 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:34] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:35,195 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:35] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-23 23:44:35,249 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:35,249 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:35,440 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:35] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:35,829 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:35,830 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:36,001 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:36,001 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:36,002 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:36] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:36,173 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:36] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:36,694 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:36,694 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:36,865 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:36] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:37,434 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:37] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-23 23:44:38,545 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:38] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-23 23:44:40,343 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:40] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-23 23:44:41,452 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:41] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-23 23:44:45,361 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:45] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:45,882 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-23 23:44:46,383 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:46] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:46,411 - api.flow_api - INFO - DB query for flows returned 21 items.
2025-07-23 23:44:46,905 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Cargando nombre...', 'nodes': [], 'edges': []}
2025-07-23 23:44:46,905 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=0, edges_count=0, name='N/A'
2025-07-23 23:44:46,977 - api.flow_api - INFO - DB query for edges returned 0 items.
2025-07-23 23:44:46,977 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-23 23:44:47,322 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:47] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:47,593 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=0, edges_count=0, name='None'
2025-07-23 23:44:49,723 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}], 'edges': []}
2025-07-23 23:44:49,724 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=21, edges_count=0, name='N/A'
2025-07-23 23:44:49,984 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}], 'edges': []}
2025-07-23 23:44:49,987 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=21, edges_count=0, name='N/A'
2025-07-23 23:44:50,425 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=21, edges_count=0, name='None'
2025-07-23 23:44:50,687 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=21, edges_count=0, name='None'
2025-07-23 23:44:51,208 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:51,209 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:51,282 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}], 'edges': [{'zIndex': 0, 'source': 'start-e005d67f', 'sourceHandle': 'output', 'target': 'message-bba9c837', 'targetHandle': 'default', 'id': 'reactflow__edge-start-e005d67foutput-message-bba9c837default'}]}
2025-07-23 23:44:51,283 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=21, edges_count=1, name='N/A'
2025-07-23 23:44:51,384 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:51] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:51,737 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:51,737 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:51,910 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:51] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:52,355 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=21, edges_count=1, name='None'
2025-07-23 23:44:52,882 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:52,883 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:52,930 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:52] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:53,053 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20430) is not present in table "flows".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20430) is not present in table "flows".

[SQL: INSERT INTO flow_edges (chatbot_id, source_flow_id, target_flow_id, condition, label, edge_type, frontend_id, source_handle, target_handle, animated, edge_metadata, created_at, updated_at, is_deleted) VALUES (%(chatbot_id)s, %(source_flow_id)s, %(target_flow_id)s, %(condition)s, %(label)s, %(edge_type)s, %(frontend_id)s, %(source_handle)s, %(target_handle)s, %(animated)s, %(edge_metadata)s, %(created_at)s, %(updated_at)s, %(is_deleted)s) RETURNING flow_edges.id]
[parameters: {'chatbot_id': 252, 'source_flow_id': 20430, 'target_flow_id': 20431, 'condition': '', 'label': None, 'edge_type': 'default', 'frontend_id': 'reactflow__edge-start-e005d67foutput-message-bba9c837default', 'source_handle': 'output', 'target_handle': 'default', 'animated': True, 'edge_metadata': 'null', 'created_at': datetime.datetime(2025, 7, 24, 2, 44, 52, 703829), 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 52, 703838), 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:53,056 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20430) is not present in table "flows".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20430) is not present in table "flows".

[SQL: INSERT INTO flow_edges (chatbot_id, source_flow_id, target_flow_id, condition, label, edge_type, frontend_id, source_handle, target_handle, animated, edge_metadata, created_at, updated_at, is_deleted) VALUES (%(chatbot_id)s, %(source_flow_id)s, %(target_flow_id)s, %(condition)s, %(label)s, %(edge_type)s, %(frontend_id)s, %(source_handle)s, %(target_handle)s, %(animated)s, %(edge_metadata)s, %(created_at)s, %(updated_at)s, %(is_deleted)s) RETURNING flow_edges.id]
[parameters: {'chatbot_id': 252, 'source_flow_id': 20430, 'target_flow_id': 20431, 'condition': '', 'label': None, 'edge_type': 'default', 'frontend_id': 'reactflow__edge-start-e005d67foutput-message-bba9c837default', 'source_handle': 'output', 'target_handle': 'default', 'animated': True, 'edge_metadata': 'null', 'created_at': datetime.datetime(2025, 7, 24, 2, 44, 52, 703829), 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 52, 703838), 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:53,058 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:53] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:53,059 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20430) is not present in table "flows".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "flow_edges" violates foreign key constraint "flow_edges_source_flow_id_fkey"
DETALLE:  Key (source_flow_id)=(20430) is not present in table "flows".

[SQL: INSERT INTO flow_edges (chatbot_id, source_flow_id, target_flow_id, condition, label, edge_type, frontend_id, source_handle, target_handle, animated, edge_metadata, created_at, updated_at, is_deleted) VALUES (%(chatbot_id)s, %(source_flow_id)s, %(target_flow_id)s, %(condition)s, %(label)s, %(edge_type)s, %(frontend_id)s, %(source_handle)s, %(target_handle)s, %(animated)s, %(edge_metadata)s, %(created_at)s, %(updated_at)s, %(is_deleted)s) RETURNING flow_edges.id]
[parameters: {'chatbot_id': 252, 'source_flow_id': 20430, 'target_flow_id': 20431, 'condition': '', 'label': None, 'edge_type': 'default', 'frontend_id': 'reactflow__edge-start-e005d67foutput-message-bba9c837default', 'source_handle': 'output', 'target_handle': 'default', 'animated': True, 'edge_metadata': 'null', 'created_at': datetime.datetime(2025, 7, 24, 2, 44, 52, 703829), 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 52, 703838), 'is_deleted': False}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:53,450 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}], 'edges': [{'zIndex': 0, 'source': 'start-e005d67f', 'sourceHandle': 'output', 'target': 'message-bba9c837', 'targetHandle': 'default', 'id': 'reactflow__edge-start-e005d67foutput-message-bba9c837default'}, {'zIndex': 0, 'source': 'message-bba9c837', 'sourceHandle': 'default', 'target': 'decision-290a2fc8', 'targetHandle': None, 'id': 'reactflow__edge-message-bba9c837default-decision-290a2fc8'}]}
2025-07-23 23:44:53,452 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=21, edges_count=2, name='N/A'
2025-07-23 23:44:53,625 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:53] "[35m[1mPATCH /api/flow/252 HTTP/1.1[0m" 500 -
2025-07-23 23:44:54,165 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=21, edges_count=2, name='None'
2025-07-23 23:44:55,041 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:44:55,041 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:44:55,213 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:55] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:44:57,597 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1095.0620790577386, 'y': 668.7152764862268}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}], 'edges': [{'zIndex': 0, 'source': 'start-e005d67f', 'sourceHandle': 'output', 'target': 'message-bba9c837', 'targetHandle': 'default', 'id': 'reactflow__edge-start-e005d67foutput-message-bba9c837default'}, {'zIndex': 0, 'source': 'message-bba9c837', 'sourceHandle': 'default', 'target': 'decision-290a2fc8', 'targetHandle': None, 'id': 'reactflow__edge-message-bba9c837default-decision-290a2fc8'}]}
2025-07-23 23:44:57,598 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=21, edges_count=2, name='N/A'
2025-07-23 23:44:58,680 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=21, edges_count=2, name='None'
2025-07-23 23:44:59,763 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10578, 252, 20420, 20422, , null, null, null, 2025-07-24 02:44:54.517352, 2025-07-24 02:44:59.035159, f, reactflow__edge-start-e005d67foutput-message-bba9c837default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10578, 252, 20420, 20422, , null, null, null, 2025-07-24 02:44:54.517352, 2025-07-24 02:44:59.035159, f, reactflow__edge-start-e005d67foutput-message-bba9c837default, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 59, 35159), 'flow_edges_id': 10578}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:59,766 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10578, 252, 20420, 20422, , null, null, null, 2025-07-24 02:44:54.517352, 2025-07-24 02:44:59.035159, f, reactflow__edge-start-e005d67foutput-message-bba9c837default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10578, 252, 20420, 20422, , null, null, null, 2025-07-24 02:44:54.517352, 2025-07-24 02:44:59.035159, f, reactflow__edge-start-e005d67foutput-message-bba9c837default, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 59, 35159), 'flow_edges_id': 10578}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:59,770 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 252
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10578, 252, 20420, 20422, , null, null, null, 2025-07-24 02:44:54.517352, 2025-07-24 02:44:59.035159, f, reactflow__edge-start-e005d67foutput-message-bba9c837default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flap/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10578, 252, 20420, 20422, , null, null, null, 2025-07-24 02:44:54.517352, 2025-07-24 02:44:59.035159, f, reactflow__edge-start-e005d67foutput-message-bba9c837default, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 24, 2, 44, 59, 35159), 'flow_edges_id': 10578}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-23 23:44:59,945 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:44:59] "[35m[1mPATCH /api/flow/252 HTTP/1.1[0m" 500 -
2025-07-23 23:45:00,635 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:00] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:01,154 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-23 23:45:02,066 - api.flow_api - INFO - DB query for flows returned 14 items.
2025-07-23 23:45:02,241 - api.flow_api - INFO - DB query for edges returned 2 items.
2025-07-23 23:45:02,241 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-23 23:45:02,587 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:02] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:25,913 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:25] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:26,433 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-23 23:45:26,607 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:26] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:41,712 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:41] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:42,232 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1089.0620790577386, 'y': 672.7152764862268}, 'type': 'option', 'width': 320, 'height': 125, 'selected': True, 'positionAbsolute': {'x': 1089.0620790577386, 'y': 672.7152764862268}, 'dragging': False}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje'}, 'id': 'message-bba9c837', 'position': {'x': 913.7399893310603, 'y': 204.74714840333556}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'color': '#3498db', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'instruction': 'Opción A', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción A'}, 'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'position': {'x': 377.4523347011048, 'y': 674.9924806503606}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#FFA500', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Nueva condición'}, 'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'position': {'x': 1089.0620790577386, 'y': 672.7152764862268}, 'type': 'option', 'width': 320, 'height': 125, 'selected': True, 'positionAbsolute': {'x': 1089.0620790577386, 'y': 672.7152764862268}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-290a2fc8', 'position': {'x': 763.3520377967772, 'y': 386.46603814640747}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#e74c3c', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'instruction': 'Opción B', 'lastUpdated': '2025-07-23T04:19:27.337Z', 'sourceNode': 'decision-290a2fc8', 'text': 'Opción B'}, 'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'position': {'x': 734.1648054913771, 'y': 670.8076778742713}, 'type': 'option', 'width': 320, 'height': 125}], 'edges': [{'animated': True, 'id': '10578', 'label': '', 'source': 'start-e005d67f', 'target': 'message-bba9c837', 'type': 'default'}, {'animated': True, 'id': '10579', 'label': '', 'source': 'message-bba9c837', 'target': 'decision-290a2fc8', 'type': 'eliteEdge'}, {'zIndex': 0, 'source': 'decision-290a2fc8', 'sourceHandle': 'output-4d01e941-7227-4737-9d02-317a99523646', 'target': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'targetHandle': 'target', 'id': 'reactflow__edge-decision-290a2fc8output-4d01e941-7227-4737-9d02-317a99523646-option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646target'}, {'zIndex': 0, 'source': 'decision-290a2fc8', 'sourceHandle': 'output-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'target': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'targetHandle': 'target', 'id': 'reactflow__edge-decision-290a2fc8output-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2-option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2target'}, {'zIndex': 0, 'source': 'decision-290a2fc8', 'sourceHandle': 'output-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'target': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'targetHandle': 'target', 'id': 'reactflow__edge-decision-290a2fc8output-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d-option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95dtarget'}, {'zIndex': 0, 'source': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'sourceHandle': 'source', 'target': 'end-11a6ac5c', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646source-end-11a6ac5c'}, {'zIndex': 0, 'source': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'sourceHandle': 'source', 'target': 'end-11a6ac5c', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2source-end-11a6ac5c'}, {'zIndex': 0, 'source': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'sourceHandle': 'source', 'target': 'end-11a6ac5c', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95dsource-end-11a6ac5c'}]}
2025-07-23 23:45:42,233 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=14, edges_count=8, name='N/A'
2025-07-23 23:45:42,914 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=14, edges_count=8, name='None'
2025-07-23 23:45:44,829 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:45:44,830 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:45:45,002 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:45] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:48,517 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:48] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:49,036 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-23 23:45:50,439 - api.flow_api - INFO - DB query for flows returned 14 items.
2025-07-23 23:45:50,612 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-23 23:45:50,613 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-23 23:45:51,367 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:51] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:58,567 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:58] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:45:59,088 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-23 23:45:59,261 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:45:59] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:48:08,600 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:48:08] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:48:09,119 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'message-bba9c837', 'label': 'Mensaje', 'message': 'Holi', 'variables': [], 'lastUpdated': '2025-07-24T02:47:30.842Z'}, 'id': 'message-bba9c837', 'position': {'x': 855.867196638756, 'y': 212.50100310745196}, 'type': 'message', 'width': 226, 'height': 104, 'selected': True, 'positionAbsolute': {'x': 855.867196638756, 'y': 212.50100310745196}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Opción C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión', 'question': 'Como estas?'}, 'id': 'decision-290a2fc8', 'position': {'x': 811.4489886859902, 'y': 376.01812494754614}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': 811.4489886859902, 'y': 376.01812494754614}}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132, 'selected': False, 'dragging': False}, {'data': {'id': 'end-11a6ac5c', 'label': 'Fin'}, 'id': 'end-11a6ac5c', 'position': {'x': 887.4532491248175, 'y': 932.7094085152959}, 'type': 'end', 'width': 310, 'height': 132, 'selected': False, 'dragging': False}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'id': 'start-e005d67f', 'label': 'Inicio'}, 'id': 'start-e005d67f', 'position': {'x': 543.4296307635723, 'y': 87.32228707147982}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'id': 'message-bba9c837', 'label': 'Mensaje', 'message': 'Holi', 'variables': [], 'lastUpdated': '2025-07-24T02:47:30.842Z'}, 'id': 'message-bba9c837', 'position': {'x': 855.867196638756, 'y': 212.50100310745196}, 'type': 'message', 'width': 226, 'height': 104, 'selected': True, 'positionAbsolute': {'x': 855.867196638756, 'y': 212.50100310745196}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Opción C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-290a2fc8', 'isEditing': False, 'label': 'Decisión', 'question': 'Como estas?'}, 'id': 'decision-290a2fc8', 'position': {'x': 811.4489886859902, 'y': 376.01812494754614}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': 811.4489886859902, 'y': 376.01812494754614}}, {'id': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'type': 'option', 'position': {'x': 426.2213581619138, 'y': 572.635771537699}, 'data': {'sourceNode': 'decision-290a2fc8', 'conditionId': '4d01e941-7227-4737-9d02-317a99523646', 'text': 'Opción A', 'instruction': 'Opción A', 'color': '#3498db', 'lastUpdated': '2025-07-24T02:47:50.599Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125, 'selected': False, 'positionAbsolute': {'x': 426.2213581619138, 'y': 572.635771537699}, 'dragging': False}, {'id': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'type': 'option', 'position': {'x': 788.9380310228877, 'y': 625.1907846507911}, 'data': {'sourceNode': 'decision-290a2fc8', 'conditionId': '7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'text': 'Opción B', 'instruction': 'Opción B', 'color': '#e74c3c', 'lastUpdated': '2025-07-24T02:47:50.599Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125, 'selected': False, 'positionAbsolute': {'x': 788.9380310228877, 'y': 625.1907846507911}, 'dragging': False}, {'id': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'type': 'option', 'position': {'x': 1144.048057249072, 'y': 601.6793314159868}, 'data': {'sourceNode': 'decision-290a2fc8', 'conditionId': 'condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'text': 'Opción C', 'instruction': 'Opción C', 'color': '#FFA500', 'lastUpdated': '2025-07-24T02:47:50.599Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125, 'selected': False, 'positionAbsolute': {'x': 1144.048057249072, 'y': 601.6793314159868}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10586', 'label': '', 'source': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'sourceHandle': 'source', 'target': 'end-11a6ac5c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10580', 'label': '', 'source': 'start-e005d67f', 'target': 'message-bba9c837', 'type': 'default'}, {'animated': True, 'id': '10581', 'label': '', 'source': 'message-bba9c837', 'target': 'decision-290a2fc8', 'type': 'eliteEdge'}, {'animated': True, 'id': '10587', 'label': '', 'source': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'sourceHandle': 'source', 'target': 'end-11a6ac5c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10585', 'label': '', 'source': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'sourceHandle': 'source', 'target': 'end-11a6ac5c', 'type': 'eliteEdge'}, {'id': 'edge-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'source': 'decision-290a2fc8', 'target': 'option-decision-290a2fc8-4d01e941-7227-4737-9d02-317a99523646', 'sourceHandle': 'output-4d01e941-7227-4737-9d02-317a99523646', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'source': 'decision-290a2fc8', 'target': 'option-decision-290a2fc8-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'sourceHandle': 'output-7ea46816-0c8b-4c1f-8e11-84405c7ea3c2', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'source': 'decision-290a2fc8', 'target': 'option-decision-290a2fc8-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'sourceHandle': 'output-condition-9a7e8484-35a5-449a-a4e5-254ff557f95d', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}]}
2025-07-23 23:48:09,120 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=11, edges_count=8, name='N/A'
2025-07-23 23:48:10,198 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=11, edges_count=8, name='None'
2025-07-23 23:48:13,789 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:48:13,790 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:48:13,961 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:48:13] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:50:50,551 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:50:50] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:50:51,077 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'id': 'start-e9ea896c', 'type': 'start', 'position': {'x': 768.9855877380187, 'y': 266.99481127835327}, 'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 231, 'height': 144, 'selected': True, 'positionAbsolute': {'x': 768.9855877380187, 'y': 266.99481127835327}, 'dragging': False}, {'id': 'message-f457b376', 'type': 'message', 'position': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'dragging': False}, {'id': 'decision-2d77884b', 'type': 'decision', 'position': {'x': 955.3497594780949, 'y': 555.6404508936417}, 'data': {'id': 'decision-2d77884b', 'label': 'Decisión', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A', 'color': '#3498db'}, {'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B', 'color': '#e74c3c'}, {'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 955.3497594780949, 'y': 555.6404508936417}, 'dragging': False}, {'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'type': 'option', 'position': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'data': {'sourceNode': 'decision-2d77884b', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A', 'instruction': 'Opción A', 'color': '#3498db', 'lastUpdated': '2025-07-24T02:50:16.915Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'dragging': False}, {'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'type': 'option', 'position': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'data': {'sourceNode': 'decision-2d77884b', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B', 'instruction': 'Opción B', 'color': '#e74c3c', 'lastUpdated': '2025-07-24T02:50:16.915Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'dragging': False}, {'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'type': 'option', 'position': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'data': {'sourceNode': 'decision-2d77884b', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición', 'instruction': 'Nueva condición', 'color': '#FFA500', 'lastUpdated': '2025-07-24T02:50:16.915Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'dragging': False}, {'id': 'end-8c086b6c', 'type': 'end', 'position': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 310, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'dragging': False}], 'edges': [{'id': 'edge-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'source': 'decision-2d77884b', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'source': 'decision-2d77884b', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'source': 'decision-2d77884b', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28source-end-8c086b6c'}, {'zIndex': 0, 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1source-end-8c086b6c'}, {'zIndex': 0, 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188source-end-8c086b6c'}, {'zIndex': 0, 'source': 'message-f457b376', 'sourceHandle': 'default', 'target': 'decision-2d77884b', 'targetHandle': None, 'id': 'reactflow__edge-message-f457b376default-decision-2d77884b'}, {'zIndex': 0, 'source': 'start-e9ea896c', 'sourceHandle': 'output', 'target': 'message-f457b376', 'targetHandle': 'default', 'id': 'reactflow__edge-start-e9ea896coutput-message-f457b376default'}]}
2025-07-23 23:50:51,078 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-23 23:50:51,778 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-23 23:51:00,895 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:51:00,896 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:51:01,068 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:51:01] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:55:37,907 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:55:37] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:55:38,819 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-23 23:55:39,563 - api.flow_api - INFO - DB query for flows returned 14 items.
2025-07-23 23:55:39,739 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-23 23:55:39,739 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-23 23:55:40,083 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:55:40] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:56:08,230 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:56:08] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-23 23:56:08,757 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 971.6968558937808, 'y': 525.6707741315511}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 971.6968558937808, 'y': 525.6707741315511}, 'dragging': False}, {'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 823.4759091236383, 'y': 111.69739532933761}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 823.4759091236383, 'y': 111.69739532933761}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10603', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10602', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10596', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10597', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10598', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10599', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10600', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10601', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-23 23:56:08,758 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-23 23:56:09,446 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-23 23:56:16,599 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-23 23:56:16,599 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-23 23:56:16,774 - werkzeug - INFO - 127.0.0.1 - - [23/Jul/2025 23:56:16] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:11:31,183 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:11:31] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:11:31,711 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 00:11:32,235 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 00:11:32,408 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 00:11:32,408 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 00:11:32,751 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:11:32] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:25:08,179 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:25:08] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:25:08,701 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 00:25:09,384 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 00:25:09,558 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 00:25:09,558 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 00:25:09,901 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:25:09] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:30:23,856 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:30:23] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:30:24,379 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 00:30:25,062 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 00:30:25,235 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 00:30:25,236 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 00:30:25,580 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:30:25] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:36:06,932 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:36:06] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:36:07,455 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 00:36:07,982 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 00:36:08,154 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 00:36:08,154 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 00:36:08,495 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:36:08] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:36:46,736 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:36:46] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:36:47,278 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 00:36:47,451 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:36:47] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:37:49,825 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:37:49] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:37:50,741 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 00:37:50,915 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:37:50] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:38:29,412 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:38:29] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:38:29,936 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 00:38:30,110 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:38:30] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:39:25,992 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:39:25] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:39:26,513 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 00:39:26,686 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:39:26] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:39:35,899 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:39:35] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:39:36,416 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 00:39:36,586 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:39:36] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:40:36,822 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:40:36] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:40:37,345 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 00:40:37,517 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:40:37] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:41:31,021 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:41:31] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:41:31,550 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 00:41:32,077 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 00:41:32,249 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 00:41:32,249 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 00:41:32,590 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:41:32] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:42:31,201 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:42:31] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:42:31,730 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 00:42:31,903 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:42:31] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:45:33,986 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:33] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:45:33,991 - app - WARNING - Authentication error: Signature has expired
2025-07-24 00:45:33,995 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:33] "[31m[1mGET /api/flow/252 HTTP/1.1[0m" 401 -
2025-07-24 00:45:34,028 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 00:45:34,029 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 00:45:34,030 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 00:45:34,032 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 00:45:34,034 - app - WARNING - Authentication error: Signature has expired
2025-07-24 00:45:34,035 - app - WARNING - Authentication error: Signature has expired
2025-07-24 00:45:34,036 - app - WARNING - Authentication error: Signature has expired
2025-07-24 00:45:34,037 - app - WARNING - Authentication error: Signature has expired
2025-07-24 00:45:34,037 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 00:45:34,037 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 00:45:34,037 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 00:45:34,038 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 00:45:34,047 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 00:45:34,053 - app - WARNING - Authentication error: Signature has expired
2025-07-24 00:45:34,054 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:34] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-24 00:45:38,024 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:38] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 00:45:39,120 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:39] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 00:45:39,168 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:39] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 00:45:39,686 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 00:45:39,857 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 00:45:39] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:00:28,108 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:00:28] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:00:29,017 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 01:00:29,542 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 01:00:29,736 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 01:00:29,736 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 01:00:30,078 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:00:30] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:06:19,545 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:06:19] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:06:20,077 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 01:06:20,762 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 01:06:20,936 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 01:06:20,936 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 01:06:21,284 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:06:21] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:22:11,812 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:22:11] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:22:12,359 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 01:22:12,880 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 01:22:13,052 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 01:22:13,055 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 01:22:13,397 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:22:13] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:23:39,297 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:23:39] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:23:39,858 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 01:23:40,035 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:23:40] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:27:37,814 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:27:37] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:27:38,336 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 01:27:38,858 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 01:27:39,031 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 01:27:39,032 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 01:27:39,374 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:27:39] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:27:42,233 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:27:42] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:27:42,752 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'type': 'message', 'width': 178, 'height': 58}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 971.6968558937808, 'y': 525.6707741315511}, 'type': 'decision', 'width': 198, 'height': 76}, {'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'type': 'end', 'width': 198, 'height': 76}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 823.4759091236383, 'y': 111.69739532933761}, 'type': 'start', 'width': 198, 'height': 76}], 'edges': [{'animated': True, 'id': '10604', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10605', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10606', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10607', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10608', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10609', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10610', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10611', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 01:27:42,753 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 01:27:43,439 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 01:27:45,535 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 01:27:45,535 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 01:27:45,706 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:27:45] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:27:47,357 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'type': 'message', 'width': 178, 'height': 58}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 971.6968558937808, 'y': 525.6707741315511}, 'type': 'decision', 'width': 198, 'height': 76}, {'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'type': 'end', 'width': 198, 'height': 76}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 823.4759091236383, 'y': 111.69739532933761}, 'type': 'start', 'width': 198, 'height': 76}], 'edges': [{'animated': True, 'id': '10604', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10605', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10606', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10607', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10608', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10609', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10610', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10611', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 01:27:47,358 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 01:27:48,057 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 01:27:49,449 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 01:27:49,449 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 01:27:49,623 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:27:49] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:27:49,994 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:27:49] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:27:50,537 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'type': 'message', 'width': 178, 'height': 58}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 971.6968558937808, 'y': 525.6707741315511}, 'type': 'decision', 'width': 198, 'height': 76}, {'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'type': 'end', 'width': 198, 'height': 76}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 823.4759091236383, 'y': 111.69739532933761}, 'type': 'start', 'width': 198, 'height': 76}], 'edges': [{'animated': True, 'id': '10604', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10605', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10606', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10607', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10608', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10609', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10610', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10611', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 01:27:50,538 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 01:27:51,228 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 01:27:51,750 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 01:27:51,750 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 01:27:51,924 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:27:51] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:31:27,722 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:31:27] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:31:28,248 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 01:31:28,776 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 01:31:28,951 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 01:31:28,952 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 01:31:29,299 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:31:29] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:31:52,248 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:31:52] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:31:52,774 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 01:31:52,945 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:31:52] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:32:01,488 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:32:01] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:32:02,009 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 971.6968558937808, 'y': 525.6707741315511}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 685.4759091236383, 'y': 113.69739532933761}, 'type': 'start', 'width': 231, 'height': 144, 'selected': True, 'positionAbsolute': {'x': 685.4759091236383, 'y': 113.69739532933761}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10612', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10613', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10614', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10615', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10616', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10617', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10618', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10619', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 01:32:02,010 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 01:32:02,703 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 01:32:04,940 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 01:32:04,940 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 01:32:05,111 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:32:05] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:42:55,008 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:42:55] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:42:55,536 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 01:42:56,427 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 01:42:56,601 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 01:42:56,601 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 01:42:56,946 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:42:56] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:55:23,816 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:55:23,825 - app - WARNING - Authentication error: Signature has expired
2025-07-24 01:55:23,826 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "[31m[1mGET /api/flow/252 HTTP/1.1[0m" 401 -
2025-07-24 01:55:23,851 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 01:55:23,854 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 01:55:23,854 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 01:55:23,856 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 01:55:23,859 - app - WARNING - Authentication error: Signature has expired
2025-07-24 01:55:23,860 - app - WARNING - Authentication error: Signature has expired
2025-07-24 01:55:23,861 - app - WARNING - Authentication error: Signature has expired
2025-07-24 01:55:23,862 - app - WARNING - Authentication error: Signature has expired
2025-07-24 01:55:23,864 - app - WARNING - Authentication error: Signature has expired
2025-07-24 01:55:23,864 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 01:55:23,865 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 01:55:23,865 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 01:55:23,866 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 01:55:23,866 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 01:55:23,912 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 01:55:23,916 - app - WARNING - Authentication error: Signature has expired
2025-07-24 01:55:23,917 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:23] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-24 01:55:31,796 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:31] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 01:55:32,925 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:32] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 01:55:33,083 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:33] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:55:33,613 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 01:55:34,296 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 01:55:34,470 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 01:55:34,470 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 01:55:34,820 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:55:34] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:56:40,390 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:56:40] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:56:40,914 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 01:56:41,087 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:56:41] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:58:55,719 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:58:55] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:58:56,242 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 01:58:56,418 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:58:56] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:59:23,543 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:59:23] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 01:59:24,065 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 01:59:24,235 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 01:59:24] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:00:01,241 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:00:01] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:00:01,764 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 02:00:01,938 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:00:01] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:02:33,183 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:02:33] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:02:33,750 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 02:02:34,272 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 02:02:34,446 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 02:02:34,446 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 02:02:34,790 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:02:34] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:05:37,255 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:05:37] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:05:37,785 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 02:05:37,958 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:05:37] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:11:26,515 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:11:26] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:11:27,053 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 02:11:27,738 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 02:11:27,912 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 02:11:27,913 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 02:11:28,259 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:11:28] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:11:39,349 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:11:39] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:11:39,900 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 02:11:40,073 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:11:40] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:13:43,837 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:13:43] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:13:44,353 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 02:13:44,524 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:13:44] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:17:42,141 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:17:42] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 02:17:42,146 - app - WARNING - Authentication error: Signature has expired
2025-07-24 02:17:42,146 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:17:42] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-24 02:23:07,763 - app - WARNING - Authentication error: Missing Authorization Header
2025-07-24 02:23:07,767 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:23:07] "[31m[1mGET /api/flow/252 HTTP/1.1[0m" 401 -
2025-07-24 02:49:30,384 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:49:30] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 02:49:31,519 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:49:31] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 02:49:31,595 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:49:31] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:49:32,117 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 02:49:32,637 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 02:49:32,810 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 02:49:32,810 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 02:49:33,156 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:49:33] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:51:18,603 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:51:18] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:51:19,128 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 02:51:19,300 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:51:19] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:53:27,556 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:27] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:53:28,095 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 02:53:28,265 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:28] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:53:41,457 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:41] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:53:41,982 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'type': 'message', 'width': 178, 'height': 58}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 971.6968558937808, 'y': 525.6707741315511}, 'type': 'decision', 'width': 198, 'height': 76}, {'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'type': 'end', 'width': 198, 'height': 76}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 685.4759091236383, 'y': 113.69739532933761}, 'type': 'start', 'width': 198, 'height': 76}], 'edges': [{'animated': True, 'id': '10620', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10621', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10622', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10623', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10624', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10625', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10626', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10627', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 02:53:41,983 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 02:53:42,725 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 02:53:44,999 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 02:53:45,000 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 02:53:45,173 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:45] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:53:53,764 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:53] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-24 02:53:53,765 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:53] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-24 02:53:53,769 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:53] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-24 02:53:53,769 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:53] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-24 02:53:57,984 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:53:57] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 02:53:58,509 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 1043.3958028462139, 'y': 372.2118253220278}, 'type': 'message', 'width': 178, 'height': 58}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 971.6968558937808, 'y': 525.6707741315511}, 'type': 'decision', 'width': 198, 'height': 76}, {'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 558.7871582922345, 'y': 794.9650832394406}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 891.7280023598315, 'y': 856.1983606438146}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1246.8356031125918, 'y': 835.7420670687717}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1367.8750203409045, 'y': 1067.6649849704334}, 'type': 'end', 'width': 198, 'height': 76}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 685.4759091236383, 'y': 113.69739532933761}, 'type': 'start', 'width': 198, 'height': 76}], 'edges': [{'animated': True, 'id': '10620', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10621', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10622', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10623', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10624', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10625', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10626', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10627', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 02:53:58,510 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 02:53:59,198 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 02:54:00,635 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 02:54:00,636 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 02:54:00,824 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 02:54:00] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:02:29,371 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:02:29] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:02:29,989 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 03:02:30,676 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 03:02:30,851 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 03:02:30,852 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 03:02:31,200 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:02:31] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:03:37,527 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:03:37] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:03:38,060 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:03:38,233 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:03:38] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:05:29,984 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:05:29] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:05:30,504 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:05:30,677 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:05:30] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:05:46,658 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:05:46] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-24 03:05:46,659 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:05:46] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-24 03:05:46,664 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:05:46] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-24 03:05:46,666 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:05:46] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-24 03:05:49,001 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:05:49] "OPTIONS /api/whatsapp/status/123 HTTP/1.1" 200 -
2025-07-24 03:06:04,628 - services.whatsapp_service - ERROR - Error en la comunicación con la API de WhatsApp
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-24 03:06:04,645 - services.whatsapp_service - ERROR - Error al verificar el estado de WhatsApp para 123
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-24 03:06:04,648 - app - ERROR - Exception on /api/whatsapp/status/123 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/whatsapp_api.py", line 75, in get_status
    status = service.get_connection_status(plubot_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 104, in get_connection_status
    connection = WhatsAppConnection.query.filter_by(plubot_id=plubot_id).first()
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WhatsAppConnection' has no attribute 'query'
2025-07-24 03:06:04,828 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:06:04] "[35m[1mGET /api/whatsapp/status/123 HTTP/1.1[0m" 500 -
2025-07-24 03:06:21,671 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:06:21] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:06:22,212 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:06:22,385 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:06:22] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:06:48,373 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:06:48] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-24 03:06:48,374 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:06:48] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-24 03:06:48,377 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:06:48] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-24 03:06:48,378 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:06:48] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-24 03:11:26,112 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:11:26] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 03:11:27,265 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:11:27] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 03:13:30,798 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:13:30] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:13:31,322 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 03:13:31,837 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 03:13:32,010 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 03:13:32,010 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 03:13:32,352 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:13:32] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:20:38,148 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:20:38] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:20:38,704 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 03:20:39,733 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 03:20:39,907 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 03:20:39,908 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 03:20:40,252 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:20:40] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:20:43,401 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:20:43,571 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:20:43] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:22:51,725 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:22:51] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:22:52,258 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:22:52,433 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:22:52] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:23:15,982 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:23:15] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:23:16,501 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:23:16,677 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:23:16] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:25:31,884 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:25:31] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:25:32,411 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:25:32,584 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:25:32] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:32:33,785 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:32:33] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:32:34,312 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 03:32:34,834 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 03:32:35,007 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 03:32:35,007 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 03:32:35,347 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:32:35] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:52:16,710 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:52:16] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:52:17,231 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 03:52:18,059 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 03:52:18,238 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 03:52:18,239 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 03:52:18,582 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:52:18] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:52:39,723 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:52:39] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:52:40,248 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:52:40,424 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:52:40] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:56:48,693 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:56:48] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:56:49,216 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:56:49,392 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:56:49] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:57:39,809 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:57:39] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:57:40,334 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 03:57:40,855 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 03:57:41,029 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 03:57:41,029 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 03:57:41,375 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:57:41] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:57:44,612 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:57:44,787 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:57:44] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:58:13,041 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:58:13] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 03:58:13,557 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 03:58:13,728 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 03:58:13] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:01:22,064 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:01:22] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:01:22,578 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 04:01:22,748 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:01:22] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:01:42,329 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:01:42] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:01:42,856 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 04:01:43,030 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:01:43] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:01:46,512 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 04:01:46,685 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:01:46] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:02:54,346 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:02:54] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:02:54,862 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 04:02:55,386 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 04:02:55,559 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 04:02:55,560 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 04:02:55,906 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:02:55] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:07:15,556 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:07:15] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:07:16,072 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 04:07:16,245 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:07:16] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:07:21,495 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:07:21] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:07:22,010 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 04:07:22,180 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:07:22] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 04:07:23,799 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 04:07:23,987 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 04:07:23] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 14:20:34,289 - root - INFO - Sistema de logging configurado correctamente
2025-07-24 14:20:34,296 - root - INFO - Sistema de logging configurado correctamente
2025-07-24 14:20:34,315 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-24 14:20:34,315 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-24 14:20:46,321 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 14:20:46] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 14:20:50,002 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 14:20:50] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 14:20:50,344 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 14:20:50] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 14:20:51,050 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 14:20:51] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 14:20:53,390 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 14:20:53,926 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 14:20:54,101 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 14:20:54,101 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 14:20:54,445 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 14:20:54] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:03:46,096 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:03:46] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:03:46,100 - app - WARNING - Authentication error: Signature has expired
2025-07-24 16:03:46,102 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:03:46] "[31m[1mGET /api/flow/252 HTTP/1.1[0m" 401 -
2025-07-24 16:03:46,111 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:03:46] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 16:03:46,112 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:03:46] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-24 16:03:46,114 - app - WARNING - Authentication error: Signature has expired
2025-07-24 16:03:46,114 - app - WARNING - Authentication error: Signature has expired
2025-07-24 16:03:46,115 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:03:46] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 16:03:46,115 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:03:46] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-24 16:03:46,122 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:03:46] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 16:03:46,124 - app - WARNING - Authentication error: Signature has expired
2025-07-24 16:03:46,125 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:03:46] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-24 16:04:07,863 - app - ERROR - Exception on /api/auth/login [OPTIONS]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1295, in __inner
    self.limiter._check_request_limit(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1169, in _check_request_limit
    raise e
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1150, in _check_request_limit
    self.__evaluate_limits(endpoint, all_limits)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1087, in __evaluate_limits
    if not method(lim.limit, *args, **kwargs):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/strategies.py", line 157, in hit
    self.storage.incr(
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5640, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5849, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5833, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 622, in execute_command
    return self._execute_command(*args, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 633, in _execute_command
    return conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 92, in call_with_retry
    raise error
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 87, in call_with_retry
    return do()
           ^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 634, in <lambda>
    lambda: self._send_command_parse_response(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 605, in _send_command_parse_response
    return self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 652, in parse_response
    response = connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/connection.py", line 644, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 25, in _read_response
    raw = self._buffer.readline()
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 115, in readline
    self._read_from_socket()
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 68, in _read_from_socket
    raise ConnectionError(SERVER_CLOSED_CONNECTION_ERROR)
redis.exceptions.ConnectionError: Connection closed by server.
2025-07-24 16:04:07,879 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:04:07] "[35m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 500 -
2025-07-24 16:04:09,910 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:04:09] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 16:04:29,194 - root - INFO - Sistema de logging configurado correctamente
2025-07-24 16:04:29,202 - root - INFO - Sistema de logging configurado correctamente
2025-07-24 16:04:29,211 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-24 16:04:29,211 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-24 16:04:34,985 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:04:34] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 16:04:39,068 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:04:39] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 16:04:39,131 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:04:39] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:04:42,168 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 16:04:43,053 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 16:04:43,226 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 16:04:43,226 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 16:04:43,568 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:04:43] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:11:50,747 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:11:50] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:11:51,268 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 16:11:51,783 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 16:11:51,954 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 16:11:51,954 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 16:11:52,294 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:11:52] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:12:18,449 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:12:18] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:12:18,965 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 615.0211272867828, 'y': 746.0659797659204}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 615.0211272867828, 'y': 746.0659797659204}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 957.741792049084, 'y': 834.1937640807305}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 957.741792049084, 'y': 834.1937640807305}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1295.7347065861122, 'y': 735.4989049480553}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1295.7347065861122, 'y': 735.4989049480553}, 'dragging': False}, {'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 996.9416545463696, 'y': 308.64299080645145}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 996.9416545463696, 'y': 308.64299080645145}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión', 'isEditing': False}, 'id': 'decision-2d77884b', 'position': {'x': 969.2519007201049, 'y': 488.996446526411}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 969.2519007201049, 'y': 488.996446526411}, 'dragging': False}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1382.5447513829606, 'y': 1016.320926323237}, 'type': 'end', 'width': 310, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1382.5447513829606, 'y': 1016.320926323237}, 'dragging': False}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 707.4805056867225, 'y': 155.2616332818298}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 707.4805056867225, 'y': 155.2616332818298}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10628', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10629', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10630', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10631', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10632', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10633', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10634', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10635', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 16:12:18,966 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 16:12:20,027 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 16:12:23,269 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 16:12:23,269 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 16:12:23,439 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:12:23] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:12:28,698 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:12:28] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:12:29,261 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 615.0211272867828, 'y': 741.5944182212686}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 615.0211272867828, 'y': 741.5944182212686}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 957.741792049084, 'y': 834.1937640807305}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 957.741792049084, 'y': 834.1937640807305}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1295.7347065861122, 'y': 744.4420280373588}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1295.7347065861122, 'y': 744.4420280373588}, 'dragging': False}, {'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 996.9416545463696, 'y': 308.64299080645145}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 996.9416545463696, 'y': 308.64299080645145}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'label': 'Decisión', 'isEditing': False}, 'id': 'decision-2d77884b', 'position': {'x': 969.2519007201049, 'y': 488.996446526411}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 969.2519007201049, 'y': 488.996446526411}, 'dragging': False}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1382.5447513829606, 'y': 1016.320926323237}, 'type': 'end', 'width': 310, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1382.5447513829606, 'y': 1016.320926323237}, 'dragging': False}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 707.4805056867225, 'y': 155.2616332818298}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 707.4805056867225, 'y': 155.2616332818298}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10628', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10629', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10630', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10631', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10632', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10633', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10634', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10635', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 16:12:29,262 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 16:12:29,943 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 16:12:31,702 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 16:12:31,702 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 16:12:31,871 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:12:31] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:13:38,704 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:13:38] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:13:39,219 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 16:13:39,815 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 16:13:39,986 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 16:13:39,987 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 16:13:40,327 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:13:40] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:14:01,070 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:14:01] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:14:01,584 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 16:14:01,758 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:14:01] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:19:06,313 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:19:06] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:19:06,825 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 16:19:07,500 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 16:19:07,672 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 16:19:07,672 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 16:19:08,011 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:19:08] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:23:28,495 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:23:28] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 16:23:29,012 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 16:23:29,182 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 16:23:29] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 17:52:09,732 - root - INFO - Sistema de logging configurado correctamente
2025-07-24 17:52:09,739 - root - INFO - Sistema de logging configurado correctamente
2025-07-24 17:52:09,757 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-24 17:52:09,757 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-24 17:52:29,887 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 17:52:29] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 17:52:33,638 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 17:52:33] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 17:52:33,949 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 17:52:33] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 17:52:38,019 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 17:52:38,559 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 17:52:38,736 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 17:52:38,736 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 17:52:39,079 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 17:52:39] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 17:52:39,431 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 17:52:39] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 17:52:40,524 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 17:52:40] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 18:00:12,133 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:00:12] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:00:12,648 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 18:00:13,174 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 18:00:13,349 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 18:00:13,350 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 18:00:13,694 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:00:13] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:04:43,266 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:04:43] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:04:44,156 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 18:04:44,327 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:04:44] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:04:48,429 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 18:04:48,599 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:04:48] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:05:52,331 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:05:52] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:05:52,847 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 18:05:53,380 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 18:05:53,555 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 18:05:53,555 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 18:05:53,899 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:05:53] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:07:45,247 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:07:45] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:07:45,788 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 18:07:45,959 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:07:45] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:10:14,499 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:10:14] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:10:15,023 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 18:10:15,194 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:10:15] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:11:52,459 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:11:52] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:11:52,978 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 18:11:53,509 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 18:11:53,684 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 18:11:53,684 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 18:11:54,027 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:11:54] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:27:50,867 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:50] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 18:27:52,084 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:52] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-24 18:27:53,044 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:53] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 18:27:54,084 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:54] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-24 18:27:54,149 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:54] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 18:27:54,186 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:54] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:27:54,705 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 18:27:55,233 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 18:27:55,408 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 18:27:55,409 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 18:27:55,753 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:55] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:27:57,154 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:57] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 18:27:58,266 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:27:58] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 18:31:32,721 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:31:32] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:31:33,242 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 18:31:33,429 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:31:33] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:31:43,144 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:31:43] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:31:43,667 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 18:31:43,839 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:31:43] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:31:55,921 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:31:55] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:31:56,444 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 18:31:56,614 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:31:56] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:39:14,802 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:39:14] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:39:15,320 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 18:39:15,849 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 18:39:16,024 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 18:39:16,024 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 18:39:16,369 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:39:16] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:51:01,570 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:51:01] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:51:02,094 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 18:51:02,790 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 18:51:02,966 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 18:51:02,966 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 18:51:03,312 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:51:03] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 18:51:40,337 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:51:40] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 18:51:41,549 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:51:41] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-24 18:51:44,989 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:51:44] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 18:51:46,122 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 18:51:46] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 19:06:29,655 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:06:29] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:06:30,176 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 19:06:30,860 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 19:06:31,035 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 19:06:31,035 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 19:06:31,379 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:06:31] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:12:05,621 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:12:05] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:12:11,110 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 19:12:12,344 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 19:12:12,519 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 19:12:12,519 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 19:12:12,865 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:12:12] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:17:09,174 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:17:09] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:17:11,245 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 19:17:11,418 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:17:11] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:17:19,359 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:17:19] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:17:20,641 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 19:17:25,249 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 19:17:25,425 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 19:17:25,426 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 19:17:25,772 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:17:25] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:46:08,956 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:46:08] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 19:46:10,565 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:46:10] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-24 19:47:20,756 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:47:20] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 19:47:21,853 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:47:21] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 19:47:21,907 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:47:21] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:47:22,419 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 19:47:23,103 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 19:47:23,278 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 19:47:23,279 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 19:47:23,623 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:47:23] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:47:23,796 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:47:23] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 19:47:24,912 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:47:24] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 19:52:22,093 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:52:22] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:52:22,614 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 19:52:22,784 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:52:22] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:58:11,605 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:58:11] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 19:58:12,121 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 19:58:12,810 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 19:58:12,984 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 19:58:12,985 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 19:58:13,329 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 19:58:13] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:02:16,529 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:02:16] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:02:17,049 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 20:02:17,220 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:02:17] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:20:24,989 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:20:24] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 20:20:26,227 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:20:26] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-24 20:20:27,559 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:20:27] "[33mGET /api/auth/google/login HTTP/1.1[0m" 404 -
2025-07-24 20:20:28,466 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:20:28] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 20:20:29,954 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:20:29] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 20:20:34,904 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:20:34] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:20:35,417 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 20:20:36,254 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 20:20:36,429 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 20:20:36,430 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 20:20:36,813 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:20:36] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:35:56,152 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:35:56] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:35:56,674 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 20:35:57,358 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 20:35:57,532 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 20:35:57,532 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 20:35:57,877 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:35:57] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:36:01,756 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:36:01] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:36:02,269 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 20:36:02,467 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:36:02] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 20:36:30,567 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:36:30] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-24 20:36:30,568 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:36:30] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-24 20:36:30,573 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:36:30] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-24 20:36:30,574 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:36:30] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-24 20:36:33,080 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:36:33] "OPTIONS /api/whatsapp/status/123 HTTP/1.1" 200 -
2025-07-24 20:36:48,783 - services.whatsapp_service - ERROR - Error en la comunicación con la API de WhatsApp
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-24 20:36:48,799 - services.whatsapp_service - ERROR - Error al verificar el estado de WhatsApp para 123
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-24 20:36:48,800 - app - ERROR - Exception on /api/whatsapp/status/123 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/whatsapp_api.py", line 75, in get_status
    status = service.get_connection_status(plubot_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 104, in get_connection_status
    connection = WhatsAppConnection.query.filter_by(plubot_id=plubot_id).first()
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WhatsAppConnection' has no attribute 'query'
2025-07-24 20:36:48,975 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 20:36:48] "[35m[1mGET /api/whatsapp/status/123 HTTP/1.1[0m" 500 -
2025-07-24 21:13:33,307 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:33] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 21:13:34,524 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:34] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-24 21:13:35,815 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:35] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 21:13:36,787 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:36] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-24 21:13:36,914 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:36] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 21:13:36,973 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:36] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:13:37,483 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 21:13:38,167 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 21:13:38,343 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 21:13:38,344 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 21:13:38,688 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:38] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:13:39,676 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:39] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 21:13:40,801 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:40] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 21:13:56,194 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:13:56] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:13:56,702 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 615.0211272867828, 'y': 741.5944182212686}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 957.741792049084, 'y': 834.1937640807305}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1295.7347065861122, 'y': 744.4420280373588}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 996.9416545463696, 'y': 308.64299080645145}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 969.2519007201049, 'y': 488.996446526411}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1382.5447513829606, 'y': 1016.320926323237}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 707.4805056867225, 'y': 155.2616332818298}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'animated': True, 'id': '10636', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10637', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10638', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10639', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10640', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10641', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10642', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10643', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-24 21:13:56,703 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-24 21:13:57,402 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-24 21:14:00,271 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-24 21:14:00,271 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-24 21:14:00,443 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:14:00] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:30:26,567 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:30:26] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 21:30:27,786 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:30:27] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-24 21:30:28,756 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:30:28] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 21:30:29,875 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:30:29] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 21:30:29,961 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:30:29] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:30:30,476 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 21:30:31,165 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 21:30:31,341 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 21:30:31,342 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 21:30:31,686 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:30:31] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:35:58,254 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:35:58] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:35:58,766 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 21:35:59,454 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 21:35:59,628 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 21:35:59,628 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 21:35:59,972 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:35:59] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:36:06,089 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:36:06] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:36:06,659 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 21:36:06,833 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:36:06] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:42:23,066 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:42:23] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 21:42:23,583 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 21:42:24,268 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 21:42:24,440 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 21:42:24,441 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 21:42:24,782 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 21:42:24] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 22:30:04,172 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:30:04] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 22:30:05,389 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:30:05] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-24 22:55:56,927 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:55:56] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 22:55:58,039 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:55:58] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 22:55:58,124 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:55:58] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 22:55:58,639 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 22:55:59,531 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 22:55:59,705 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 22:55:59,706 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 22:56:00,052 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:56:00] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 22:57:50,320 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:57:50] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 22:57:50,837 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 22:57:51,010 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:57:51] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 22:57:57,124 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:57:57] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 22:57:57,660 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-24 22:57:57,832 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 22:57:57] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 23:01:20,639 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:01:20] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 23:01:20,641 - app - WARNING - Authentication error: Signature has expired
2025-07-24 23:01:20,642 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:01:20] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-24 23:02:07,588 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:02:07] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 23:02:08,709 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:02:08] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 23:02:37,672 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:02:37] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 23:02:38,782 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:02:38] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-24 23:02:38,869 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:02:38] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-24 23:02:39,385 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-24 23:02:40,221 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-24 23:02:40,394 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-24 23:02:40,395 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-24 23:02:40,738 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:02:40] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-24 23:18:18,896 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:18:18] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-24 23:18:20,118 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:18:20] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-24 23:19:18,724 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:19:18] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-24 23:19:19,839 - werkzeug - INFO - 127.0.0.1 - - [24/Jul/2025 23:19:19] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 11:00:42,222 - root - INFO - Sistema de logging configurado correctamente
2025-07-25 11:00:42,230 - root - INFO - Sistema de logging configurado correctamente
2025-07-25 11:00:42,248 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-25 11:00:42,248 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-25 11:01:33,737 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:33] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 11:01:33,741 - app - WARNING - Authentication error: Signature has expired
2025-07-25 11:01:33,741 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:33] "[31m[1mGET /api/flow/252 HTTP/1.1[0m" 401 -
2025-07-25 11:01:33,760 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:33] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-25 11:01:33,762 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:33] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-25 11:01:33,764 - app - WARNING - Authentication error: Signature has expired
2025-07-25 11:01:33,764 - app - WARNING - Authentication error: Signature has expired
2025-07-25 11:01:33,765 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:33] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-25 11:01:33,765 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:33] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-25 11:01:33,772 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:33] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-25 11:01:33,775 - app - WARNING - Authentication error: Signature has expired
2025-07-25 11:01:33,776 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:33] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-25 11:01:37,601 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:37] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 11:01:41,318 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:41] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 11:01:41,357 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:41] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 11:01:44,359 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-25 11:01:45,054 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-25 11:01:45,229 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-25 11:01:45,230 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-25 11:01:45,576 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:01:45] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-25 11:03:48,257 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:03:48] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 11:03:48,784 - api.flow_api - INFO - [PATCH /api/flow/252] Received raw data: {'plubotId': '252', 'flowName': 'Felizmente', 'nodes': [{'data': {'id': 'message-f457b376', 'label': 'Mensaje'}, 'id': 'message-f457b376', 'position': {'x': 996.9416545463696, 'y': 308.64299080645145}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-2d77884b', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-2d77884b', 'position': {'x': 969.2519007201049, 'y': 488.996446526411}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': '4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'instruction': 'Opción A', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción A'}, 'id': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'position': {'x': 615.0211272867828, 'y': 741.5944182212686}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '127072bc-45df-4d68-bca8-052b6c57a4c1', 'instruction': 'Opción B', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Opción B'}, 'id': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'position': {'x': 957.741792049084, 'y': 834.1937640807305}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#FFA500', 'conditionId': 'condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-24T02:50:16.915Z', 'sourceNode': 'decision-2d77884b', 'text': 'Nueva condición'}, 'id': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'position': {'x': 1295.7347065861122, 'y': 744.4420280373588}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-8c086b6c', 'label': 'Fin'}, 'id': 'end-8c086b6c', 'position': {'x': 1382.5447513829606, 'y': 1016.320926323237}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'id': 'start-e9ea896c', 'label': 'Inicio'}, 'id': 'start-e9ea896c', 'position': {'x': 707.4805056867225, 'y': 155.2616332818298}, 'type': 'start', 'width': 229, 'height': 142}], 'edges': [{'animated': True, 'id': '10644', 'label': '', 'source': 'start-e9ea896c', 'target': 'message-f457b376', 'type': 'default'}, {'animated': True, 'id': '10645', 'label': '', 'source': 'message-f457b376', 'target': 'decision-2d77884b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10646', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'target': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10647', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-127072bc-45df-4d68-bca8-052b6c57a4c1', 'target': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10648', 'label': '', 'source': 'decision-2d77884b', 'sourceHandle': 'output-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'target': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10649', 'label': '', 'source': 'option-decision-2d77884b-4fdcf9ba-5496-4c7b-b357-074ae1de4f28', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10650', 'label': '', 'source': 'option-decision-2d77884b-127072bc-45df-4d68-bca8-052b6c57a4c1', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}, {'animated': True, 'id': '10651', 'label': '', 'source': 'option-decision-2d77884b-condition-3a0953a2-2dc5-4e12-82dc-41ed53d52188', 'sourceHandle': 'source', 'target': 'end-8c086b6c', 'type': 'eliteEdge'}]}
2025-07-25 11:03:48,784 - api.flow_api - INFO - [PATCH /api/flow/252] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-25 11:03:49,481 - api.flow_api - INFO - [update_full_flow - plubot_id=252] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-25 11:03:51,663 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 252
2025-07-25 11:03:51,663 - api.flow_api - INFO - Flujo actualizado para plubot 252 por usuario 72
2025-07-25 11:03:51,836 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:03:51] "PATCH /api/flow/252 HTTP/1.1" 200 -
2025-07-25 11:21:55,730 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:21:55] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-25 11:21:56,954 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:21:56] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-25 11:23:58,094 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:23:58] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 11:23:58,540 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:23:58] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-25 11:23:59,061 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:23:59] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-25 11:23:59,200 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:23:59] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 11:23:59,254 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:23:59] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 11:23:59,803 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-25 11:24:00,483 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-25 11:24:00,657 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-25 11:24:00,658 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-25 11:24:01,001 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:24:01] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-25 11:24:01,571 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:24:01] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 11:24:02,679 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:24:02] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 11:44:29,020 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:44:29] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 11:44:29,546 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-25 11:44:30,065 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-25 11:44:30,237 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-25 11:44:30,237 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-25 11:44:30,580 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 11:44:30] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-25 13:17:53,294 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:17:53] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-25 13:17:53,299 - app - WARNING - Authentication error: Signature has expired
2025-07-25 13:17:53,299 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:17:53] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-25 13:20:24,263 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:24] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 13:20:25,374 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:25] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 13:20:29,945 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:29] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-25 13:20:29,948 - app - WARNING - Authentication error: Signature has expired
2025-07-25 13:20:29,948 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:29] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-25 13:20:38,389 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:38] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 13:20:39,489 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:39] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 13:20:39,572 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:39] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 13:20:40,096 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-25 13:20:41,047 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-25 13:20:41,219 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-25 13:20:41,220 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-25 13:20:41,565 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:41] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-25 13:20:47,948 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:47] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-07-25 13:20:50,919 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:20:50] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-07-25 13:36:09,781 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:09] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-25 13:36:10,991 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:10] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-25 13:36:14,968 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:14] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 13:36:16,503 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:16] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 13:36:16,571 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:16] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 13:36:17,094 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-25 13:36:17,815 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-25 13:36:17,987 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-25 13:36:17,987 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-25 13:36:18,329 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:18] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-25 13:36:34,335 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:34] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-25 13:36:34,337 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:34] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-25 13:36:34,341 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:34] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-25 13:36:34,342 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:34] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-25 13:36:38,616 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:38] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-25 13:36:38,619 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:36:38] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-25 13:57:26,603 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:57:26] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-25 13:57:27,820 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:57:27] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-25 13:59:11,602 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:59:11] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 13:59:12,718 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:59:12] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 13:59:12,817 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:59:12] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 13:59:13,341 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-25 13:59:14,017 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-25 13:59:14,189 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-25 13:59:14,189 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-25 13:59:14,531 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 13:59:14] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-25 14:23:17,026 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:23:17] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-25 14:23:52,655 - app - ERROR - Exception on /api/auth/logout [POST]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 167, in decorator
    verify_jwt_in_request(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 94, in verify_jwt_in_request
    jwt_data, jwt_header, jwt_location = _decode_jwt_from_request(
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 368, in _decode_jwt_from_request
    verify_token_not_blocklisted(jwt_header, decoded_token)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/internal_utils.py", line 58, in verify_token_not_blocklisted
    if jwt_manager._token_in_blocklist_callback(jwt_header, jwt_data):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/app.py", line 84, in check_if_token_in_blocklist
    token = db.session.query(TokenBlocklist.id).filter_by(jti=jti).scalar()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: SELECT token_blocklist.id AS token_blocklist_id 
FROM token_blocklist 
WHERE token_blocklist.jti = %(jti_1)s]
[parameters: {'jti_1': '9c0fd001-2317-4756-994a-b15e9b1ff1d2'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-25 14:23:52,674 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:23:52] "[35m[1mPOST /api/auth/logout HTTP/1.1[0m" 500 -
2025-07-25 14:25:13,794 - app - ERROR - Exception on /api/auth/login [OPTIONS]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1295, in __inner
    self.limiter._check_request_limit(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1169, in _check_request_limit
    raise e
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1150, in _check_request_limit
    self.__evaluate_limits(endpoint, all_limits)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1087, in __evaluate_limits
    if not method(lim.limit, *args, **kwargs):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/strategies.py", line 157, in hit
    self.storage.incr(
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5640, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5849, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5833, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 622, in execute_command
    return self._execute_command(*args, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 633, in _execute_command
    return conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 92, in call_with_retry
    raise error
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 87, in call_with_retry
    return do()
           ^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 634, in <lambda>
    lambda: self._send_command_parse_response(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 605, in _send_command_parse_response
    return self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 652, in parse_response
    response = connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/connection.py", line 644, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 25, in _read_response
    raw = self._buffer.readline()
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 115, in readline
    self._read_from_socket()
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 68, in _read_from_socket
    raise ConnectionError(SERVER_CLOSED_CONNECTION_ERROR)
redis.exceptions.ConnectionError: Connection closed by server.
2025-07-25 14:25:13,807 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:25:13] "[35m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 500 -
2025-07-25 14:25:49,013 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:25:49] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 14:26:24,728 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:26:24] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-25 14:26:27,126 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:26:27] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-25 14:26:27,202 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:26:27] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-25 14:26:28,680 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-25 14:26:29,365 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-25 14:26:29,552 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-25 14:26:29,553 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-25 14:26:29,957 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:26:29] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-25 14:26:33,580 - api.auth - ERROR - Error en /login
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flap/Desktop/Plubot/plubot-backend/api/auth.py", line 312, in login
    .first()
     ^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2728, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.password AS users_password, users.name AS users_name, users.role AS users_role, users.is_verified AS users_is_verified, users.google_id AS users_google_id, users.google_refresh_token AS users_google_refresh_token, users.profile_picture AS users_profile_picture, users.bio AS users_bio, users.preferences AS users_preferences, users.discord_id AS users_discord_id, users.discord_username AS users_discord_username, users.level AS users_level, users.plucoins AS users_plucoins, users.powers AS users_powers, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.password_changed_at AS users_password_changed_at, users.google_sheets_credentials AS users_google_sheets_credentials 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'universal.earthworm.cawb@letterprotect.net', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-25 14:26:33,584 - werkzeug - INFO - 127.0.0.1 - - [25/Jul/2025 14:26:33] "[35m[1mPOST /api/auth/login HTTP/1.1[0m" 500 -
2025-07-26 02:05:58,518 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 02:05:58,526 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 02:05:58,542 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-26 02:05:58,542 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-26 02:06:02,117 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:06:02] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 02:06:02,120 - app - WARNING - Authentication error: Signature has expired
2025-07-26 02:06:02,121 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:06:02] "[31m[1mGET /api/flow/252 HTTP/1.1[0m" 401 -
2025-07-26 02:06:02,131 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:06:02] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-26 02:06:02,133 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:06:02] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-26 02:06:02,134 - app - WARNING - Authentication error: Signature has expired
2025-07-26 02:06:02,134 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:06:02] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-26 02:06:02,136 - app - WARNING - Authentication error: Signature has expired
2025-07-26 02:06:02,136 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:06:02] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-26 02:06:02,145 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:06:02] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 02:06:02,147 - app - WARNING - Authentication error: Signature has expired
2025-07-26 02:06:02,147 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:06:02] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-26 02:08:38,703 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:08:38] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 02:08:42,438 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:08:42] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 02:08:42,439 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:08:42] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 02:08:42,504 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:08:42] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 02:08:45,463 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 02:08:45,989 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 02:08:46,368 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 02:08:46,369 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 02:08:46,709 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 02:08:46] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 03:10:49,870 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 03:10:49] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 03:10:49,875 - app - WARNING - Authentication error: Signature has expired
2025-07-26 03:10:49,876 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 03:10:49] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-26 03:28:57,648 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 03:28:57] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 03:28:58,760 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 03:28:58] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 03:28:58,836 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 03:28:58] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 03:28:59,350 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 03:28:59,909 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 03:29:00,082 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 03:29:00,083 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 03:29:00,425 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 03:29:00] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 13:53:21,585 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 13:53:21,593 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 13:53:21,609 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-26 13:53:21,609 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-26 13:53:34,747 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 13:53:34] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 13:53:39,030 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 13:53:39] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 13:53:39,161 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 13:53:39] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 13:53:42,310 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 13:53:42,846 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 13:53:43,018 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 13:53:43,019 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 13:53:43,371 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 13:53:43] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 14:12:21,215 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:12:21] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 14:12:21,731 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 14:12:22,247 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 14:12:22,417 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 14:12:22,418 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 14:12:22,761 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:12:22] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 14:27:50,519 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:27:50] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 14:27:51,767 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:27:51] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-26 14:28:00,944 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:28:00] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 14:28:02,227 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:28:02] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 14:28:02,264 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:28:02] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 14:28:02,777 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 14:28:03,451 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 14:28:03,622 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 14:28:03,622 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 14:28:03,967 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:28:03] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 14:43:12,244 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:43:12] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 14:43:13,442 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:43:13] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-26 14:47:16,783 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:47:16] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 14:47:17,882 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:47:17] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 14:47:17,930 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:47:17] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 14:47:18,442 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 14:47:18,956 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 14:47:19,127 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 14:47:19,128 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 14:47:19,466 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 14:47:19] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 15:02:17,913 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:02:17] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 15:02:19,116 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:02:19] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-26 15:09:10,281 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:09:10] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 15:09:11,388 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:09:11] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 15:09:11,415 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:09:11] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 15:09:11,930 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 15:09:12,449 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 15:09:12,620 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 15:09:12,621 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 15:09:12,961 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:09:12] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 15:09:18,298 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:09:18] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 15:09:19,398 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:09:19] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 15:28:14,718 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:28:14] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 15:28:15,243 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 15:28:15,767 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 15:28:15,937 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 15:28:15,938 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 15:28:16,281 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:28:16] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 15:32:07,053 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:32:07] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 15:32:08,249 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:32:08] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-26 15:32:51,335 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:32:51] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 15:32:52,439 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:32:52] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 15:32:52,503 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:32:52] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 15:32:53,018 - api.flow_api - INFO - Cache hit for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 15:32:53,190 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:32:53] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 15:53:19,812 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:53:19] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 15:53:20,344 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 15:53:20,860 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 15:53:21,032 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 15:53:21,033 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 15:53:21,372 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 15:53:21] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 16:00:37,941 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:00:37] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 16:00:38,451 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 16:00:39,341 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 16:00:39,511 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 16:00:39,512 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 16:00:39,873 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:00:39] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 16:31:27,168 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:31:27] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 16:32:10,009 - app - ERROR - Exception on /api/auth/logout [POST]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 167, in decorator
    verify_jwt_in_request(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 94, in verify_jwt_in_request
    jwt_data, jwt_header, jwt_location = _decode_jwt_from_request(
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 368, in _decode_jwt_from_request
    verify_token_not_blocklisted(jwt_header, decoded_token)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/internal_utils.py", line 58, in verify_token_not_blocklisted
    if jwt_manager._token_in_blocklist_callback(jwt_header, jwt_data):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flap/Desktop/Plubot/plubot-backend/app.py", line 84, in check_if_token_in_blocklist
    token = db.session.query(TokenBlocklist.id).filter_by(jti=jti).scalar()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: SELECT token_blocklist.id AS token_blocklist_id 
FROM token_blocklist 
WHERE token_blocklist.jti = %(jti_1)s]
[parameters: {'jti_1': '0e51a314-e7ec-47db-9ef8-0479ab6ad98f'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-26 16:32:10,027 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:32:10] "[35m[1mPOST /api/auth/logout HTTP/1.1[0m" 500 -
2025-07-26 16:34:52,439 - app - ERROR - Exception on /api/auth/login [OPTIONS]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1295, in __inner
    self.limiter._check_request_limit(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1169, in _check_request_limit
    raise e
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1150, in _check_request_limit
    self.__evaluate_limits(endpoint, all_limits)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_limiter/extension.py", line 1087, in __evaluate_limits
    if not method(lim.limit, *args, **kwargs):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/strategies.py", line 157, in hit
    self.storage.incr(
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/base.py", line 25, in inner
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/limits/storage/redis.py", line 224, in incr
    return int(self.lua_incr_expire([key], [expiry, amount]))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5640, in __call__
    return client.evalsha(self.sha, len(keys), *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5849, in evalsha
    return self._evalsha("EVALSHA", sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/commands/core.py", line 5833, in _evalsha
    return self.execute_command(command, sha, numkeys, *keys_and_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 622, in execute_command
    return self._execute_command(*args, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 633, in _execute_command
    return conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 92, in call_with_retry
    raise error
  File "/opt/homebrew/lib/python3.11/site-packages/redis/retry.py", line 87, in call_with_retry
    return do()
           ^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 634, in <lambda>
    lambda: self._send_command_parse_response(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 605, in _send_command_parse_response
    return self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/client.py", line 652, in parse_response
    response = connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/connection.py", line 644, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/resp2.py", line 25, in _read_response
    raw = self._buffer.readline()
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 115, in readline
    self._read_from_socket()
  File "/opt/homebrew/lib/python3.11/site-packages/redis/_parsers/socket.py", line 68, in _read_from_socket
    raise ConnectionError(SERVER_CLOSED_CONNECTION_ERROR)
redis.exceptions.ConnectionError: Connection closed by server.
2025-07-26 16:34:52,452 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:34:52] "[35m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 500 -
2025-07-26 16:34:56,103 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 16:34:56,111 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 16:34:56,120 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-26 16:34:56,121 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-26 16:35:10,169 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:35:10] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 16:35:14,172 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:35:14] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 16:35:14,242 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:35:14] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 16:35:17,275 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 16:35:17,805 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 16:35:18,010 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 16:35:18,011 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 16:35:18,356 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:35:18] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 16:53:59,593 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:53:59] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 16:54:00,124 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 16:54:00,672 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 16:54:00,869 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 16:54:00,869 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 16:54:01,218 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 16:54:01] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 17:06:55,361 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:06:55] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 17:06:55,890 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 17:06:56,413 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 17:06:56,587 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 17:06:56,587 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 17:06:56,934 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:06:56] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 17:06:59,842 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:06:59] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 17:07:01,063 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:07:01] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-26 17:07:07,351 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:07:07] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 17:07:08,457 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:07:08] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 17:19:26,008 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:19:26] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 17:19:26,597 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 17:19:27,120 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 17:19:27,291 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 17:19:27,292 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 17:19:27,639 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:19:27] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 17:29:50,456 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:29:50] "OPTIONS /api/flow/252 HTTP/1.1" 200 -
2025-07-26 17:29:50,987 - api.flow_api - INFO - Cache miss for key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 17:29:51,509 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 17:29:51,682 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 17:29:51,683 - api.flow_api - INFO - Flow data for plubot 252 stored in cache with key flow:252:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 17:29:52,030 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:29:52] "GET /api/flow/252 HTTP/1.1" 200 -
2025-07-26 17:44:54,709 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:44:54] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 17:44:55,934 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 17:44:55] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-26 18:01:11,366 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:01:11] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 18:01:11,949 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:01:11] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-26 18:10:24,821 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 18:10:24,828 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 18:10:25,872 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-26 18:10:25,872 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-26 18:12:42,736 - api.auth - INFO - Recibida solicitud para /api/auth/register con método OPTIONS
2025-07-26 18:12:42,739 - api.auth - INFO - Respondiendo a solicitud OPTIONS para /api/auth/register
2025-07-26 18:12:42,742 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:12:42] "OPTIONS /api/auth/register HTTP/1.1" 200 -
2025-07-26 18:12:42,955 - api.auth - INFO - Recibida solicitud para /api/auth/register con método POST
2025-07-26 18:12:46,841 - api.auth - INFO - Iniciando envío de email de verificación para representative.canid.mect@letterprotect.net
2025-07-26 18:12:51,859 - api.auth - INFO - Correo de verificación encolado para envío asíncrono a representative.canid.mect@letterprotect.net
2025-07-26 18:12:52,035 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:12:52] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 201 -
2025-07-26 18:13:01,578 - api.auth - INFO - Correo asíncrono enviado exitosamente a ['representative.canid.mect@letterprotect.net']
2025-07-26 18:13:29,312 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:13:29] "GET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1MzU2NDM2NiwianRpIjoiYWI5NjY4OWYtZDdmYy00ZGNlLTk3NmQtYzA3YjhiZjBjNDgyIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6IjczIiwibmJmIjoxNzUzNTY0MzY2LCJjc3JmIjoiNDg0NTU0NDEtMjQwMC00NDgwLTkxNDMtZTRkZTAzMzcxMDA2IiwiZXhwIjoxNzUzNjUwNzY2LCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.d09CXLTN8_XhqXLkJ7uhpdgw3C3u5yGxNyRb6QV2HP4 HTTP/1.1" 200 -
2025-07-26 18:13:46,316 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:13:46] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 18:13:47,447 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:13:47] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 18:14:17,393 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:17] "OPTIONS /api/plubots/create HTTP/1.1" 200 -
2025-07-26 18:14:21,538 - services.grok_service - INFO - Successfully connected to Redis for caching.
2025-07-26 18:14:25,253 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:25] "POST /api/plubots/create HTTP/1.1" 200 -
2025-07-26 18:14:25,263 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:25] "OPTIONS /api/auth/profile HTTP/1.1" 200 -
2025-07-26 18:14:26,660 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:26] "GET /api/auth/profile HTTP/1.1" 200 -
2025-07-26 18:14:27,931 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:27] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:14:28,457 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 18:14:28,997 - api.flow_api - INFO - DB query for flows returned 0 items.
2025-07-26 18:14:29,174 - api.flow_api - INFO - DB query for edges returned 0 items.
2025-07-26 18:14:29,175 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 18:14:29,523 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:29] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:14:46,691 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:46] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:14:47,219 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'id': 'start-99000ee9', 'type': 'start', 'position': {'x': 432, 'y': 51}, 'data': {'id': 'start-99000ee9', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 432, 'y': 51}, 'dragging': False}, {'id': 'message-d5a08357', 'type': 'message', 'position': {'x': 713, 'y': 178}, 'data': {'id': 'message-d5a08357', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 713, 'y': 178}, 'dragging': False}, {'id': 'decision-0591f124', 'type': 'decision', 'position': {'x': 681, 'y': 303}, 'data': {'id': 'decision-0591f124', 'label': 'Decisión', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'text': 'Opción A', 'color': '#3498db'}, {'id': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'text': 'Opción B', 'color': '#e74c3c'}, {'id': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'text': 'Nueva condición', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 681, 'y': 303}, 'dragging': False}, {'id': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'type': 'option', 'position': {'x': 397, 'y': 603}, 'data': {'sourceNode': 'decision-0591f124', 'conditionId': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'text': 'Opción A', 'instruction': 'Opción A', 'color': '#3498db', 'lastUpdated': '2025-07-26T21:14:38.025Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125, 'selected': False, 'positionAbsolute': {'x': 397, 'y': 603}, 'dragging': False}, {'id': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'type': 'option', 'position': {'x': 708, 'y': 607}, 'data': {'sourceNode': 'decision-0591f124', 'conditionId': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'text': 'Opción B', 'instruction': 'Opción B', 'color': '#e74c3c', 'lastUpdated': '2025-07-26T21:14:38.025Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125}, {'id': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'type': 'option', 'position': {'x': 958, 'y': 607}, 'data': {'sourceNode': 'decision-0591f124', 'conditionId': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'text': 'Nueva condición', 'instruction': 'Nueva condición', 'color': '#FFA500', 'lastUpdated': '2025-07-26T21:14:38.025Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125}, {'id': 'end-f29a2c64', 'type': 'end', 'position': {'x': 761, 'y': 874}, 'data': {'id': 'end-f29a2c64', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 310, 'height': 132}], 'edges': [{'zIndex': 0, 'source': 'start-99000ee9', 'sourceHandle': 'output', 'target': 'message-d5a08357', 'targetHandle': 'default', 'id': 'reactflow__edge-start-99000ee9output-message-d5a08357default'}, {'zIndex': 0, 'source': 'message-d5a08357', 'sourceHandle': 'default', 'target': 'decision-0591f124', 'targetHandle': None, 'id': 'reactflow__edge-message-d5a08357default-decision-0591f124'}, {'id': 'edge-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'source': 'decision-0591f124', 'target': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'sourceHandle': 'output-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'source': 'decision-0591f124', 'target': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'sourceHandle': 'output-34dea18a-47e4-47d9-b330-69570f0e4c54', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'source': 'decision-0591f124', 'target': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'sourceHandle': 'output-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7source-end-f29a2c64'}, {'zIndex': 0, 'source': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54source-end-f29a2c64'}, {'zIndex': 0, 'source': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0bsource-end-f29a2c64'}]}
2025-07-26 18:14:47,219 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-26 18:14:47,918 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-26 18:14:50,395 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-26 18:14:50,395 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-26 18:14:50,568 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:50] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:14:54,636 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:54] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:14:55,160 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'id': 'start-99000ee9', 'type': 'start', 'position': {'x': 432, 'y': 51}, 'data': {'id': 'start-99000ee9', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 432, 'y': 51}, 'dragging': False}, {'id': 'message-d5a08357', 'type': 'message', 'position': {'x': 713, 'y': 178}, 'data': {'id': 'message-d5a08357', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 713, 'y': 178}, 'dragging': False}, {'id': 'decision-0591f124', 'type': 'decision', 'position': {'x': 681, 'y': 303}, 'data': {'id': 'decision-0591f124', 'label': 'Decisión', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'text': 'Opción A', 'color': '#3498db'}, {'id': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'text': 'Opción B', 'color': '#e74c3c'}, {'id': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'text': 'Nueva condición', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 681, 'y': 303}, 'dragging': False}, {'id': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'type': 'option', 'position': {'x': 397, 'y': 603}, 'data': {'sourceNode': 'decision-0591f124', 'conditionId': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'text': 'Opción A', 'instruction': 'Opción A', 'color': '#3498db', 'lastUpdated': '2025-07-26T21:14:38.025Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125, 'selected': False, 'positionAbsolute': {'x': 397, 'y': 603}, 'dragging': False}, {'id': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'type': 'option', 'position': {'x': 708, 'y': 607}, 'data': {'sourceNode': 'decision-0591f124', 'conditionId': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'text': 'Opción B', 'instruction': 'Opción B', 'color': '#e74c3c', 'lastUpdated': '2025-07-26T21:14:38.025Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125}, {'id': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'type': 'option', 'position': {'x': 958, 'y': 607}, 'data': {'sourceNode': 'decision-0591f124', 'conditionId': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'text': 'Nueva condición', 'instruction': 'Nueva condición', 'color': '#FFA500', 'lastUpdated': '2025-07-26T21:14:38.025Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 125}, {'id': 'end-f29a2c64', 'type': 'end', 'position': {'x': 761, 'y': 874}, 'data': {'id': 'end-f29a2c64', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 310, 'height': 132}], 'edges': [{'zIndex': 0, 'source': 'start-99000ee9', 'sourceHandle': 'output', 'target': 'message-d5a08357', 'targetHandle': 'default', 'id': 'reactflow__edge-start-99000ee9output-message-d5a08357default'}, {'zIndex': 0, 'source': 'message-d5a08357', 'sourceHandle': 'default', 'target': 'decision-0591f124', 'targetHandle': None, 'id': 'reactflow__edge-message-d5a08357default-decision-0591f124'}, {'id': 'edge-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'source': 'decision-0591f124', 'target': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'sourceHandle': 'output-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'source': 'decision-0591f124', 'target': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'sourceHandle': 'output-34dea18a-47e4-47d9-b330-69570f0e4c54', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'source': 'decision-0591f124', 'target': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'sourceHandle': 'output-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7source-end-f29a2c64'}, {'zIndex': 0, 'source': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54source-end-f29a2c64'}, {'zIndex': 0, 'source': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0bsource-end-f29a2c64'}]}
2025-07-26 18:14:55,161 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-26 18:14:55,871 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-26 18:14:56,574 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10660, 253, 20442, 20443, , null, null, null, 2025-07-26 21:14:49.503234, 2025-07-26 21:14:56.227269, f, reactflow__edge-start-99000ee9output-message-d5a08357default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10660, 253, 20442, 20443, , null, null, null, 2025-07-26 21:14:49.503234, 2025-07-26 21:14:56.227269, f, reactflow__edge-start-99000ee9output-message-d5a08357default, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 26, 21, 14, 56, 227269), 'flow_edges_id': 10660}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-26 18:14:56,588 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 253
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10660, 253, 20442, 20443, , null, null, null, 2025-07-26 21:14:49.503234, 2025-07-26 21:14:56.227269, f, reactflow__edge-start-99000ee9output-message-d5a08357default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10660, 253, 20442, 20443, , null, null, null, 2025-07-26 21:14:49.503234, 2025-07-26 21:14:56.227269, f, reactflow__edge-start-99000ee9output-message-d5a08357default, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 26, 21, 14, 56, 227269), 'flow_edges_id': 10660}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-26 18:14:56,593 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 253
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10660, 253, 20442, 20443, , null, null, null, 2025-07-26 21:14:49.503234, 2025-07-26 21:14:56.227269, f, reactflow__edge-start-99000ee9output-message-d5a08357default, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10660, 253, 20442, 20443, , null, null, null, 2025-07-26 21:14:49.503234, 2025-07-26 21:14:56.227269, f, reactflow__edge-start-99000ee9output-message-d5a08357default, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 26, 21, 14, 56, 227269), 'flow_edges_id': 10660}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-26 18:14:56,768 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:14:56] "[35m[1mPATCH /api/flow/253 HTTP/1.1[0m" 500 -
2025-07-26 18:29:29,946 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:29:29] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 18:29:31,185 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:29:31] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-26 18:33:31,137 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:33:31] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 18:33:32,252 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:33:32] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 18:33:32,310 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:33:32] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:33:32,851 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 18:33:33,379 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 18:33:33,554 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 18:33:33,554 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 18:33:33,905 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:33:33] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:41:35,709 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:41:35] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:41:36,230 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 18:41:36,760 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 18:41:36,935 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 18:41:36,935 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 18:41:37,281 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:41:37] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:46:07,199 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:46:07] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:46:07,726 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 18:46:07,900 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:46:07] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 18:46:09,215 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 18:46:09,390 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 18:46:09] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:38:36,466 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 21:38:36,474 - root - INFO - Sistema de logging configurado correctamente
2025-07-26 21:38:36,490 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-26 21:38:36,490 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-26 21:40:00,762 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:00] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:40:00,765 - app - WARNING - Authentication error: Signature has expired
2025-07-26 21:40:00,766 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:00] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-26 21:40:00,779 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:00] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-26 21:40:00,780 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:00] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-26 21:40:00,783 - app - WARNING - Authentication error: Signature has expired
2025-07-26 21:40:00,783 - app - WARNING - Authentication error: Signature has expired
2025-07-26 21:40:00,784 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:00] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-26 21:40:00,784 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:00] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-26 21:40:00,792 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:00] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 21:40:00,794 - app - WARNING - Authentication error: Signature has expired
2025-07-26 21:40:00,795 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:00] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-26 21:40:04,580 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:04] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 21:40:08,588 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:08] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 21:40:08,621 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:08] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:40:11,632 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 21:40:12,166 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 21:40:12,342 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 21:40:12,343 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 21:40:12,686 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:40:12] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:42:48,455 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:42:48] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:42:48,977 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 21:42:49,149 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:42:49] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:53:45,160 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:53:45] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:53:45,681 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 21:53:46,210 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 21:53:46,385 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 21:53:46,385 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 21:53:46,730 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:53:46] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:55:36,629 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:55:36] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:55:37,150 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 21:55:37,321 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:55:37] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:58:38,990 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:58:38] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 21:58:39,517 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 21:58:39,692 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 21:58:39] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:01:22,762 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:01:22] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 22:01:23,984 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:01:23] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-26 22:37:18,554 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:37:18] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 22:37:19,677 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:37:19] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 22:39:21,506 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:39:21] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:39:22,025 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 22:39:22,548 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 22:39:23,262 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 22:39:23,263 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 22:39:23,606 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:39:23] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:47:50,251 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:47:50] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:47:50,769 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 22:47:51,297 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 22:47:51,471 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 22:47:51,472 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 22:47:51,816 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:47:51] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:54:06,237 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:54:06] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:54:06,769 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 22:54:07,296 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 22:54:07,469 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 22:54:07,470 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 22:54:07,813 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:54:07] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:54:45,854 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:54:45] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:54:46,375 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 22:54:46,546 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:54:46] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:54:58,422 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:54:58] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:54:58,938 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 22:54:59,110 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:54:59] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:55:08,019 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:55:08] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:55:08,547 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 22:55:08,718 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:55:08] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:56:30,962 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:56:30] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:56:31,530 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 22:56:31,700 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:56:31] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:57:01,068 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:57:01] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 22:57:01,582 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 22:57:01,756 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 22:57:01] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:00:16,183 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:00:16] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:00:16,712 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 23:00:17,254 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 23:00:17,446 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 23:00:17,447 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 23:00:17,793 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:00:17] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:02:48,838 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:02:48] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:02:49,356 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 23:02:49,527 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:02:49] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:04:20,957 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:04:20] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:04:21,475 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 23:04:21,648 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:04:21] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:04:39,561 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:04:39] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:04:40,080 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 23:04:40,251 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:04:40] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:11:41,300 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:11:41] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:11:41,831 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 23:11:42,361 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 23:11:42,537 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 23:11:42,537 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 23:11:42,883 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:11:42] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:16:30,116 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:16:30] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:16:30,631 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 23:16:30,802 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:16:30] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:19:22,936 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:19:22] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:19:23,452 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 23:19:23,980 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 23:19:24,155 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 23:19:24,156 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 23:19:24,501 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:19:24] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:27:46,669 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:27:46] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:27:47,183 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 23:27:48,093 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 23:27:48,269 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 23:27:48,270 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 23:27:48,614 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:27:48] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:27:52,317 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:27:52] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:27:52,830 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 23:27:53,000 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:27:53] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:27:56,328 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 23:27:56,501 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:27:56] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:37:13,132 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:37:13] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:37:13,651 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 23:37:14,181 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 23:37:14,356 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 23:37:14,357 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 23:37:14,704 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:37:14] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:41:59,666 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:41:59] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:41:59,669 - app - WARNING - Authentication error: Signature has expired
2025-07-26 23:41:59,669 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:41:59] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-26 23:41:59,686 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:41:59] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-26 23:41:59,687 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:41:59] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-26 23:41:59,691 - app - WARNING - Authentication error: Signature has expired
2025-07-26 23:41:59,692 - app - WARNING - Authentication error: Signature has expired
2025-07-26 23:41:59,692 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:41:59] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-26 23:41:59,692 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:41:59] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-26 23:41:59,702 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:41:59] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-26 23:41:59,706 - app - WARNING - Authentication error: Signature has expired
2025-07-26 23:41:59,706 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:41:59] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-26 23:45:11,295 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:45:11] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-26 23:45:12,386 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:45:12] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-26 23:54:07,930 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:54:07] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:54:08,474 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 23:54:09,000 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 23:54:09,177 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 23:54:09,178 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 23:54:09,524 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:54:09] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:54:24,753 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:54:24] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:54:25,288 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-26 23:54:25,459 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:54:25] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:57:21,117 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:57:21] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:57:21,642 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-99000ee9', 'label': 'Inicio'}, 'id': 'start-99000ee9', 'position': {'x': 432, 'y': 51}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'id': 'message-d5a08357', 'label': 'Mensaje'}, 'id': 'message-d5a08357', 'position': {'x': 713, 'y': 178}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-0591f124', 'label': 'Decisión'}, 'id': 'decision-0591f124', 'position': {'x': 681, 'y': 303}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'instruction': 'Opción A', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Opción A'}, 'id': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'position': {'x': 397, 'y': 603}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'color': '#e74c3c', 'conditionId': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'instruction': 'Opción B', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Opción B'}, 'id': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'position': {'x': 708, 'y': 607}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'color': '#FFA500', 'conditionId': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Nueva condición'}, 'id': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'position': {'x': 958, 'y': 607}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'id': 'end-f29a2c64', 'label': 'Fin'}, 'id': 'end-f29a2c64', 'position': {'x': 761, 'y': 874}, 'type': 'end', 'width': 310, 'height': 132}], 'edges': [{'animated': True, 'id': '10660', 'label': '', 'source': 'start-99000ee9', 'target': 'message-d5a08357', 'type': 'default'}, {'animated': True, 'id': '10661', 'label': '', 'source': 'message-d5a08357', 'target': 'decision-0591f124', 'type': 'eliteEdge'}, {'animated': True, 'id': '10662', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'target': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10663', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-34dea18a-47e4-47d9-b330-69570f0e4c54', 'target': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10664', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'target': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10665', 'label': '', 'source': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}, {'animated': True, 'id': '10666', 'label': '', 'source': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}, {'animated': True, 'id': '10667', 'label': '', 'source': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}]}
2025-07-26 23:57:21,642 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-26 23:57:22,339 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-26 23:57:24,428 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-26 23:57:24,429 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-26 23:57:24,601 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:57:24] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:57:41,360 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:57:41] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-26 23:57:41,361 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:57:41] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-26 23:57:41,365 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:57:41] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-26 23:57:41,366 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:57:41] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-26 23:57:51,116 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:57:51] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-26 23:57:51,633 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-26 23:57:52,159 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-26 23:57:52,332 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-26 23:57:52,333 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-26 23:57:52,677 - werkzeug - INFO - 127.0.0.1 - - [26/Jul/2025 23:57:52] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:08:35,946 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:08:35] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:08:36,489 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:08:37,021 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 00:08:37,196 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-27 00:08:37,197 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:08:37,541 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:08:37] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:10:30,970 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:10:30] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:10:31,499 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-99000ee9', 'label': 'Inicio'}, 'id': 'start-99000ee9', 'position': {'x': 432, 'y': 51}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'id': 'message-d5a08357', 'label': 'Mensaje'}, 'id': 'message-d5a08357', 'position': {'x': 713, 'y': 178}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-0591f124', 'label': 'Decisión'}, 'id': 'decision-0591f124', 'position': {'x': 681, 'y': 303}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'instruction': 'Opción A', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Opción A'}, 'id': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'position': {'x': 397, 'y': 603}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'color': '#e74c3c', 'conditionId': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'instruction': 'Opción B', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Opción B'}, 'id': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'position': {'x': 708, 'y': 607}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'color': '#FFA500', 'conditionId': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Nueva condición'}, 'id': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'position': {'x': 958, 'y': 607}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'id': 'end-f29a2c64', 'label': 'Fin'}, 'id': 'end-f29a2c64', 'position': {'x': 761, 'y': 874}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10668', 'label': '', 'source': 'start-99000ee9', 'target': 'message-d5a08357', 'type': 'default'}, {'animated': True, 'id': '10669', 'label': '', 'source': 'message-d5a08357', 'target': 'decision-0591f124', 'type': 'eliteEdge'}, {'animated': True, 'id': '10670', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'target': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10671', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-34dea18a-47e4-47d9-b330-69570f0e4c54', 'target': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10672', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'target': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10673', 'label': '', 'source': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}, {'animated': True, 'id': '10674', 'label': '', 'source': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}, {'animated': True, 'id': '10675', 'label': '', 'source': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}]}
2025-07-27 00:10:31,500 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 00:10:32,200 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 00:10:33,576 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:10:33,751 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:10:33] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:10:34,297 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 00:10:34,297 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 00:10:34,312 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Cargando nombre...', 'nodes': [], 'edges': [], 'viewport': {'x': 0, 'y': 0, 'zoom': 1}}
2025-07-27 00:10:34,312 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=0, edges_count=0, name='N/A'
2025-07-27 00:10:34,469 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:10:34] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:10:35,010 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=0, edges_count=0, name='None'
2025-07-27 00:10:36,245 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:10:36] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:10:36,763 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-99000ee9', 'label': 'Inicio'}, 'id': 'start-99000ee9', 'position': {'x': 432, 'y': 51}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'id': 'message-d5a08357', 'label': 'Mensaje'}, 'id': 'message-d5a08357', 'position': {'x': 713, 'y': 178}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-0591f124', 'label': 'Decisión'}, 'id': 'decision-0591f124', 'position': {'x': 681, 'y': 303}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#3498db', 'conditionId': 'f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'instruction': 'Opción A', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Opción A'}, 'id': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'position': {'x': 397, 'y': 603}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'color': '#e74c3c', 'conditionId': '34dea18a-47e4-47d9-b330-69570f0e4c54', 'instruction': 'Opción B', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Opción B'}, 'id': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'position': {'x': 708, 'y': 607}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'color': '#FFA500', 'conditionId': 'condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-26T21:14:38.025Z', 'sourceNode': 'decision-0591f124', 'text': 'Nueva condición'}, 'id': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'position': {'x': 958, 'y': 607}, 'type': 'option', 'width': 320, 'height': 124}, {'data': {'id': 'end-f29a2c64', 'label': 'Fin'}, 'id': 'end-f29a2c64', 'position': {'x': 761, 'y': 874}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10668', 'label': '', 'source': 'start-99000ee9', 'target': 'message-d5a08357', 'type': 'default'}, {'animated': True, 'id': '10669', 'label': '', 'source': 'message-d5a08357', 'target': 'decision-0591f124', 'type': 'eliteEdge'}, {'animated': True, 'id': '10670', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'target': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10671', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-34dea18a-47e4-47d9-b330-69570f0e4c54', 'target': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10672', 'label': '', 'source': 'decision-0591f124', 'sourceHandle': 'output-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'target': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10673', 'label': '', 'source': 'option-decision-0591f124-f9c488f2-49ab-4733-aa79-5fadf8808fc7', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}, {'animated': True, 'id': '10674', 'label': '', 'source': 'option-decision-0591f124-34dea18a-47e4-47d9-b330-69570f0e4c54', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}, {'animated': True, 'id': '10675', 'label': '', 'source': 'option-decision-0591f124-condition-e3725b5b-bb68-45a3-aa5d-9c4ab3872c0b', 'sourceHandle': 'source', 'target': 'end-f29a2c64', 'type': 'eliteEdge'}]}
2025-07-27 00:10:36,764 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 00:10:38,424 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 00:10:41,891 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 00:10:41,892 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 00:10:42,064 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:10:42] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:10:42,241 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 948, in _emit_update_statements
    raise orm_exc.StaleDataError(
sqlalchemy.orm.exc.StaleDataError: UPDATE statement on table 'flow_edges' expected to update 2 row(s); 0 were matched.
2025-07-27 00:10:42,251 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 253
Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 948, in _emit_update_statements
    raise orm_exc.StaleDataError(
sqlalchemy.orm.exc.StaleDataError: UPDATE statement on table 'flow_edges' expected to update 2 row(s); 0 were matched.
2025-07-27 00:10:42,255 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 253
Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 948, in _emit_update_statements
    raise orm_exc.StaleDataError(
sqlalchemy.orm.exc.StaleDataError: UPDATE statement on table 'flow_edges' expected to update 2 row(s); 0 were matched.
2025-07-27 00:10:42,428 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:10:42] "[35m[1mPATCH /api/flow/253 HTTP/1.1[0m" 500 -
2025-07-27 00:18:18,302 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:18:18] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:18:18,829 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:18:19,356 - api.flow_api - INFO - DB query for flows returned 0 items.
2025-07-27 00:18:19,530 - api.flow_api - INFO - DB query for edges returned 0 items.
2025-07-27 00:18:19,530 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:18:19,899 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:18:19] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:22:12,610 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:22:12] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:22:13,135 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:22:13,308 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:22:13] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:24:04,811 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:24:04] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:24:05,327 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:24:05,848 - api.flow_api - INFO - DB query for flows returned 0 items.
2025-07-27 00:24:06,019 - api.flow_api - INFO - DB query for edges returned 0 items.
2025-07-27 00:24:06,019 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:24:06,362 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:24:06] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:24:11,519 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:24:11] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:24:12,048 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:24:12,220 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:24:12] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:24:35,011 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:24:35] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:24:35,535 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'id': 'start-8d721f37', 'type': 'start', 'position': {'x': 479, 'y': 77}, 'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 479, 'y': 77}, 'dragging': False}, {'id': 'message-b4b27aeb', 'type': 'message', 'position': {'x': 769, 'y': 232}, 'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 769, 'y': 232}, 'dragging': False}, {'id': 'decision-f31075d6', 'type': 'decision', 'position': {'x': 722, 'y': 364}, 'data': {'id': 'decision-f31075d6', 'label': 'Decisión', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A', 'color': '#3498db'}, {'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B', 'color': '#e74c3c'}, {'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 722, 'y': 364}, 'dragging': False}, {'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'type': 'option', 'position': {'x': 472, 'y': 564}, 'data': {'sourceNode': 'decision-f31075d6', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A', 'instruction': 'Opción A', 'color': '#3498db', 'lastUpdated': '2025-07-27T03:24:21.859Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124}, {'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'type': 'option', 'position': {'x': 722, 'y': 564}, 'data': {'sourceNode': 'decision-f31075d6', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B', 'instruction': 'Opción B', 'color': '#e74c3c', 'lastUpdated': '2025-07-27T03:24:21.859Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124}, {'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'type': 'option', 'position': {'x': 972, 'y': 564}, 'data': {'sourceNode': 'decision-f31075d6', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición', 'instruction': 'Nueva condición', 'color': '#FFA500', 'lastUpdated': '2025-07-27T03:24:21.859Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124}, {'id': 'end-1227c191', 'type': 'end', 'position': {'x': 805, 'y': 860}, 'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 309, 'height': 132}], 'edges': [{'zIndex': 0, 'source': 'start-8d721f37', 'sourceHandle': 'output', 'target': 'message-b4b27aeb', 'targetHandle': 'default', 'id': 'reactflow__edge-start-8d721f37output-message-b4b27aebdefault'}, {'zIndex': 0, 'source': 'message-b4b27aeb', 'sourceHandle': 'default', 'target': 'decision-f31075d6', 'targetHandle': None, 'id': 'reactflow__edge-message-b4b27aebdefault-decision-f31075d6'}, {'id': 'edge-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'source': 'decision-f31075d6', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'source': 'decision-f31075d6', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'source': 'decision-f31075d6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883source-end-1227c191'}, {'zIndex': 0, 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415source-end-1227c191'}, {'zIndex': 0, 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6source-end-1227c191'}]}
2025-07-27 00:24:35,536 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 00:24:36,233 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 00:24:38,733 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 00:24:38,733 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 00:24:38,905 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:24:38] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:26:56,824 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:26:56] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:26:57,353 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'id': 'start-8d721f37', 'type': 'start', 'position': {'x': 479, 'y': 77}, 'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 479, 'y': 77}, 'dragging': False}, {'id': 'message-b4b27aeb', 'type': 'message', 'position': {'x': 769, 'y': 232}, 'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 769, 'y': 232}, 'dragging': False}, {'id': 'decision-f31075d6', 'type': 'decision', 'position': {'x': 722, 'y': 364}, 'data': {'id': 'decision-f31075d6', 'label': 'Decisión', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A', 'color': '#3498db'}, {'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B', 'color': '#e74c3c'}, {'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 722, 'y': 364}, 'dragging': False}, {'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'type': 'option', 'position': {'x': 472, 'y': 564}, 'data': {'sourceNode': 'decision-f31075d6', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A', 'instruction': 'Opción A', 'color': '#3498db', 'lastUpdated': '2025-07-27T03:24:21.859Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124}, {'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'type': 'option', 'position': {'x': 722, 'y': 564}, 'data': {'sourceNode': 'decision-f31075d6', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B', 'instruction': 'Opción B', 'color': '#e74c3c', 'lastUpdated': '2025-07-27T03:24:21.859Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124}, {'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'type': 'option', 'position': {'x': 972, 'y': 564}, 'data': {'sourceNode': 'decision-f31075d6', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición', 'instruction': 'Nueva condición', 'color': '#FFA500', 'lastUpdated': '2025-07-27T03:24:21.859Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124}, {'id': 'end-1227c191', 'type': 'end', 'position': {'x': 805, 'y': 860}, 'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 309, 'height': 132}], 'edges': [{'zIndex': 0, 'source': 'start-8d721f37', 'sourceHandle': 'output', 'target': 'message-b4b27aeb', 'targetHandle': 'default', 'id': 'reactflow__edge-start-8d721f37output-message-b4b27aebdefault'}, {'zIndex': 0, 'source': 'message-b4b27aeb', 'sourceHandle': 'default', 'target': 'decision-f31075d6', 'targetHandle': None, 'id': 'reactflow__edge-message-b4b27aebdefault-decision-f31075d6'}, {'id': 'edge-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'source': 'decision-f31075d6', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'source': 'decision-f31075d6', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'source': 'decision-f31075d6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883source-end-1227c191'}, {'zIndex': 0, 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415source-end-1227c191'}, {'zIndex': 0, 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6source-end-1227c191'}]}
2025-07-27 00:26:57,354 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 00:26:58,047 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 00:26:58,763 - utils.transaction_utils - ERROR - Error al actualizar flujo completo
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10684, 253, 20449, 20450, , null, null, null, 2025-07-27 03:24:37.8554, 2025-07-27 03:26:58.391872, f, reactflow__edge-start-8d721f37output-message-b4b27aebdefault, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10684, 253, 20449, 20450, , null, null, null, 2025-07-27 03:24:37.8554, 2025-07-27 03:26:58.391872, f, reactflow__edge-start-8d721f37output-message-b4b27aebdefault, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 27, 3, 26, 58, 391872), 'flow_edges_id': 10684}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 00:26:58,771 - utils.transaction_utils - ERROR - Error al actualizar flujo (PATCH) para plubot 253
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10684, 253, 20449, 20450, , null, null, null, 2025-07-27 03:24:37.8554, 2025-07-27 03:26:58.391872, f, reactflow__edge-start-8d721f37output-message-b4b27aebdefault, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 49, in atomic_transaction
    yield session
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10684, 253, 20449, 20450, , null, null, null, 2025-07-27 03:24:37.8554, 2025-07-27 03:26:58.391872, f, reactflow__edge-start-8d721f37output-message-b4b27aebdefault, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 27, 3, 26, 58, 391872), 'flow_edges_id': 10684}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 00:26:58,773 - api.flow_api - ERROR - Error inesperado en PATCH para plubot 253
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10684, 253, 20449, 20450, , null, null, null, 2025-07-27 03:24:37.8554, 2025-07-27 03:26:58.391872, f, reactflow__edge-start-8d721f37output-message-b4b27aebdefault, output, default, null, t).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/flow_api.py", line 311, in patch_flow
    update_full_flow(session, plubot_id, flow_data_for_update)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 99, in wrapper
    with atomic_transaction(session, error_message):
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Users/flow/Desktop/Plubot/plubot-backend/utils/transaction_utils.py", line 50, in atomic_transaction
    session.commit()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "edge_type" of relation "flow_edges" violates not-null constraint
DETALLE:  Failing row contains (10684, 253, 20449, 20450, , null, null, null, 2025-07-27 03:24:37.8554, 2025-07-27 03:26:58.391872, f, reactflow__edge-start-8d721f37output-message-b4b27aebdefault, output, default, null, t).

[SQL: UPDATE flow_edges SET edge_type=%(edge_type)s, updated_at=%(updated_at)s WHERE flow_edges.id = %(flow_edges_id)s]
[parameters: {'edge_type': None, 'updated_at': datetime.datetime(2025, 7, 27, 3, 26, 58, 391872), 'flow_edges_id': 10684}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 00:26:58,950 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:26:58] "[35m[1mPATCH /api/flow/253 HTTP/1.1[0m" 500 -
2025-07-27 00:27:03,478 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:27:03] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:27:04,005 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:27:04,557 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 00:27:04,729 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-27 00:27:04,730 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:27:05,074 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:27:05] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:32:15,110 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:32:15] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:32:15,628 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:32:16,310 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 00:32:16,482 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-27 00:32:16,482 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:32:16,827 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:32:16] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:34:25,633 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:34:25] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:34:26,157 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:34:26,333 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:34:26] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:35:18,430 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:35:18] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:35:18,949 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:35:19,121 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:35:19] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:38:41,760 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:38:41] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:38:42,282 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:38:42,806 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 00:38:42,980 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-27 00:38:42,981 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:38:43,325 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:38:43] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:39:34,661 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:39:34] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:39:35,191 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:39:35,365 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:39:35] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:48:14,876 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:14] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:48:14,878 - app - WARNING - Authentication error: Signature has expired
2025-07-27 00:48:14,878 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:14] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-27 00:48:14,962 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:14] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 00:48:14,962 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:14] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 00:48:14,965 - app - WARNING - Authentication error: Signature has expired
2025-07-27 00:48:14,965 - app - WARNING - Authentication error: Signature has expired
2025-07-27 00:48:14,965 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:14] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 00:48:14,965 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:14] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 00:48:14,980 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:14] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 00:48:14,983 - app - WARNING - Authentication error: Signature has expired
2025-07-27 00:48:14,984 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:14] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 00:48:24,977 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:24] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 00:48:26,082 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:26] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 00:48:26,138 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:26] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:48:26,657 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:48:27,185 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 00:48:27,358 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-27 00:48:27,358 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:48:27,711 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:27] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:48:37,852 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:37] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:48:38,384 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 479, 'y': 77}, 'type': 'start'}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 769, 'y': 232}, 'type': 'message'}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 722, 'y': 364}, 'type': 'decision'}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 472, 'y': 564}, 'type': 'option'}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 722, 'y': 564}, 'type': 'option'}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 972, 'y': 564}, 'type': 'option'}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 805, 'y': 860}, 'type': 'end'}], 'edges': [{'animated': True, 'id': '10684', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10685', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10686', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10687', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10688', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10689', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10690', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10691', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 00:48:38,385 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 00:48:39,068 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 00:48:41,546 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 00:48:41,546 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 00:48:41,721 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:41] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:48:42,192 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:48:42,717 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 00:48:42,891 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-27 00:48:42,891 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:48:43,241 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:48:43] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:50:43,426 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:50:43] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:50:43,945 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:50:44,118 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:50:44] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:52:04,306 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:52:04] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:52:04,865 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:52:05,039 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:52:05] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:53:30,086 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:53:30] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:53:30,613 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:53:30,787 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:53:30] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:55:21,173 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:55:21] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:55:21,700 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 00:55:22,375 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 00:55:22,558 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-27 00:55:22,558 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 00:55:22,901 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:55:22] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:55:27,243 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:55:27] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:55:27,763 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:55:27,936 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:55:27] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:55:55,690 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:55:55] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 00:55:56,211 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 00:55:56,386 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 00:55:56] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:05:59,258 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:05:59] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:05:59,826 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 01:06:00,352 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 01:06:00,525 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-27 01:06:00,525 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 01:06:01,031 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:06:01] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:06:07,276 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:06:07] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:06:07,801 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 01:06:07,974 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:06:07] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:09:23,810 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:09:23] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:09:24,343 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 479, 'y': 77}, 'type': 'start'}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 769, 'y': 232}, 'type': 'message'}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 722, 'y': 364}, 'type': 'decision'}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 472, 'y': 564}, 'type': 'option'}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 722, 'y': 564}, 'type': 'option'}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 972, 'y': 564}, 'type': 'option'}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 805, 'y': 860}, 'type': 'end'}], 'edges': [{'animated': True, 'id': '10692', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10693', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10694', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10695', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10696', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10697', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10698', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10699', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:09:24,344 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 01:09:25,032 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 01:09:25,538 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 479, 'y': 77}, 'type': 'start'}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 769, 'y': 232}, 'type': 'message'}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 722, 'y': 364}, 'type': 'decision'}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 472, 'y': 564}, 'type': 'option'}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 722, 'y': 564}, 'type': 'option'}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 972, 'y': 564}, 'type': 'option'}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 805, 'y': 860}, 'type': 'end'}], 'edges': [{'animated': True, 'id': '10692', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10693', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10694', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10695', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10696', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10697', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10698', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10699', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:09:25,539 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 01:09:26,233 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 01:09:26,811 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 479, 'y': 77}, 'type': 'start'}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 769, 'y': 232}, 'type': 'message'}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 722, 'y': 364}, 'type': 'decision'}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 472, 'y': 564}, 'type': 'option'}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 722, 'y': 564}, 'type': 'option'}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 972, 'y': 564}, 'type': 'option'}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 805, 'y': 860}, 'type': 'end'}], 'edges': [{'animated': True, 'id': '10692', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10693', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10694', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10695', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10696', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10697', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10698', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10699', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:09:26,811 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 01:09:27,109 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:09:27,109 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:09:27,281 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:09:27] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:09:28,456 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 01:09:28,949 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:09:28,949 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:09:29,122 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:09:29] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:09:29,155 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:09:29] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:09:29,673 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 479, 'y': 77}, 'type': 'start'}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 769, 'y': 232}, 'type': 'message'}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 722, 'y': 364}, 'type': 'decision'}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 472, 'y': 564}, 'type': 'option'}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 722, 'y': 564}, 'type': 'option'}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 972, 'y': 564}, 'type': 'option'}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 805, 'y': 860}, 'type': 'end'}], 'edges': [{'animated': True, 'id': '10692', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10693', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10694', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10695', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10696', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10697', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10698', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10699', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:09:29,674 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-27 01:09:29,842 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:09:29,842 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:09:30,014 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:09:30] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:09:30,368 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-27 01:09:31,092 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:09:31,092 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:09:31,266 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:09:31] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:11:20,728 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:11:20] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:11:21,250 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 01:11:22,031 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 01:11:22,204 - api.flow_api - INFO - DB query for edges returned 16 items.
2025-07-27 01:11:22,205 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 01:11:22,548 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:11:22] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:12:18,194 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:12:18] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:12:18,719 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 479, 'y': 77}, 'type': 'start'}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 769, 'y': 232}, 'type': 'message'}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 722, 'y': 364}, 'type': 'decision'}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 472, 'y': 564}, 'type': 'option'}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 722, 'y': 564}, 'type': 'option'}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 972, 'y': 564}, 'type': 'option'}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 805, 'y': 860}, 'type': 'end'}, {'id': 'message-bfcad475', 'type': 'message', 'position': {'x': -103.70185057556787, 'y': 412.3939062034059}, 'data': {'id': 'message-bfcad475', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False}], 'edges': [{'animated': True, 'id': '10708', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10709', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10710', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10711', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10712', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10713', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10714', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10715', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10700', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10701', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10702', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10703', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10704', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10705', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10706', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10707', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:12:18,719 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=8, edges_count=16, name='N/A'
2025-07-27 01:12:19,867 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=8, edges_count=16, name='None'
2025-07-27 01:12:22,125 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:12:22,125 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:12:22,297 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:12:22] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:14:07,357 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:14:07] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:14:07,875 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 01:14:09,518 - api.flow_api - INFO - DB query for flows returned 8 items.
2025-07-27 01:14:09,696 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 01:14:09,697 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 01:14:10,040 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:14:10] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:14:21,413 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:14:21] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:14:21,939 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 01:14:22,113 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:14:22] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:15:59,929 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:15:59] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:16:00,451 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 01:16:00,625 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:16:00] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:17:21,184 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:17:21] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:17:21,701 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 01:17:21,875 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:17:21] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:18:35,418 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:18:35] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:18:35,941 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 01:18:36,114 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:18:36] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:19:32,153 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:19:32] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:19:32,681 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 01:19:33,675 - api.flow_api - INFO - DB query for flows returned 8 items.
2025-07-27 01:19:33,849 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 01:19:33,851 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 01:19:34,199 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:19:34] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:20:03,415 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:20:03] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:20:03,936 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 528.117956178393, 'y': -98.78143628066249}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 528.117956178393, 'y': -98.78143628066249}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 816.2443386497504, 'y': 89.38043225451673}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 816.2443386497504, 'y': 89.38043225451673}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión', 'isEditing': False}, 'id': 'decision-f31075d6', 'position': {'x': 768.3951374949661, 'y': 276.19452881483625}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 768.3951374949661, 'y': 276.19452881483625}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122, 'selected': True, 'positionAbsolute': {'x': 383.212770904267, 'y': 675.553185274126}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'dragging': False}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10708', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10709', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10710', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10711', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10712', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10713', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10714', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10715', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10724', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10725', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10726', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10727', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10728', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10729', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10730', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10731', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:20:03,937 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 01:20:04,629 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 01:20:10,864 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:20:10,864 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:20:11,036 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:20:11] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:26:22,654 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:26:22] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:26:23,179 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 552.7802139567339, 'y': -28.317842628260067}, 'type': 'start', 'width': 198, 'height': 76, 'selected': True, 'positionAbsolute': {'x': 552.7802139567339, 'y': -28.317842628260067}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 788.0589011887894, 'y': 143.98971733512863}, 'type': 'message', 'width': 178, 'height': 58, 'selected': False, 'positionAbsolute': {'x': 788.0589011887894, 'y': 143.98971733512863}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión', 'isEditing': False}, 'id': 'decision-f31075d6', 'position': {'x': 768.3951374949661, 'y': 276.19452881483625}, 'type': 'decision', 'width': 198, 'height': 76, 'selected': False, 'positionAbsolute': {'x': 768.3951374949661, 'y': 276.19452881483625}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 198, 'height': 76, 'selected': False, 'positionAbsolute': {'x': 383.212770904267, 'y': 675.553185274126}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'type': 'option', 'width': 198, 'height': 76, 'selected': False, 'positionAbsolute': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 198, 'height': 76, 'selected': False, 'positionAbsolute': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'dragging': False}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 198, 'height': 76, 'selected': False, 'positionAbsolute': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10708', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10709', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10710', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10711', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10712', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10713', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10714', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10715', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10724', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10725', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10726', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10727', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10728', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10729', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10730', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10731', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:26:23,180 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 01:26:23,890 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 01:26:24,375 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 552.7802139567339, 'y': -28.317842628260067}, 'type': 'start', 'width': 231, 'height': 158, 'selected': True, 'positionAbsolute': {'x': 552.7802139567339, 'y': -28.317842628260067}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 788.0589011887894, 'y': 143.98971733512863}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 788.0589011887894, 'y': 143.98971733512863}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión', 'isEditing': False}, 'id': 'decision-f31075d6', 'position': {'x': 768.3951374949661, 'y': 276.19452881483625}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 768.3951374949661, 'y': 276.19452881483625}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 383.212770904267, 'y': 675.553185274126}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'dragging': False}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10708', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10709', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10710', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10711', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10712', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10713', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10714', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10715', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10724', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10725', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10726', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10727', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10728', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10729', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10730', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10731', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:26:24,377 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 01:26:25,069 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 01:26:26,464 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:26:26,465 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:26:26,638 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:26:26] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:26:26,986 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:26:26,987 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:26:27,159 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:26:27] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:26:28,061 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 544.3227039651457, 'y': -24.69319548900802}, 'type': 'start', 'width': 231, 'height': 158, 'selected': True, 'positionAbsolute': {'x': 544.3227039651457, 'y': -24.69319548900802}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 788.0589011887894, 'y': 143.98971733512863}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 788.0589011887894, 'y': 143.98971733512863}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión', 'isEditing': False}, 'id': 'decision-f31075d6', 'position': {'x': 768.3951374949661, 'y': 276.19452881483625}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 768.3951374949661, 'y': 276.19452881483625}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 383.212770904267, 'y': 675.553185274126}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'dragging': False}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10708', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10709', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10710', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10711', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10712', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10713', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10714', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10715', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10724', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10725', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10726', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10727', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10728', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10729', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10730', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10731', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:26:28,062 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 01:26:28,757 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 01:26:29,479 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:26:29,479 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:26:29,652 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:26:29] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:26:35,445 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:26:35] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:26:35,973 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 544.3227039651457, 'y': -24.69319548900802}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 544.3227039651457, 'y': -24.69319548900802}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 797.7246268934616, 'y': 130.6993444912044}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 797.7246268934616, 'y': 130.6993444912044}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión', 'isEditing': False}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 299.15062736343265}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': True, 'positionAbsolute': {'x': 778.0608631996382, 'y': 299.15062736343265}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 383.212770904267, 'y': 675.553185274126}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 737.9361693248751, 'y': 604.9787211211076}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'dragging': False}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10708', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10709', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10710', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10711', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10712', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10713', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10714', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10715', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10724', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10725', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10726', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10727', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10728', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10729', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10730', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10731', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:26:35,974 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 01:26:36,663 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 01:26:37,526 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:26:37,527 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:26:37,701 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:26:37] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:26:38,058 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 544.3227039651457, 'y': -24.69319548900802}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 544.3227039651457, 'y': -24.69319548900802}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 797.7246268934616, 'y': 130.6993444912044}, 'type': 'message', 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 797.7246268934616, 'y': 130.6993444912044}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'label': 'Decisión', 'isEditing': False}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 299.15062736343265}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 778.0608631996382, 'y': 299.15062736343265}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 383.212770904267, 'y': 675.553185274126}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122, 'selected': True, 'positionAbsolute': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'dragging': False}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10708', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10709', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10710', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10711', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10712', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10713', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10714', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10715', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10724', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10725', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10726', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10727', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10728', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10729', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10730', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10731', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 01:26:38,059 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 01:26:38,756 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 01:26:39,455 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 01:26:39,455 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 01:26:39,627 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:26:39] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:30:57,911 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:30:57] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:30:58,431 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 01:31:00,017 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 01:31:00,191 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 01:31:00,192 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 01:31:00,543 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:31:00] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:33:43,047 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:33:43] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:33:43,570 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 01:33:43,743 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:33:43] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:55:21,869 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:55:21] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 01:55:21,873 - app - WARNING - Authentication error: Signature has expired
2025-07-27 01:55:21,873 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:55:21] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 01:55:24,325 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:55:24] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 01:55:25,425 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:55:25] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 01:57:15,924 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:57:15] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 01:57:16,444 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 01:57:17,598 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 01:57:17,774 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 01:57:17,774 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 01:57:18,120 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 01:57:18] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:13:52,157 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:13:52] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:13:52,677 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 02:13:53,520 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 02:13:53,695 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 02:13:53,696 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 02:13:54,041 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:13:54] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:14:00,734 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:14:00] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:14:01,289 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 02:14:01,460 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:14:01] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:14:34,581 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:14:34] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:14:35,110 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 02:14:35,286 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:14:35] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:15:43,620 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:15:43] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:15:44,138 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 02:15:44,308 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:15:44] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:16:23,023 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:16:23] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:16:23,538 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 02:16:23,710 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:16:23] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:16:44,205 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:16:44] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:16:44,746 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 02:16:44,931 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:16:44] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:17:00,706 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:17:00] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:17:01,220 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 02:17:01,391 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:17:01] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:18:15,476 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:18:15] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:18:16,000 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 539.3227039651457, 'y': -25.69319548900802}, 'type': 'start', 'width': 231, 'height': 158, 'selected': True, 'positionAbsolute': {'x': 539.3227039651457, 'y': -25.69319548900802}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 797.7246268934616, 'y': 130.6993444912044}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 299.15062736343265}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10740', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10741', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10742', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10743', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10744', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10745', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10746', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10747', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:18:16,002 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:18:16,686 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:18:20,328 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:18:20,329 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:18:20,500 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:18:20] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:18:22,724 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:18:22] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:18:23,260 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 539.3227039651457, 'y': -25.69319548900802}, 'type': 'start', 'width': 231, 'height': 158, 'selected': True, 'positionAbsolute': {'x': 539.3227039651457, 'y': -25.69319548900802}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 797.7246268934616, 'y': 130.6993444912044}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 299.15062736343265}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10740', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10741', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10742', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10743', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10744', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10745', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10746', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10747', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:18:23,260 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:18:23,965 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:18:25,325 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 539.3227039651457, 'y': -25.69319548900802}, 'type': 'start', 'width': 231, 'height': 158, 'selected': True, 'positionAbsolute': {'x': 539.3227039651457, 'y': -25.69319548900802}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 797.7246268934616, 'y': 130.6993444912044}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 299.15062736343265}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10740', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10741', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10742', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10743', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10744', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10745', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10746', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10747', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:18:25,326 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:18:26,019 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:18:26,266 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:18:26,267 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:18:26,452 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:18:26] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:18:26,540 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:18:26,541 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:18:26,745 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:18:26] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:18:33,056 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:18:33] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:18:33,577 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 539.3227039651457, 'y': -25.69319548900802}, 'type': 'start', 'width': 231, 'height': 158, 'selected': True, 'positionAbsolute': {'x': 539.3227039651457, 'y': -25.69319548900802}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje'}, 'id': 'message-b4b27aeb', 'position': {'x': 797.7246268934616, 'y': 130.6993444912044}, 'type': 'message', 'width': 212, 'height': 101}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 299.15062736343265}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10716', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10717', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10718', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10719', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10720', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10721', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10722', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10723', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10740', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10741', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10742', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10743', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10744', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10745', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10746', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10747', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:18:33,580 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:18:34,666 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:18:35,580 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:18:35,580 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:18:35,751 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:18:35] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:21:36,207 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:21:36] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:21:36,737 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 02:21:38,056 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 02:21:38,236 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 02:21:38,237 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 02:21:38,589 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:21:38] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:23:40,698 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:23:40] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:23:41,624 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 539.3227039651458, 'y': -7.710503755599547}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 539.3227039651458, 'y': -7.710503755599547}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'message': 'Escribe tu mensaje aquí...', 'variables': [], 'lastUpdated': '2025-07-27T05:23:02.657Z'}, 'id': 'message-b4b27aeb', 'position': {'x': 820.2029915602222, 'y': 132.94718095788048}, 'type': 'message', 'width': 226, 'height': 104, 'selected': True, 'positionAbsolute': {'x': 820.2029915602222, 'y': 132.94718095788048}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 305.8941367634607}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': 778.0608631996382, 'y': 305.8941367634607}}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10748', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10749', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10750', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10751', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10752', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10753', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10754', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10755', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10756', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10757', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10758', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10759', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10760', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10761', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10762', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10763', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:23:41,626 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:23:42,318 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:23:42,950 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 383.212770904267, 'y': 675.553185274126}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 539.3227039651458, 'y': -7.710503755599547}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 539.3227039651458, 'y': -7.710503755599547}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'message': 'Escribe tu mensaje aquí...', 'variables': [], 'lastUpdated': '2025-07-27T05:23:02.657Z'}, 'id': 'message-b4b27aeb', 'position': {'x': 820.2029915602222, 'y': 132.94718095788048}, 'type': 'message', 'width': 226, 'height': 104, 'selected': True, 'positionAbsolute': {'x': 820.2029915602222, 'y': 132.94718095788048}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 305.8941367634607}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': 778.0608631996382, 'y': 305.8941367634607}}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10748', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10749', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10750', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10751', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10752', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10753', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10754', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10755', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10756', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10757', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10758', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10759', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10760', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10761', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10762', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10763', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:23:42,951 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:23:43,643 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:23:46,273 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:23:46,274 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:23:46,444 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:23:46] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:23:48,676 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:23:48,677 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:23:48,850 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:23:48] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:23:50,308 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:23:50] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:23:50,834 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 539.3227039651458, 'y': -7.710503755599547}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 539.3227039651458, 'y': -7.710503755599547}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'message': 'Escribe tu mensaje aquí...', 'variables': [], 'lastUpdated': '2025-07-27T05:23:02.657Z'}, 'id': 'message-b4b27aeb', 'position': {'x': 820.2029915602222, 'y': 132.94718095788048}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 820.2029915602222, 'y': 132.94718095788048}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 314.885482630165}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': True, 'dragging': False, 'positionAbsolute': {'x': 778.0608631996382, 'y': 314.885482630165}}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10748', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10749', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10750', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10751', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10752', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10753', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10754', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10755', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10756', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10757', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10758', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10759', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10760', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10761', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10762', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10763', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:23:50,835 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:23:51,532 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:23:52,402 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:23:52,402 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:23:52,576 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:23:52] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:23:58,280 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:23:58] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:23:58,792 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 555.0575592318783, 'y': -9.95834022227561}, 'type': 'start', 'width': 231, 'height': 144, 'selected': True, 'positionAbsolute': {'x': 555.0575592318783, 'y': -9.95834022227561}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'message': 'Escribe tu mensaje aquí...', 'variables': [], 'lastUpdated': '2025-07-27T05:23:02.657Z'}, 'id': 'message-b4b27aeb', 'position': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 778.0608631996382, 'y': 314.885482630165}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': 778.0608631996382, 'y': 314.885482630165}}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10748', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10749', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10750', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10751', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10752', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10753', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10754', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10755', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10756', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10757', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10758', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10759', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10760', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10761', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10762', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10763', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:23:58,793 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:23:59,481 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:24:00,436 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:24:00,436 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:24:00,606 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:24:00] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:25:38,961 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:25:38] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:25:39,492 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B', 'isEditing': False}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'dragging': False}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 523.5878486984134, 'y': -14.454013155627734}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 523.5878486984134, 'y': -14.454013155627734}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'message': 'Escribe tu mensaje aquí...', 'variables': [], 'lastUpdated': '2025-07-27T05:23:02.657Z'}, 'id': 'message-b4b27aeb', 'position': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 335.1160108302494}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': True, 'dragging': False, 'positionAbsolute': {'x': 782.5565361329903, 'y': 335.1160108302494}}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1055.4255179623237, 'y': 846.3404262929641}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10748', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10749', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10750', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10751', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10752', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10753', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10754', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10755', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10756', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10757', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10758', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10759', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10760', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10761', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10762', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10763', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:25:39,493 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:25:40,183 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:25:41,218 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:25:41,218 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:25:41,391 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:25:41] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:25:43,956 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'dragging': False}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B', 'isEditing': False}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'dragging': False}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 523.5878486984134, 'y': -14.454013155627734}, 'type': 'start', 'width': 229, 'height': 156, 'selected': False, 'positionAbsolute': {'x': 523.5878486984134, 'y': -14.454013155627734}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'message': 'Escribe tu mensaje aquí...', 'variables': [], 'lastUpdated': '2025-07-27T05:23:02.657Z'}, 'id': 'message-b4b27aeb', 'position': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 335.1160108302494}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': 782.5565361329903, 'y': 335.1160108302494}}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1147.586813096042, 'y': 859.8274450930205}, 'type': 'end', 'width': 309, 'height': 132, 'selected': True, 'positionAbsolute': {'x': 1147.586813096042, 'y': 859.8274450930205}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10732', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10733', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10734', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10735', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10736', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10737', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10738', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10739', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10748', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10749', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10750', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10751', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10752', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10753', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10754', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10755', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10756', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10757', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10758', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10759', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10760', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10761', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10762', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10763', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 02:25:43,957 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 02:25:44,662 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 02:25:45,362 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 02:25:45,363 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 02:25:45,535 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:25:45] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:36:17,883 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:36:17] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:36:18,399 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 02:36:19,248 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 02:36:19,427 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 02:36:19,428 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 02:36:19,768 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:36:19] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:42:57,095 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:42:57] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:42:57,624 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 02:42:58,956 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 02:42:59,130 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 02:42:59,131 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 02:42:59,475 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:42:59] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:51:44,435 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:51:44] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 02:51:45,648 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:51:45] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 02:51:47,057 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:51:47] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 02:51:48,162 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:51:48] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 02:51:48,230 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:51:48] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:51:48,744 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 02:51:49,929 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 02:51:50,190 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 02:51:50,191 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 02:51:50,596 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:51:50] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:52:25,155 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:52:25] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:52:25,675 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 02:52:25,849 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:52:25] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:59:41,545 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:59:41] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 02:59:42,077 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 02:59:43,223 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 02:59:43,397 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 02:59:43,397 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 02:59:43,742 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 02:59:43] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 03:08:34,855 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:08:34] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 03:08:35,377 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 03:08:36,233 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 03:08:36,409 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 03:08:36,409 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 03:08:36,752 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:08:36] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 03:27:19,210 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:27:19] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 03:27:20,473 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:27:20] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 03:27:21,682 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:27:21] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 03:27:22,793 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:27:22] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 03:27:22,864 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:27:22] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 03:27:23,770 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 03:27:24,766 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 03:27:24,941 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 03:27:24,942 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 03:27:25,286 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:27:25] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 03:49:24,762 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:49:24] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 03:49:25,980 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:49:25] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 03:49:27,173 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:49:27] "[33mGET /api/auth/google/login HTTP/1.1[0m" 404 -
2025-07-27 03:49:28,225 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:49:28] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 03:49:29,345 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:49:29] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 03:49:29,433 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:49:29] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 03:49:29,963 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 03:49:30,824 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 03:49:31,000 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 03:49:31,001 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 03:49:31,348 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 03:49:31] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:01:58,000 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:01:58] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:01:58,531 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 04:01:59,540 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 04:01:59,713 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 04:01:59,714 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 04:02:00,104 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:02:00] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:10:32,030 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:10:32] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:10:32,566 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 04:10:33,731 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 04:10:33,908 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 04:10:33,909 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 04:10:34,256 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:10:34] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:19:57,657 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:19:57] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:19:58,193 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 04:19:59,045 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 04:19:59,220 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 04:19:59,220 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 04:19:59,570 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:19:59] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:33:56,411 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:33:56] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:33:56,941 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 04:33:57,941 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 04:33:58,115 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 04:33:58,116 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 04:33:58,465 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:33:58] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:59:59,810 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:59:59] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 04:59:59,813 - app - WARNING - Authentication error: Signature has expired
2025-07-27 04:59:59,813 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:59:59] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-27 04:59:59,838 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:59:59] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 04:59:59,839 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:59:59] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 04:59:59,841 - app - WARNING - Authentication error: Signature has expired
2025-07-27 04:59:59,841 - app - WARNING - Authentication error: Signature has expired
2025-07-27 04:59:59,842 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:59:59] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 04:59:59,842 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:59:59] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 04:59:59,877 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:59:59] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 04:59:59,886 - app - WARNING - Authentication error: Signature has expired
2025-07-27 04:59:59,886 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 04:59:59] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 05:00:03,228 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:00:03] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 05:00:04,447 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:00:04] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 05:00:05,027 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 05:00:05,919 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 05:00:06,095 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 05:00:06,096 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 05:00:06,838 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:00:06] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:10:18,278 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:10:18] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:10:18,812 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 05:10:19,818 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 05:10:19,998 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 05:10:19,999 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 05:10:20,341 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:10:20,345 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:10:20] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:10:20,515 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:10:20] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:00,186 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:00] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:00,707 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:00,879 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:00] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:01,895 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:02,069 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:02] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:02,787 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:02,960 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:02] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:03,959 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:04,134 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:04] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:05,376 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:05,550 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:05] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:06,172 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:06] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:06,694 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:06,869 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:06] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:07,892 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:08,067 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:08] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:09,000 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:09,172 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:09] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:09,657 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:09,831 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:09] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:10,468 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:10,639 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:10] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:11,212 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:11,386 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:11] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:51,547 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:51] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:52,081 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:52,259 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:52] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:53,752 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:53,925 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:53] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:11:55,930 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:11:56,116 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:11:56] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:13:02,913 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:13:02] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:13:03,449 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:13:03,626 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:13:03] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:13:12,550 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:13:12] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:13:13,071 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:13:13,243 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:13:13] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:27:34,258 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:27:34] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:27:34,783 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 05:27:35,970 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 05:27:36,144 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 05:27:36,144 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 05:27:36,487 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:27:36] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:27:36,552 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:27:36,724 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:27:36] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:27:47,668 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:27:47] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:27:48,185 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:27:48,357 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:27:48] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:32:50,435 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:32:50] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:32:50,950 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 05:32:51,950 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 05:32:52,126 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 05:32:52,127 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 05:32:52,471 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:32:52] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:40:22,540 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:40:22] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:40:23,084 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 05:40:24,081 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 05:40:24,259 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 05:40:24,259 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 05:40:24,606 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:40:24] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:40:34,397 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:40:34] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:40:34,918 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 05:40:35,091 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:40:35] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:40:39,657 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:40:39] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:40:40,178 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'isEditing': False, 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'lastUpdated': '2025-07-27T05:23:02.657Z', 'message': 'Escribe tu mensaje aquí...', 'variables': []}, 'id': 'message-b4b27aeb', 'position': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 523.5878486984134, 'y': -14.454013155627734}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 335.1160108302494}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1147.586813096042, 'y': 859.8274450930205}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10764', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10765', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10766', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10767', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10768', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10769', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10770', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10771', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10772', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10773', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10774', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10775', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10776', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10777', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10778', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10779', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10748', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10749', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10750', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10751', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10752', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10753', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10754', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10755', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 05:40:40,179 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 05:40:40,878 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 05:40:44,344 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 05:40:44,345 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 05:40:44,517 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:40:44] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:53:29,576 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:53:29] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 05:53:30,101 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 05:53:31,108 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 05:53:31,679 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 05:53:31,680 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 05:53:32,026 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 05:53:32] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:02:07,352 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:07] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:02:07,354 - app - WARNING - Authentication error: Signature has expired
2025-07-27 06:02:07,355 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:07] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-27 06:02:07,358 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:07] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 06:02:07,359 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:07] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 06:02:07,361 - app - WARNING - Authentication error: Signature has expired
2025-07-27 06:02:07,362 - app - WARNING - Authentication error: Signature has expired
2025-07-27 06:02:07,362 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:07] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 06:02:07,363 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:07] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 06:02:07,388 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:07] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 06:02:07,391 - app - WARNING - Authentication error: Signature has expired
2025-07-27 06:02:07,392 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:07] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 06:02:10,063 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:10] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 06:02:11,156 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:11] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 06:02:11,711 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 06:02:12,858 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 06:02:13,033 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 06:02:13,034 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 06:02:13,379 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:13] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:02:17,847 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:17] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:02:18,362 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 06:02:18,533 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:18] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:02:19,829 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:19] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:02:20,356 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'isEditing': False, 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'lastUpdated': '2025-07-27T05:23:02.657Z', 'message': 'Escribe tu mensaje aquí...', 'variables': []}, 'id': 'message-b4b27aeb', 'position': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 523.5878486984134, 'y': -14.454013155627734}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 335.1160108302494}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1147.586813096042, 'y': 859.8274450930205}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10764', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10765', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10766', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10767', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10768', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10769', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10770', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10771', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10780', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10781', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10782', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10783', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10784', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10785', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10786', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10787', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10788', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10789', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10790', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10791', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10792', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10793', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10794', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10795', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 06:02:20,357 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 06:02:21,052 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 06:02:25,282 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:25] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:02:25,365 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 06:02:25,366 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 06:02:25,539 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:25] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:02:25,807 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'isEditing': False, 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 751.2265421687994, 'y': 604.9787211211076}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 394.45195323764733, 'y': 671.0575123407739}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'lastUpdated': '2025-07-27T05:23:02.657Z', 'message': 'Escribe tu mensaje aquí...', 'variables': []}, 'id': 'message-b4b27aeb', 'position': {'x': 808.9638092268419, 'y': 139.69069035790866}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 523.5878486984134, 'y': -14.454013155627734}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 335.1160108302494}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1133.6382888665908, 'y': 643.6808466243758}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1147.586813096042, 'y': 859.8274450930205}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10764', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10765', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10766', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10767', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10768', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10769', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10770', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10771', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10780', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10781', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10782', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10783', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10784', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10785', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10786', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10787', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10788', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10789', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10790', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10791', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10792', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10793', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10794', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10795', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 06:02:25,808 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 06:02:26,501 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 06:02:28,752 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 06:02:28,752 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 06:02:28,926 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:02:28] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:10:36,760 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:10:36] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:10:37,279 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 06:10:38,277 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 06:10:38,452 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 06:10:38,453 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 06:10:38,795 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:10:38] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:20:23,112 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:20:23] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:20:23,638 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 06:20:24,661 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 06:20:24,839 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 06:20:24,840 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 06:20:25,188 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:20:25] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:25:54,382 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:25:54] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 06:25:55,598 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:25:55] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 06:27:55,053 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:27:55] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 06:27:56,167 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:27:56] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 06:27:56,236 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:27:56] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:27:56,756 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 06:27:57,774 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 06:27:57,953 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 06:27:57,954 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 06:27:58,303 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:27:58] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:28:22,990 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:28:22] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-27 06:28:22,991 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:28:22] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-27 06:28:22,995 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:28:22] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-27 06:28:22,996 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:28:22] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-27 06:28:25,971 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:28:25] "OPTIONS /api/whatsapp/status/123 HTTP/1.1" 200 -
2025-07-27 06:28:41,589 - services.whatsapp_service - ERROR - Error en la comunicación con la API de WhatsApp
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-27 06:28:41,602 - services.whatsapp_service - ERROR - Error al verificar el estado de WhatsApp para 123
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-27 06:28:41,604 - app - ERROR - Exception on /api/whatsapp/status/123 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/whatsapp_api.py", line 75, in get_status
    status = service.get_connection_status(plubot_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 104, in get_connection_status
    connection = WhatsAppConnection.query.filter_by(plubot_id=plubot_id).first()
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WhatsAppConnection' has no attribute 'query'
2025-07-27 06:28:41,782 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:28:41] "[35m[1mGET /api/whatsapp/status/123 HTTP/1.1[0m" 500 -
2025-07-27 06:28:45,277 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:28:45] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:28:45,802 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 06:28:45,975 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:28:45] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:32:28,035 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:32:28] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 06:32:29,150 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:32:29] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 06:32:32,913 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:32:32] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-07-27 06:32:39,159 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:32:39] "OPTIONS /api/discord-integrations/ HTTP/1.1" 200 -
2025-07-27 06:32:39,681 - api.discord_integrations_api - ERROR - Error al obtener las integraciones de Discord.
Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/discord_integrations_api.py", line 172, in get_discord_integrations
    integrations = DiscordIntegration.query.filter_by(user_id=user_id).all()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'DiscordIntegration' has no attribute 'query'
2025-07-27 06:32:39,854 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:32:39] "[35m[1mGET /api/discord-integrations/ HTTP/1.1[0m" 500 -
2025-07-27 06:32:48,230 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:32:48] "OPTIONS /api/discord-integrations/ HTTP/1.1" 200 -
2025-07-27 06:32:48,763 - api.discord_integrations_api - ERROR - Error al obtener las integraciones de Discord.
Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/discord_integrations_api.py", line 172, in get_discord_integrations
    integrations = DiscordIntegration.query.filter_by(user_id=user_id).all()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'DiscordIntegration' has no attribute 'query'
2025-07-27 06:32:48,939 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:32:48] "[35m[1mGET /api/discord-integrations/ HTTP/1.1[0m" 500 -
2025-07-27 06:32:50,070 - api.discord_integrations_api - ERROR - Error al obtener las integraciones de Discord.
Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/discord_integrations_api.py", line 172, in get_discord_integrations
    integrations = DiscordIntegration.query.filter_by(user_id=user_id).all()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'DiscordIntegration' has no attribute 'query'
2025-07-27 06:32:50,240 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:32:50] "[35m[1mGET /api/discord-integrations/ HTTP/1.1[0m" 500 -
2025-07-27 06:33:36,798 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:33:36] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-07-27 06:35:34,948 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:35:34] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:35:35,464 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 06:35:36,458 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 06:35:36,633 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 06:35:36,634 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 06:35:36,976 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:35:36] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:35:45,308 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:35:45] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:35:45,833 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 06:35:46,007 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:35:46] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:36:08,904 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:36:08] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:36:09,416 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 06:36:09,587 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:36:09] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:36:19,166 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:36:19] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:36:19,686 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 06:36:19,857 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:36:19] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:37:25,443 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:37:25] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:37:25,976 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'isEditing': False, 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 772.567229631591, 'y': 598.7020483379337}, 'type': 'option', 'width': 320, 'height': 125, 'selected': False, 'positionAbsolute': {'x': 772.567229631591, 'y': 598.7020483379337}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 400.72862602082137, 'y': 617.0781264054774}, 'type': 'option', 'width': 320, 'height': 125, 'selected': False, 'positionAbsolute': {'x': 400.72862602082137, 'y': 617.0781264054774}, 'dragging': False}, {'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'lastUpdated': '2025-07-27T05:23:02.657Z', 'message': 'Escribe tu mensaje aquí...', 'variables': []}, 'id': 'message-b4b27aeb', 'position': {'x': 806.4531401135723, 'y': 191.15940717993553}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 806.4531401135723, 'y': 191.15940717993553}, 'dragging': False}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 544.2243845044562, 'y': 79.75611529102639}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'dragging': False, 'positionAbsolute': {'x': 544.2243845044562, 'y': 79.75611529102639}}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 335.1160108302494}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1129.8722851966863, 'y': 606.0208099253317}, 'type': 'option', 'width': 320, 'height': 125, 'selected': False, 'positionAbsolute': {'x': 1129.8722851966863, 'y': 606.0208099253317}, 'dragging': False}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1219.1408828242259, 'y': 790.7840444781065}, 'type': 'end', 'width': 309, 'height': 132, 'selected': True, 'positionAbsolute': {'x': 1219.1408828242259, 'y': 790.7840444781065}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10780', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10781', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10796', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10797', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10798', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10799', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10800', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10801', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10802', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10803', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10804', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10805', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10806', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10807', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10808', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10782', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10783', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10784', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10785', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10786', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10787', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10809', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10810', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10811', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 06:37:25,976 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 06:37:26,674 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 06:37:31,207 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 06:37:31,208 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 06:37:31,382 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:37:31] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 06:48:44,860 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:48:44] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 06:48:46,068 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 06:48:46] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 07:01:41,851 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 07:01:41] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 07:01:42,965 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 07:01:42] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 07:01:43,053 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 07:01:43] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 07:01:43,576 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 07:01:44,477 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 07:01:44,651 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 07:01:44,651 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 07:01:44,996 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 07:01:44] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 14:15:35,941 - root - INFO - Sistema de logging configurado correctamente
2025-07-27 14:15:35,949 - root - INFO - Sistema de logging configurado correctamente
2025-07-27 14:15:35,964 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-27 14:15:35,964 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-27 14:15:40,282 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:40] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 14:15:40,285 - app - WARNING - Authentication error: Signature has expired
2025-07-27 14:15:40,286 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:40] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-27 14:15:40,297 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:40] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 14:15:40,299 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:40] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 14:15:40,302 - app - WARNING - Authentication error: Signature has expired
2025-07-27 14:15:40,302 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:40] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 14:15:40,304 - app - WARNING - Authentication error: Signature has expired
2025-07-27 14:15:40,305 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:40] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 14:15:40,312 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:40] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 14:15:40,315 - app - WARNING - Authentication error: Signature has expired
2025-07-27 14:15:40,315 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:40] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 14:15:46,579 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:46] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 14:15:50,659 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:50] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 14:15:50,660 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:50] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 14:15:50,701 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:50] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 14:15:53,680 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 14:15:54,586 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 14:15:54,761 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 14:15:54,762 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 14:15:55,112 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:15:55] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 14:42:19,319 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:42:19] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 14:42:58,971 - app - ERROR - Exception on /api/auth/logout [POST]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 167, in decorator
    verify_jwt_in_request(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 94, in verify_jwt_in_request
    jwt_data, jwt_header, jwt_location = _decode_jwt_from_request(
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 368, in _decode_jwt_from_request
    verify_token_not_blocklisted(jwt_header, decoded_token)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/internal_utils.py", line 58, in verify_token_not_blocklisted
    if jwt_manager._token_in_blocklist_callback(jwt_header, jwt_data):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/app.py", line 84, in check_if_token_in_blocklist
    token = db.session.query(TokenBlocklist.id).filter_by(jti=jti).scalar()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: SELECT token_blocklist.id AS token_blocklist_id 
FROM token_blocklist 
WHERE token_blocklist.jti = %(jti_1)s]
[parameters: {'jti_1': '8d1f676e-7a51-4cac-9a9f-09b60f10f348'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-27 14:42:58,985 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 14:42:58] "[35m[1mPOST /api/auth/logout HTTP/1.1[0m" 500 -
2025-07-27 15:16:13,934 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:13] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 15:16:13,937 - app - WARNING - Authentication error: Signature has expired
2025-07-27 15:16:13,937 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:13] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 15:16:17,749 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:17] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 15:16:26,488 - root - INFO - Sistema de logging configurado correctamente
2025-07-27 15:16:26,496 - root - INFO - Sistema de logging configurado correctamente
2025-07-27 15:16:26,504 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-27 15:16:26,504 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-27 15:16:36,109 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:36] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 15:16:40,216 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:40] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 15:16:40,289 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:40] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:16:41,123 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:41] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 15:16:43,705 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 15:16:44,775 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 15:16:44,954 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 15:16:44,955 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 15:16:45,302 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:45] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:16:56,839 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:56] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:16:57,750 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 15:16:57,924 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:16:57] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:17:03,892 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:17:03] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:17:04,803 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'lastUpdated': '2025-07-27T05:23:02.657Z', 'message': 'Escribe tu mensaje aquí...', 'variables': []}, 'id': 'message-b4b27aeb', 'position': {'x': 806.4531401135723, 'y': 191.15940717993553}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 400.72862602082137, 'y': 617.0781264054774}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'isEditing': False, 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 772.567229631591, 'y': 598.7020483379337}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 335.1160108302494}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 544.2243845044562, 'y': 79.75611529102639}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1129.8722851966863, 'y': 606.0208099253317}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1219.1408828242259, 'y': 790.7840444781065}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10796', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10797', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10798', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10799', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10800', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10801', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10802', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10803', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10812', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10813', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10814', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10815', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10816', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10817', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10818', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10819', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10820', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10821', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10822', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10823', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10824', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10825', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10826', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10827', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 15:17:04,804 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 15:17:05,493 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 15:17:06,850 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:17:06] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-27 15:17:06,851 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:17:06] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-27 15:17:06,853 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:17:06] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-27 15:17:06,854 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:17:06] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-27 15:17:10,191 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 15:17:10,191 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 15:17:10,364 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:17:10] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:18:31,447 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:18:31] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:18:32,346 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 15:18:33,195 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 15:18:33,371 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 15:18:33,372 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 15:18:33,717 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:18:33] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:18:38,309 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:18:38] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:18:38,832 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'lastUpdated': '2025-07-27T05:23:02.657Z', 'message': 'Escribe tu mensaje aquí...', 'variables': []}, 'id': 'message-b4b27aeb', 'position': {'x': 806.4531401135723, 'y': 191.15940717993553}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 400.72862602082137, 'y': 617.0781264054774}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'isEditing': False, 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 772.567229631591, 'y': 598.7020483379337}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 335.1160108302494}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 544.2243845044562, 'y': 79.75611529102639}, 'type': 'start', 'width': 229, 'height': 156}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1129.8722851966863, 'y': 606.0208099253317}, 'type': 'option', 'width': 320, 'height': 125}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1219.1408828242259, 'y': 790.7840444781065}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10812', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10813', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10814', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10815', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10816', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10817', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10818', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10819', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10841', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10842', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10843', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10844', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10845', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10846', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10847', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10848', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10849', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10850', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10851', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10852', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10853', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10854', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10855', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10856', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 15:18:38,834 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 15:18:39,521 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 15:18:43,826 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 15:18:43,826 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 15:18:43,999 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:18:43] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:35:24,161 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:35:24] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 15:35:25,274 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 15:35:26,608 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 15:35:26,784 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 15:35:26,785 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 15:35:27,151 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 15:35:27] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 16:01:32,127 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:01:32] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 16:01:33,433 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:01:33] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 16:06:22,738 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:06:22] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 16:06:23,831 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:06:23] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 16:06:23,872 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:06:23] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 16:06:24,392 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 16:06:25,230 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 16:06:25,403 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 16:06:25,404 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 16:06:25,748 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:06:25] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 16:06:31,051 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:06:31] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 16:06:31,632 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 16:06:31,804 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:06:31] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 16:14:45,611 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:14:45] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 16:14:46,128 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 16:14:47,301 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 16:14:47,478 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 16:14:47,479 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 16:14:47,826 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 16:14:47] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:28:47,763 - root - INFO - Sistema de logging configurado correctamente
2025-07-27 18:28:47,770 - root - INFO - Sistema de logging configurado correctamente
2025-07-27 18:28:47,787 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-27 18:28:47,788 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-27 18:29:58,190 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:29:58] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 18:30:02,008 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:30:02] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 18:30:02,377 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:30:02] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:30:03,942 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:30:03] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 18:30:05,400 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 18:30:06,282 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 18:30:06,664 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 18:30:06,665 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 18:30:07,010 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:30:07] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:35:35,627 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:35:35] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:35:36,535 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 18:35:37,378 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 18:35:37,552 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 18:35:37,553 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 18:35:37,896 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:35:37] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:37:37,154 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:37:37] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:37:37,675 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'lastUpdated': '2025-07-27T05:23:02.657Z', 'message': 'Escribe tu mensaje aquí...', 'variables': []}, 'id': 'message-b4b27aeb', 'position': {'x': 806.4531401135723, 'y': 191.15940717993553}, 'type': 'message', 'width': 226, 'height': 104}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 400.72862602082137, 'y': 617.0781264054774}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'isEditing': False, 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 772.567229631591, 'y': 598.7020483379337}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 346.44026659544903}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 782.5565361329903, 'y': 346.44026659544903}, 'dragging': False}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 620.1343571431238, 'y': 10.142773872248853}, 'type': 'start', 'width': 231, 'height': 158, 'selected': True, 'positionAbsolute': {'x': 620.1343571431238, 'y': 10.142773872248853}, 'dragging': False}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1129.8722851966863, 'y': 606.0208099253317}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1219.1408828242259, 'y': 790.7840444781065}, 'type': 'end', 'width': 309, 'height': 132}], 'edges': [{'animated': True, 'id': '10841', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10842', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10843', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10844', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10845', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10846', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10847', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10848', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10857', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10858', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10859', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10860', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10861', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10862', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10863', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10864', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10865', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10866', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10867', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10868', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10869', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10870', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10871', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10872', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-27 18:37:37,676 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-27 18:37:38,763 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-27 18:37:43,867 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-27 18:37:43,867 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-27 18:37:44,043 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:37:44] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:37:48,563 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:37:48] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:37:49,081 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 18:37:50,128 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 18:37:50,302 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 18:37:50,303 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 18:37:50,654 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:37:50] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:40:59,665 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:40:59] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:41:00,185 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 18:41:00,356 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:41:00] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:47:03,658 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:47:03] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:47:04,179 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 18:47:05,019 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 18:47:05,192 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 18:47:05,193 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 18:47:05,538 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:47:05] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:48:05,641 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:48:05] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:48:06,155 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 18:48:06,327 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:48:06] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:57:10,800 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:57:10] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 18:57:11,318 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 18:57:12,642 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 18:57:12,817 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 18:57:12,819 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 18:57:13,164 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 18:57:13] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 19:11:17,643 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:11:17] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 19:11:18,855 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:11:18] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 19:11:20,613 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:11:20] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 19:11:21,732 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:11:21] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 19:14:52,502 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:14:52] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 19:14:53,020 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 19:14:53,864 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 19:14:54,040 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 19:14:54,041 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 19:14:54,386 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:14:54] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 19:26:12,589 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:26:12] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 19:26:13,108 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 19:26:14,431 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 19:26:14,607 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 19:26:14,608 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 19:26:14,956 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:26:14] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 19:26:16,806 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 19:26:16,979 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:26:16] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 19:45:09,038 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:09] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 19:45:10,308 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:10] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 19:45:13,550 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:13] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 19:45:14,337 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:14] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 19:45:14,668 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:14] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 19:45:14,721 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:14] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 19:45:14,854 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:14] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 19:45:14,859 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:14] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 19:45:14,860 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:14] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 422 -
2025-07-27 19:45:16,082 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:16] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 19:45:16,391 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:16] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-27 19:45:18,093 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:18] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 19:45:20,564 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:20] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 19:45:21,687 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:21] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 19:45:21,719 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:21] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 19:45:22,239 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 19:45:23,408 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 19:45:23,584 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 19:45:23,585 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 19:45:23,929 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 19:45:23] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:01:06,713 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:01:06] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 20:01:07,933 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:01:07] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 20:05:31,704 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:05:31] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 20:05:32,820 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:05:32] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 20:05:32,897 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:05:32] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:05:33,424 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 20:05:34,265 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 20:05:34,440 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 20:05:34,441 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 20:05:34,785 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:05:34] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:28:41,184 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:28:41] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 20:28:42,408 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:28:42] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 20:35:45,814 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:35:45] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 20:36:21,133 - api.auth - ERROR - Error en /login
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/auth.py", line 312, in login
    .first()
     ^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2728, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.password AS users_password, users.name AS users_name, users.role AS users_role, users.is_verified AS users_is_verified, users.google_id AS users_google_id, users.google_refresh_token AS users_google_refresh_token, users.profile_picture AS users_profile_picture, users.bio AS users_bio, users.preferences AS users_preferences, users.discord_id AS users_discord_id, users.discord_username AS users_discord_username, users.level AS users_level, users.plucoins AS users_plucoins, users.powers AS users_powers, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.password_changed_at AS users_password_changed_at, users.google_sheets_credentials AS users_google_sheets_credentials 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'representative.canid.mect@letterprotect.net', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-27 20:36:21,145 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:36:21] "[35m[1mPOST /api/auth/login HTTP/1.1[0m" 500 -
2025-07-27 20:41:36,016 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:41:36] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 20:41:38,129 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:41:38] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 20:41:57,609 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:41:57] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:42:04,759 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:42:04] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:42:14,548 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:42:14] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:42:16,015 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 20:42:18,497 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 20:42:18,671 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 20:42:18,671 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 20:42:19,015 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:42:19] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:42:31,212 - app - ERROR - Exception on /api/flow/253 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 167, in decorator
    verify_jwt_in_request(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 94, in verify_jwt_in_request
    jwt_data, jwt_header, jwt_location = _decode_jwt_from_request(
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 368, in _decode_jwt_from_request
    verify_token_not_blocklisted(jwt_header, decoded_token)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/internal_utils.py", line 58, in verify_token_not_blocklisted
    if jwt_manager._token_in_blocklist_callback(jwt_header, jwt_data):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/app.py", line 84, in check_if_token_in_blocklist
    token = db.session.query(TokenBlocklist.id).filter_by(jti=jti).scalar()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: SELECT token_blocklist.id AS token_blocklist_id 
FROM token_blocklist 
WHERE token_blocklist.jti = %(jti_1)s]
[parameters: {'jti_1': '5ca97288-b2fb-45da-a24f-7563d45641ed'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-27 20:42:31,218 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:42:31] "[35m[1mGET /api/flow/253 HTTP/1.1[0m" 500 -
2025-07-27 20:42:44,950 - app - ERROR - Exception on /api/flow/253 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 167, in decorator
    verify_jwt_in_request(
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 94, in verify_jwt_in_request
    jwt_data, jwt_header, jwt_location = _decode_jwt_from_request(
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 368, in _decode_jwt_from_request
    verify_token_not_blocklisted(jwt_header, decoded_token)
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/internal_utils.py", line 58, in verify_token_not_blocklisted
    if jwt_manager._token_in_blocklist_callback(jwt_header, jwt_data):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/app.py", line 84, in check_if_token_in_blocklist
    token = db.session.query(TokenBlocklist.id).filter_by(jti=jti).scalar()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1422, in execute
    return meth(
           ^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 514, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1644, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1850, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1990, in _exec_single_context
    self._handle_dbapi_exception(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2357, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1971, in _exec_single_context
    self.dialect.do_execute(
  File "/opt/homebrew/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 919, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) no se pudo recibir datos del servidor: Operation timed out
ERROR en llamada SSL: Operation timed out

[SQL: SELECT token_blocklist.id AS token_blocklist_id 
FROM token_blocklist 
WHERE token_blocklist.jti = %(jti_1)s]
[parameters: {'jti_1': '5ca97288-b2fb-45da-a24f-7563d45641ed'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-27 20:42:44,952 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:42:44] "[35m[1mGET /api/flow/253 HTTP/1.1[0m" 500 -
2025-07-27 20:45:18,902 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:45:18] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:45:21,279 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-27 20:45:21,455 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:45:21] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:56:49,028 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:56:49] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 20:56:50,601 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 20:56:51,448 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 20:56:51,626 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 20:56:51,627 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 20:56:51,972 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 20:56:51] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 21:33:22,523 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:33:22] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 21:33:25,035 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:33:25] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 21:33:25,712 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:33:25] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 21:33:26,147 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:33:26] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 21:33:26,196 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:33:26] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 21:33:26,723 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 21:33:27,880 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 21:33:28,056 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 21:33:28,057 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 21:33:28,401 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:33:28] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 21:33:29,167 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:33:29] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 21:33:30,350 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:33:30] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 21:48:45,233 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:48:45] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 21:48:46,442 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:48:46] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 21:56:37,763 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:56:37] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 21:56:38,885 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:56:38] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 21:56:38,937 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:56:38] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 21:56:39,460 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 21:56:40,784 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 21:56:41,355 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 21:56:41,355 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 21:56:41,702 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 21:56:41] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 22:12:43,860 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:12:43] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 22:12:45,074 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:12:45] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-27 22:26:35,465 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:26:35] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 22:26:36,620 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:26:36] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 22:26:36,669 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:26:36] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 22:26:37,188 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 22:26:38,038 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 22:26:38,214 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 22:26:38,215 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 22:26:38,577 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:26:38] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 22:33:26,507 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:33:26] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 22:33:27,032 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 22:33:28,416 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 22:33:28,589 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 22:33:28,590 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 22:33:28,936 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:33:28] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 22:42:09,363 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:42:09] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 22:42:09,894 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 22:42:10,892 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 22:42:11,067 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 22:42:11,068 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 22:42:11,414 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:42:11] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-27 22:52:35,848 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:52:35] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 22:52:35,850 - app - WARNING - Authentication error: Signature has expired
2025-07-27 22:52:35,851 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:52:35] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 22:52:57,030 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:52:57] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 22:52:58,142 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 22:52:58] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 23:54:11,038 - root - INFO - Sistema de logging configurado correctamente
2025-07-27 23:54:11,046 - root - INFO - Sistema de logging configurado correctamente
2025-07-27 23:54:11,062 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-27 23:54:11,062 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-27 23:54:42,644 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:42] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 23:54:42,649 - app - WARNING - Authentication error: Signature has expired
2025-07-27 23:54:42,649 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:42] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-27 23:54:42,655 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:42] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 23:54:42,657 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:42] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-27 23:54:42,658 - app - WARNING - Authentication error: Signature has expired
2025-07-27 23:54:42,659 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:42] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 23:54:42,660 - app - WARNING - Authentication error: Signature has expired
2025-07-27 23:54:42,661 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:42] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-27 23:54:42,670 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:42] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-27 23:54:42,673 - app - WARNING - Authentication error: Signature has expired
2025-07-27 23:54:42,674 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:42] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-27 23:54:46,464 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:46] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 23:54:50,413 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:50] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 23:54:50,509 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:50] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-27 23:54:51,047 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:51] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-27 23:54:52,160 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:52] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-27 23:54:53,515 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-27 23:54:54,685 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-27 23:54:54,863 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-27 23:54:54,863 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-27 23:54:55,211 - werkzeug - INFO - 127.0.0.1 - - [27/Jul/2025 23:54:55] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:04:36,620 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:04:36] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:04:37,157 - api.flow_api - INFO - [PATCH /api/flow/253] Received raw data: {'plubotId': '253', 'flowName': 'Brillo', 'nodes': [{'data': {'id': 'message-b4b27aeb', 'label': 'Mensaje', 'lastUpdated': '2025-07-27T05:23:02.657Z', 'message': 'Escribe tu mensaje aquí...', 'variables': []}, 'id': 'message-b4b27aeb', 'position': {'x': 814.6260470145204, 'y': 189.11618045469854}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 814.6260470145204, 'y': 189.11618045469854}, 'dragging': False}, {'data': {'color': '#3498db', 'conditionId': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'instruction': 'Opción A', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción A'}, 'id': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'position': {'x': 400.72862602082137, 'y': 617.0781264054774}, 'type': 'option', 'width': 320, 'height': 122}, {'data': {'color': '#e74c3c', 'conditionId': '593a350c-88f8-4982-a267-7e49566b2415', 'instruction': 'Opción B', 'isEditing': False, 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Opción B'}, 'id': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'position': {'x': 768.480776181117, 'y': 604.8317285136446}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 768.480776181117, 'y': 604.8317285136446}, 'dragging': False}, {'data': {'id': 'start-8d721f37', 'label': 'Inicio'}, 'id': 'start-8d721f37', 'position': {'x': 616.0479036926498, 'y': 18.315680773196846}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 616.0479036926498, 'y': 18.315680773196846}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': 'ae1d7d45-da06-4c40-a4b8-717814266883', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': '593a350c-88f8-4982-a267-7e49566b2415', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'text': 'Nueva condición'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-f31075d6', 'isEditing': False, 'label': 'Decisión'}, 'id': 'decision-f31075d6', 'position': {'x': 782.5565361329903, 'y': 346.44026659544903}, 'type': 'decision', 'width': 150, 'height': 40}, {'data': {'color': '#FFA500', 'conditionId': 'condition-241a005d-039b-49f7-aff2-62aa849171a6', 'instruction': 'Nueva condición', 'lastUpdated': '2025-07-27T03:24:21.859Z', 'sourceNode': 'decision-f31075d6', 'text': 'Nueva condición'}, 'id': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'position': {'x': 1131.9155119219233, 'y': 624.4098504524646}, 'type': 'option', 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1131.9155119219233, 'y': 624.4098504524646}, 'dragging': False}, {'data': {'id': 'end-1227c191', 'label': 'Fin'}, 'id': 'end-1227c191', 'position': {'x': 1227.3137897251738, 'y': 809.1730850052395}, 'type': 'end', 'width': 310, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1227.3137897251738, 'y': 809.1730850052395}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10857', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10858', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10859', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10860', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10861', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10862', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10863', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10864', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10873', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10874', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10875', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10876', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10877', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10878', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10879', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10880', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10881', 'label': '', 'source': 'start-8d721f37', 'target': 'message-b4b27aeb', 'type': 'default'}, {'animated': True, 'id': '10882', 'label': '', 'source': 'message-b4b27aeb', 'target': 'decision-f31075d6', 'type': 'eliteEdge'}, {'animated': True, 'id': '10883', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-ae1d7d45-da06-4c40-a4b8-717814266883', 'target': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10884', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-593a350c-88f8-4982-a267-7e49566b2415', 'target': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10885', 'label': '', 'source': 'decision-f31075d6', 'sourceHandle': 'output-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'target': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10886', 'label': '', 'source': 'option-decision-f31075d6-ae1d7d45-da06-4c40-a4b8-717814266883', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10887', 'label': '', 'source': 'option-decision-f31075d6-593a350c-88f8-4982-a267-7e49566b2415', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}, {'animated': True, 'id': '10888', 'label': '', 'source': 'option-decision-f31075d6-condition-241a005d-039b-49f7-aff2-62aa849171a6', 'sourceHandle': 'source', 'target': 'end-1227c191', 'type': 'eliteEdge'}]}
2025-07-28 00:04:37,158 - api.flow_api - INFO - [PATCH /api/flow/253] Extracted: nodes_count=7, edges_count=24, name='N/A'
2025-07-28 00:04:38,234 - api.flow_api - INFO - [update_full_flow - plubot_id=253] Starting update. Received: nodes_count=7, edges_count=24, name='None'
2025-07-28 00:04:43,771 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 253
2025-07-28 00:04:43,772 - api.flow_api - INFO - Flujo actualizado para plubot 253 por usuario 73
2025-07-28 00:04:43,954 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:04:43] "PATCH /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:10:13,438 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:10:13] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:10:13,962 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 00:10:15,337 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 00:10:15,527 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-28 00:10:15,528 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 00:10:15,898 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:10:15] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:11:04,624 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:11:04] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:11:05,151 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 00:11:05,325 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:11:05] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:11:47,448 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:11:47] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 00:11:48,663 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:11:48] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-28 00:11:50,320 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:11:50] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 00:11:51,446 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:11:51] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 00:13:17,255 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:13:17] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-28 00:13:17,256 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:13:17] "OPTIONS /api/plubots/123/embed HTTP/1.1" 200 -
2025-07-28 00:13:17,260 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:13:17] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-28 00:13:17,261 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:13:17] "[31m[1mPOST /api/plubots/123/embed HTTP/1.1[0m" 405 -
2025-07-28 00:13:19,614 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:13:19] "OPTIONS /api/whatsapp/status/123 HTTP/1.1" 200 -
2025-07-28 00:13:35,527 - services.whatsapp_service - ERROR - Error en la comunicación con la API de WhatsApp
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-28 00:13:35,539 - services.whatsapp_service - ERROR - Error al verificar el estado de WhatsApp para 123
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)
2025-07-28 00:13:35,541 - app - ERROR - Exception on /api/whatsapp/status/123 [GET]
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
               ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 1395, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 325, in begin
    version, status, reason = self._read_status()
                              ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/http/client.py", line 286, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/socket.py", line 718, in readinto
    return self._sock.recv_into(b)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1314, in recv_into
    return self.read(nbytes, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 1166, in read
    return self._sslobj.read(len, buffer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: The read operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/util/util.py", line 39, in reraise
    raise value
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 536, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/opt/homebrew/lib/python3.11/site-packages/urllib3/connectionpool.py", line 367, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 96, in get_connection_status
    response = self._make_request("get", "users/profile")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 53, in _make_request
    response = requests.request(
               ^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/requests/adapters.py", line 713, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPSConnectionPool(host='gate.whapi.cloud', port=443): Read timed out. (read timeout=15)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/api/whatsapp_api.py", line 75, in get_status
    status = service.get_connection_status(plubot_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/flow/Desktop/Plubot/plubot-backend/services/whatsapp_service.py", line 104, in get_connection_status
    connection = WhatsAppConnection.query.filter_by(plubot_id=plubot_id).first()
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WhatsAppConnection' has no attribute 'query'
2025-07-28 00:13:35,722 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:13:35] "[35m[1mGET /api/whatsapp/status/123 HTTP/1.1[0m" 500 -
2025-07-28 00:56:43,385 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:56:43] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:56:43,925 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 00:56:44,784 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 00:56:44,959 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-28 00:56:44,959 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 00:56:45,305 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:56:45] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:56:52,720 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:56:52] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:56:53,243 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 00:56:53,416 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:56:53] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:57:30,835 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:57:30] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:57:31,357 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 00:57:31,530 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:57:31] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:57:45,658 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:57:45] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 00:57:46,178 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 00:57:46,351 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 00:57:46] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:11:20,825 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:11:20] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:11:21,347 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 01:11:22,247 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 01:11:22,423 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-28 01:11:22,423 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 01:11:22,767 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:11:22] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:11:28,982 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:11:28] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:11:29,499 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:11:29,672 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:11:29] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:11:39,131 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:11:39] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:11:39,644 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:11:39,889 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:11:39] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:12:06,356 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:06] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:12:06,358 - app - WARNING - Authentication error: Signature has expired
2025-07-28 01:12:06,358 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:06] "[31m[1mGET /api/flow/253 HTTP/1.1[0m" 401 -
2025-07-28 01:12:06,376 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:06] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-28 01:12:06,376 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:06] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-28 01:12:06,378 - app - WARNING - Authentication error: Signature has expired
2025-07-28 01:12:06,378 - app - WARNING - Authentication error: Signature has expired
2025-07-28 01:12:06,378 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:06] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-28 01:12:06,378 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:06] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-28 01:12:06,395 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:06] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 01:12:06,398 - app - WARNING - Authentication error: Signature has expired
2025-07-28 01:12:06,398 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:06] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-28 01:12:09,932 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:09] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 01:12:11,043 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:11] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 01:12:11,620 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:12:11,791 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:11] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:12:14,375 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:14] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:12:14,897 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:12:15,068 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:15] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:12:26,712 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:26] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:12:27,228 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:12:27,400 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:12:27] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:14:52,403 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:14:52] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:14:52,922 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:14:53,093 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:14:53] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:16:48,541 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:16:48] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:16:49,061 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 01:16:49,917 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 01:16:50,094 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-28 01:16:50,095 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 01:16:50,445 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:16:50] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:17:35,278 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:17:35] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:17:35,798 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:17:35,970 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:17:35] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:19:24,564 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:19:24] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:19:25,080 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:19:25,250 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:19:25] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:22:02,788 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:22:02] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:22:03,324 - api.flow_api - INFO - Cache miss for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 01:22:04,189 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 01:22:04,366 - api.flow_api - INFO - DB query for edges returned 24 items.
2025-07-28 01:22:04,367 - api.flow_api - INFO - Flow data for plubot 253 stored in cache with key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 01:22:04,714 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:22:04] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:22:14,527 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:22:14] "OPTIONS /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:22:15,062 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:22:15,237 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:22:15] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:22:19,810 - api.flow_api - INFO - Cache hit for key flow:253:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:22:19,982 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:22:19] "GET /api/flow/253 HTTP/1.1" 200 -
2025-07-28 01:22:23,640 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:22:23] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 01:22:24,858 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:22:24] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-28 01:31:17,955 - root - INFO - Sistema de logging configurado correctamente
2025-07-28 01:31:17,963 - root - INFO - Sistema de logging configurado correctamente
2025-07-28 01:31:19,341 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-28 01:31:19,342 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-28 01:34:38,891 - api.auth - INFO - Recibida solicitud para /api/auth/register con método OPTIONS
2025-07-28 01:34:38,893 - api.auth - INFO - Respondiendo a solicitud OPTIONS para /api/auth/register
2025-07-28 01:34:38,896 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:34:38] "OPTIONS /api/auth/register HTTP/1.1" 200 -
2025-07-28 01:34:39,110 - api.auth - INFO - Recibida solicitud para /api/auth/register con método POST
2025-07-28 01:34:42,956 - api.auth - INFO - Iniciando envío de email de verificación para unfortunate.tyrannosaurus.dqtn@letterprotect.net
2025-07-28 01:34:47,972 - api.auth - INFO - Correo de verificación encolado para envío asíncrono a unfortunate.tyrannosaurus.dqtn@letterprotect.net
2025-07-28 01:34:48,142 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:34:48] "[35m[1mPOST /api/auth/register HTTP/1.1[0m" 201 -
2025-07-28 01:34:58,239 - api.auth - INFO - Correo asíncrono enviado exitosamente a ['unfortunate.tyrannosaurus.dqtn@letterprotect.net']
2025-07-28 01:36:02,787 - api.auth - ERROR - Error al verificar el email con token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1MzY3NzI4MiwianRpIjoiNTI4OTdmYjUtMGJiNS00OGFlLTg2NzctZjM2ZjFlN2U5MGRhIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc0IiwibmJmIjoxNzUzNjc3MjgyLCJjc3JmIjoiMjM0ZjRmODQtYjFiYi00MDEzLWJkZjItYzE3NzNmMzI3ZmI3IiwiZXhwIjoxNzUzNzYzNjgyLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.Ej8Yqk4fNBADBr8sf9GZfswIrvLS-
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 293, in _load
    signature = base64url_decode(crypto_segment)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/utils.py", line 33, in base64url_decode
    return base64.urlsafe_b64decode(input_bytes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/base64.py", line 134, in urlsafe_b64decode
    return b64decode(s)
           ^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.13/Frameworks/Python.framework/Versions/3.11/lib/python3.11/base64.py", line 88, in b64decode
    return binascii.a2b_base64(s, strict_mode=validate)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
binascii.Error: Invalid base64-encoded string: number of data characters (29) cannot be 1 more than a multiple of 4

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rex/Desktop/Plubot/plubot-backend/api/auth.py", line 190, in verify_email
    decoded_token = decode_token(token)
                    ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/utils.py", line 128, in decode_token
    return jwt_manager._decode_jwt_from_config(encoded_token, csrf_value, allow_expired)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/flask_jwt_extended/jwt_manager.py", line 535, in _decode_jwt_from_config
    unverified_claims = jwt.decode(
                        ^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 222, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jwt.py", line 156, in decode_complete
    decoded = api_jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 209, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                ^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/jwt/api_jws.py", line 295, in _load
    raise DecodeError("Invalid crypto padding") from err
jwt.exceptions.DecodeError: Invalid crypto padding
2025-07-28 01:36:02,794 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:36:02] "[31m[1mGET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1MzY3NzI4MiwianRpIjoiNTI4OTdmYjUtMGJiNS00OGFlLTg2NzctZjM2ZjFlN2U5MGRhIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc0IiwibmJmIjoxNzUzNjc3MjgyLCJjc3JmIjoiMjM0ZjRmODQtYjFiYi00MDEzLWJkZjItYzE3NzNmMzI3ZmI3IiwiZXhwIjoxNzUzNzYzNjgyLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.Ej8Yqk4fNBADBr8sf9GZfswIrvLS- HTTP/1.1[0m" 400 -
2025-07-28 01:36:15,882 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:36:15] "GET /api/auth/verify-email/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc1MzY3NzI4MiwianRpIjoiNTI4OTdmYjUtMGJiNS00OGFlLTg2NzctZjM2ZjFlN2U5MGRhIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6Ijc0IiwibmJmIjoxNzUzNjc3MjgyLCJjc3JmIjoiMjM0ZjRmODQtYjFiYi00MDEzLWJkZjItYzE3NzNmMzI3ZmI3IiwiZXhwIjoxNzUzNzYzNjgyLCJwdXJwb3NlIjoiZW1haWxfdmVyaWZ5In0.Ej8Yqk4fNBADBr8sf9GZfswIrvLS-_RfK2vYoR_7nAQ HTTP/1.1" 200 -
2025-07-28 01:36:30,383 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:36:30] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 01:36:31,504 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:36:31] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 01:36:54,433 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:36:54] "OPTIONS /api/plubots/create HTTP/1.1" 200 -
2025-07-28 01:36:59,061 - services.grok_service - INFO - Successfully connected to Redis for caching.
2025-07-28 01:37:01,705 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:01] "POST /api/plubots/create HTTP/1.1" 200 -
2025-07-28 01:37:02,693 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:02] "OPTIONS /api/auth/profile HTTP/1.1" 200 -
2025-07-28 01:37:04,076 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:04] "GET /api/auth/profile HTTP/1.1" 200 -
2025-07-28 01:37:05,790 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:05] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:37:06,312 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 01:37:06,843 - api.flow_api - INFO - DB query for flows returned 0 items.
2025-07-28 01:37:07,018 - api.flow_api - INFO - DB query for edges returned 0 items.
2025-07-28 01:37:07,019 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 01:37:07,366 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:07] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:37:36,381 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:36] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:37:36,905 - api.flow_api - INFO - [PATCH /api/flow/255] Received raw data: {'plubotId': '255', 'flowName': 'Shine', 'nodes': [{'id': 'start-b21c5b07', 'type': 'start', 'position': {'x': 346, 'y': -40}, 'data': {'id': 'start-b21c5b07', 'label': 'Inicio'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 346, 'y': -40}, 'dragging': False}, {'id': 'message-65de2da7', 'type': 'message', 'position': {'x': 692, 'y': 2}, 'data': {'id': 'message-65de2da7', 'label': 'Mensaje'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 212, 'height': 101, 'selected': False, 'positionAbsolute': {'x': 692, 'y': 2}, 'dragging': False}, {'id': 'decision-15194846', 'type': 'decision', 'position': {'x': 675, 'y': 193}, 'data': {'id': 'decision-15194846', 'label': 'Decisión', 'handleIds': ['output-0', 'output-1'], 'conditions': [{'id': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'text': 'Opción A', 'color': '#3498db'}, {'id': 'deb25c04-a26d-42cb-a609-5116da82a666', 'text': 'Opción B', 'color': '#e74c3c'}, {'id': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'text': 'Nueva condición', 'condition': '', 'color': '#FFA500'}]}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 675, 'y': 193}, 'dragging': False}, {'id': 'end-9d38d44b', 'type': 'end', 'position': {'x': 1007, 'y': 805}, 'data': {'id': 'end-9d38d44b', 'label': 'Fin'}, 'draggable': True, 'selectable': True, 'connectable': True, 'style': {'opacity': 1, 'visibility': 'visible'}, 'hidden': False, 'width': 310, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1007, 'y': 805}, 'dragging': False}, {'id': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'type': 'option', 'position': {'x': 242, 'y': 593}, 'data': {'sourceNode': 'decision-15194846', 'conditionId': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'text': 'Opción A', 'instruction': 'Opción A', 'color': '#3498db', 'lastUpdated': '2025-07-28T04:37:17.049Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124}, {'id': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'type': 'option', 'position': {'x': 582, 'y': 602}, 'data': {'sourceNode': 'decision-15194846', 'conditionId': 'deb25c04-a26d-42cb-a609-5116da82a666', 'text': 'Opción B', 'instruction': 'Opción B', 'color': '#e74c3c', 'lastUpdated': '2025-07-28T04:37:17.049Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124, 'selected': False, 'positionAbsolute': {'x': 582, 'y': 602}, 'dragging': False}, {'id': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'type': 'option', 'position': {'x': 881, 'y': 570}, 'data': {'sourceNode': 'decision-15194846', 'conditionId': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'text': 'Nueva condición', 'instruction': 'Nueva condición', 'color': '#FFA500', 'lastUpdated': '2025-07-28T04:37:17.049Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 124, 'selected': False, 'positionAbsolute': {'x': 881, 'y': 570}, 'dragging': False}], 'edges': [{'id': 'edge-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'source': 'decision-15194846', 'target': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'sourceHandle': 'output-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'source': 'decision-15194846', 'target': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'sourceHandle': 'output-deb25c04-a26d-42cb-a609-5116da82a666', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'source': 'decision-15194846', 'target': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'sourceHandle': 'output-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}, {'zIndex': 0, 'source': 'start-b21c5b07', 'sourceHandle': 'output', 'target': 'message-65de2da7', 'targetHandle': 'default', 'id': 'reactflow__edge-start-b21c5b07output-message-65de2da7default'}, {'zIndex': 0, 'source': 'message-65de2da7', 'sourceHandle': 'default', 'target': 'decision-15194846', 'targetHandle': None, 'id': 'reactflow__edge-message-65de2da7default-decision-15194846'}, {'zIndex': 0, 'source': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0esource-end-9d38d44b'}, {'zIndex': 0, 'source': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5source-end-9d38d44b'}, {'zIndex': 0, 'source': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'targetHandle': None, 'id': 'reactflow__edge-option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666source-end-9d38d44b'}]}
2025-07-28 01:37:36,905 - api.flow_api - INFO - [PATCH /api/flow/255] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-28 01:37:37,614 - api.flow_api - INFO - [update_full_flow - plubot_id=255] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-28 01:37:39,928 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 255
2025-07-28 01:37:39,929 - api.flow_api - INFO - Flujo actualizado para plubot 255 por usuario 74
2025-07-28 01:37:40,103 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:40] "PATCH /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:37:57,431 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:57] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:37:57,954 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 01:37:58,473 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 01:37:58,645 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 01:37:58,646 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 01:37:58,987 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:37:58] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:40:35,274 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:40:35] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:40:35,799 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:40:35,981 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:40:35] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:43:43,869 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:43:43] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:43:44,392 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 01:43:44,919 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 01:43:45,091 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 01:43:45,092 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 01:43:45,435 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:43:45] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:44:19,144 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:44:19] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:44:19,749 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:44:19,920 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:44:19] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:44:35,287 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:44:35] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:44:35,804 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:44:35,980 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:44:35] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:45:26,257 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:45:26] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:45:26,774 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:45:26,965 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:45:26] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:45:33,735 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:45:33] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:45:34,251 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:45:34,423 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:45:34] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:46:27,823 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:46:27] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:46:28,353 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:46:28,525 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:46:28] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:48:15,203 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:48:15] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:48:15,734 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 01:48:15,909 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:48:15] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:50:08,750 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:50:08] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 01:50:09,272 - api.flow_api - INFO - [PATCH /api/flow/255] Received raw data: {'plubotId': '255', 'flowName': 'Shine', 'nodes': [{'data': {'id': 'start-b21c5b07', 'label': 'Inicio'}, 'id': 'start-b21c5b07', 'position': {'x': 428.58776649357213, 'y': -60.64694162339305}, 'type': 'start', 'width': 229, 'height': 142, 'selected': False, 'positionAbsolute': {'x': 428.58776649357213, 'y': -60.64694162339305}, 'dragging': False}, {'data': {'id': 'message-65de2da7', 'label': 'Mensaje', 'message': 'Holis', 'variables': [], 'lastUpdated': '2025-07-28T04:49:41.244Z'}, 'id': 'message-65de2da7', 'position': {'x': 783.0698301363249, 'y': 88.1058059554174}, 'type': 'message', 'width': 226, 'height': 104, 'selected': False, 'positionAbsolute': {'x': 783.0698301363249, 'y': 88.1058059554174}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': 'deb25c04-a26d-42cb-a609-5116da82a666', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'text': 'Opción C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-15194846', 'label': 'Decisión', 'isEditing': False, 'question': '3 caminos A, B o C'}, 'id': 'decision-15194846', 'position': {'x': 696.3074053266023, 'y': 223.4391504665747}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'positionAbsolute': {'x': 696.3074053266023, 'y': 223.4391504665747}, 'dragging': False}, {'data': {'id': 'end-9d38d44b', 'label': 'Fin'}, 'id': 'end-9d38d44b', 'position': {'x': 1063.174972511597, 'y': 790.2171124969482}, 'type': 'end', 'width': 310, 'height': 132, 'selected': False, 'positionAbsolute': {'x': 1063.174972511597, 'y': 790.2171124969482}, 'dragging': False}, {'id': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'type': 'option', 'position': {'x': 385.933400084583, 'y': 466.336469980641}, 'data': {'sourceNode': 'decision-15194846', 'conditionId': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'text': 'Opción A', 'instruction': 'Opción A', 'color': '#3498db', 'lastUpdated': '2025-07-28T04:50:01.560Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 385.933400084583, 'y': 466.336469980641}, 'dragging': False}, {'id': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'type': 'option', 'position': {'x': 702.0891706899685, 'y': 616.1186399406764}, 'data': {'sourceNode': 'decision-15194846', 'conditionId': 'deb25c04-a26d-42cb-a609-5116da82a666', 'text': 'Opción B', 'instruction': 'Opción B', 'color': '#e74c3c', 'lastUpdated': '2025-07-28T04:50:01.560Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 122, 'selected': True, 'positionAbsolute': {'x': 702.0891706899685, 'y': 616.1186399406764}, 'dragging': False}, {'id': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'type': 'option', 'position': {'x': 1001.9150417337255, 'y': 450.4485738643202}, 'data': {'sourceNode': 'decision-15194846', 'conditionId': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'text': 'Opción C', 'instruction': 'Opción C', 'color': '#FFA500', 'lastUpdated': '2025-07-28T04:50:01.560Z'}, 'draggable': True, 'deletable': True, 'width': 320, 'height': 122, 'selected': False, 'positionAbsolute': {'x': 1001.9150417337255, 'y': 450.4485738643202}, 'dragging': False}], 'edges': [{'animated': True, 'id': '10908', 'label': '', 'source': 'start-b21c5b07', 'target': 'message-65de2da7', 'type': 'default'}, {'animated': True, 'id': '10909', 'label': '', 'source': 'message-65de2da7', 'target': 'decision-15194846', 'type': 'eliteEdge'}, {'animated': True, 'id': '10910', 'label': '', 'source': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10912', 'label': '', 'source': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10911', 'label': '', 'source': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'id': 'edge-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'source': 'decision-15194846', 'target': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'sourceHandle': 'output-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#3498db', 'strokeWidth': 2}}, {'id': 'edge-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'source': 'decision-15194846', 'target': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'sourceHandle': 'output-deb25c04-a26d-42cb-a609-5116da82a666', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#e74c3c', 'strokeWidth': 2}}, {'id': 'edge-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'source': 'decision-15194846', 'target': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'sourceHandle': 'output-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'targetHandle': 'target', 'type': 'eliteEdge', 'animated': True, 'style': {'stroke': '#FFA500', 'strokeWidth': 2}}]}
2025-07-28 01:50:09,273 - api.flow_api - INFO - [PATCH /api/flow/255] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-28 01:50:10,354 - api.flow_api - INFO - [update_full_flow - plubot_id=255] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-28 01:50:13,503 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 255
2025-07-28 01:50:13,503 - api.flow_api - INFO - Flujo actualizado para plubot 255 por usuario 74
2025-07-28 01:50:13,675 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 01:50:13] "PATCH /api/flow/255 HTTP/1.1" 200 -
2025-07-28 02:12:29,668 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:12:29] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 02:12:30,910 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:12:30] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-28 02:12:40,328 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:12:40] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 02:12:41,434 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:12:41] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 02:41:36,092 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:41:36] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 02:41:36,618 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 02:41:37,144 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 02:41:37,321 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 02:41:37,321 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 02:41:37,665 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:41:37] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 02:41:47,654 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:41:47] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 02:41:49,266 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:41:49] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-28 02:41:50,210 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:41:50] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 02:41:51,325 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:41:51] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 02:44:09,521 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:44:09] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 02:44:10,040 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 02:44:10,213 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:44:10] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 02:58:46,762 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:58:46] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 02:58:47,285 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 02:58:47,815 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 02:58:48,017 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 02:58:48,018 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 02:58:48,364 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 02:58:48] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 03:38:27,803 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:38:27] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 03:38:28,338 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 03:38:29,021 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 03:38:29,195 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 03:38:29,196 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 03:38:29,542 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:38:29] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 03:52:15,003 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:15] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 03:52:15,007 - app - WARNING - Authentication error: Signature has expired
2025-07-28 03:52:15,008 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:15] "[31m[1mGET /api/flow/255 HTTP/1.1[0m" 401 -
2025-07-28 03:52:15,035 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:15] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-28 03:52:15,036 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:15] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-28 03:52:15,041 - app - WARNING - Authentication error: Signature has expired
2025-07-28 03:52:15,042 - app - WARNING - Authentication error: Signature has expired
2025-07-28 03:52:15,042 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:15] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-28 03:52:15,043 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:15] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-28 03:52:15,053 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:15] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 03:52:15,058 - app - WARNING - Authentication error: Signature has expired
2025-07-28 03:52:15,058 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:15] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-28 03:52:19,889 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:19] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 03:52:21,009 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:21] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 03:52:21,061 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:21] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 03:52:21,583 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 03:52:22,263 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 03:52:22,436 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 03:52:22,437 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 03:52:22,783 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:22] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 03:52:31,886 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:31] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 03:52:32,409 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 03:52:32,583 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 03:52:32] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:07:27,595 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:07:27] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:07:28,130 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 04:07:28,661 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 04:07:28,839 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 04:07:28,839 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 04:07:29,185 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:07:29] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:45:27,279 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:45:27] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 04:45:28,515 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:45:28] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-28 04:45:33,040 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:45:33] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 04:45:34,159 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:45:34] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 04:45:39,893 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:45:39] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:45:40,418 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 04:45:40,947 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 04:45:41,122 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 04:45:41,122 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 04:45:41,474 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:45:41] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:46:16,976 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:46:16] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:46:17,499 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 04:46:17,670 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:46:17] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:48:39,131 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:48:39] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:48:39,660 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 04:48:39,833 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:48:39] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:49:29,740 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:49:29] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:49:30,262 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 04:49:30,439 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:49:30] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:53:51,287 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:53:51] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 04:53:51,830 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 04:53:52,357 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 04:53:52,531 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 04:53:52,532 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 04:53:52,879 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 04:53:52] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:02:39,239 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:02:39] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:02:39,766 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 05:02:40,334 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 05:02:40,510 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 05:02:40,510 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 05:02:40,858 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:02:40] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:07:53,159 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:07:53] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:07:53,691 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 05:07:54,297 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 05:07:54,473 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 05:07:54,474 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 05:07:54,820 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:07:54] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:08:04,403 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:08:04] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:08:04,940 - api.flow_api - INFO - [PATCH /api/flow/255] Received raw data: {'plubotId': '255', 'flowName': 'Shine', 'nodes': [{'data': {'id': 'start-b21c5b07', 'label': 'Inicio'}, 'id': 'start-b21c5b07', 'position': {'x': 428.58776649357213, 'y': -60.64694162339305}, 'type': 'start', 'width': 198, 'height': 76}, {'data': {'id': 'message-65de2da7', 'label': 'Mensaje', 'lastUpdated': '2025-07-28T04:49:41.244Z', 'message': 'Holis', 'variables': []}, 'id': 'message-65de2da7', 'position': {'x': 783.0698301363249, 'y': 88.1058059554174}, 'type': 'message', 'width': 178, 'height': 58}, {'data': {'conditions': [{'color': '#3498db', 'id': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': 'deb25c04-a26d-42cb-a609-5116da82a666', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'text': 'Opción C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-15194846', 'isEditing': False, 'label': 'Decisión', 'question': '3 caminos A, B o C'}, 'id': 'decision-15194846', 'position': {'x': 696.3074053266023, 'y': 223.4391504665747}, 'type': 'decision', 'width': 198, 'height': 76}, {'data': {'id': 'end-9d38d44b', 'label': 'Fin'}, 'id': 'end-9d38d44b', 'position': {'x': 1063.174972511597, 'y': 790.2171124969482}, 'type': 'end', 'width': 198, 'height': 76}, {'data': {'color': '#3498db', 'conditionId': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'instruction': 'Opción A', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opción A'}, 'id': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'position': {'x': 385.933400084583, 'y': 466.336469980641}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#e74c3c', 'conditionId': 'deb25c04-a26d-42cb-a609-5116da82a666', 'instruction': 'Opción B', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opción B'}, 'id': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'position': {'x': 702.0891706899685, 'y': 616.1186399406764}, 'type': 'option', 'width': 198, 'height': 76}, {'data': {'color': '#FFA500', 'conditionId': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'instruction': 'Opción C', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opción C'}, 'id': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'position': {'x': 1001.9150417337255, 'y': 450.4485738643202}, 'type': 'option', 'width': 198, 'height': 76}], 'edges': [{'animated': True, 'id': '10913', 'label': '', 'source': 'start-b21c5b07', 'target': 'message-65de2da7', 'type': 'default'}, {'animated': True, 'id': '10914', 'label': '', 'source': 'message-65de2da7', 'target': 'decision-15194846', 'type': 'eliteEdge'}, {'animated': True, 'id': '10905', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'target': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10906', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-deb25c04-a26d-42cb-a609-5116da82a666', 'target': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10907', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'target': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10915', 'label': '', 'source': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10916', 'label': '', 'source': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10917', 'label': '', 'source': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}]}
2025-07-28 05:08:04,941 - api.flow_api - INFO - [PATCH /api/flow/255] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-28 05:08:05,658 - api.flow_api - INFO - [update_full_flow - plubot_id=255] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-28 05:08:07,755 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 255
2025-07-28 05:08:07,755 - api.flow_api - INFO - Flujo actualizado para plubot 255 por usuario 74
2025-07-28 05:08:07,927 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:08:07] "PATCH /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:09:32,263 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:09:32] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:09:32,796 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 05:09:33,327 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 05:09:33,502 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 05:09:33,503 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 05:09:33,847 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:09:33] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:10:06,326 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:10:06] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:10:06,860 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 05:10:07,032 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:10:07] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:10:16,353 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:10:16] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:10:16,876 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 05:10:17,051 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:10:17] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:14:47,400 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:14:47] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:14:47,930 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 05:14:48,460 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 05:14:48,636 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 05:14:48,636 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 05:14:48,983 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:14:48] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:15:04,111 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:15:04] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:15:04,632 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 05:15:04,805 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:15:04] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:15:38,449 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:15:38] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 05:15:39,681 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:15:39] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-28 05:15:56,218 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:15:56] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 05:15:57,383 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:15:57] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 05:16:05,536 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:16:05] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:16:06,066 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 05:16:06,240 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:16:06] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:16:24,951 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:16:24] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:16:25,498 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 05:16:25,672 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:16:25] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:18:39,680 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:18:39] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:18:40,217 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 05:18:40,390 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:18:40] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:19:05,422 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:19:05] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 05:19:05,947 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 05:19:06,121 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 05:19:06] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 22:59:42,196 - root - INFO - Sistema de logging configurado correctamente
2025-07-28 22:59:42,204 - root - INFO - Sistema de logging configurado correctamente
2025-07-28 22:59:42,221 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-28 22:59:42,221 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-28 23:13:41,821 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:41] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:13:41,825 - app - WARNING - Authentication error: Signature has expired
2025-07-28 23:13:41,826 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:41] "[31m[1mGET /api/flow/255 HTTP/1.1[0m" 401 -
2025-07-28 23:13:41,833 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:41] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-28 23:13:41,834 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:41] "OPTIONS /api/auth/refresh HTTP/1.1" 200 -
2025-07-28 23:13:41,836 - app - WARNING - Authentication error: Signature has expired
2025-07-28 23:13:41,837 - app - WARNING - Authentication error: Signature has expired
2025-07-28 23:13:41,838 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:41] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-28 23:13:41,838 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:41] "[31m[1mPOST /api/auth/refresh HTTP/1.1[0m" 401 -
2025-07-28 23:13:41,848 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:41] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-28 23:13:41,850 - app - WARNING - Authentication error: Signature has expired
2025-07-28 23:13:41,851 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:41] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-28 23:13:45,164 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:45] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-28 23:13:48,885 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:48] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-28 23:13:48,915 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:48] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:13:51,934 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 23:13:52,479 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 23:13:52,653 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 23:13:52,654 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 23:13:52,993 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:13:52] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:20:35,880 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:20:35] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:20:36,396 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 23:20:36,920 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 23:20:37,093 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 23:20:37,093 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 23:20:37,434 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:20:37] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:21:37,248 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:21:37] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:21:37,759 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:21:37,928 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:21:37] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:22:01,370 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:22:01] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:22:01,894 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:22:02,063 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:22:02] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:24:21,150 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:24:21] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:24:21,668 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:24:21,839 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:24:21] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:31:42,246 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:31:42] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:31:42,862 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 23:31:43,767 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 23:31:43,941 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 23:31:43,942 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 23:31:44,289 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:31:44] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:32:15,540 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:32:15] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:32:16,056 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:32:16,234 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:32:16] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:35:42,472 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:35:42] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-07-28 23:35:43,606 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:35:43] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-07-28 23:35:57,768 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:35:57] "[33mGET /api/placeholder/50/50 HTTP/1.1[0m" 404 -
2025-07-28 23:41:01,226 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:41:01] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:41:01,751 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 23:41:02,273 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 23:41:02,445 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 23:41:02,446 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 23:41:02,787 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:41:02] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:46:20,851 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:46:20] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:46:21,368 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 23:46:21,888 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 23:46:22,061 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 23:46:22,062 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 23:46:22,403 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:46:22] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:49:30,800 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:49:30] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:49:31,313 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:49:31,482 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:49:31] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:49:51,221 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:49:51] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:49:51,738 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:49:51,907 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:49:51] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:50:32,349 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:50:32] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:50:32,878 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:50:33,056 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:50:33] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:50:44,823 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:50:44] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:50:45,335 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:50:45,505 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:50:45] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:51:03,917 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:51:03] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:51:04,455 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:51:04,625 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:51:04] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:52:18,476 - root - INFO - Sistema de logging configurado correctamente
2025-07-28 23:52:18,485 - root - INFO - Sistema de logging configurado correctamente
2025-07-28 23:52:18,497 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-28 23:52:18,497 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-28 23:52:21,664 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:52:21] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:52:25,133 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 23:52:46,378 - root - INFO - Sistema de logging configurado correctamente
2025-07-28 23:52:46,385 - root - INFO - Sistema de logging configurado correctamente
2025-07-28 23:52:46,394 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-28 23:52:46,394 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-28 23:52:49,507 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:52:49] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:52:52,543 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-28 23:52:55,543 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-28 23:52:55,718 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-28 23:52:55,718 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-28 23:52:56,064 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:52:56] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:54:21,157 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:54:21] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:54:21,679 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-28 23:54:21,852 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:54:21] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:54:29,497 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:54:29] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-28 23:54:30,048 - api.flow_api - INFO - [PATCH /api/flow/255] Received raw data: {'plubotId': '255', 'flowName': 'Shine', 'nodes': [{'data': {'id': 'start-b21c5b07', 'label': 'Inicio'}, 'id': 'start-b21c5b07', 'position': {'x': 428.58776649357213, 'y': -60.64694162339305}, 'type': 'start', 'width': 229, 'height': 142}, {'data': {'id': 'message-65de2da7', 'label': 'Mensaje', 'lastUpdated': '2025-07-28T04:49:41.244Z', 'message': 'Holis', 'variables': []}, 'id': 'message-65de2da7', 'position': {'x': 722.0698301363249, 'y': 75.1058059554174}, 'type': 'message', 'width': 226, 'height': 104, 'selected': True, 'positionAbsolute': {'x': 722.0698301363249, 'y': 75.1058059554174}, 'dragging': False}, {'data': {'conditions': [{'color': '#3498db', 'id': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'text': 'Opción A'}, {'color': '#e74c3c', 'id': 'deb25c04-a26d-42cb-a609-5116da82a666', 'text': 'Opción B'}, {'color': '#FFA500', 'condition': '', 'id': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'text': 'Opción C'}], 'handleIds': ['output-0', 'output-1'], 'id': 'decision-15194846', 'isEditing': False, 'label': 'Decisión', 'question': '3 caminos A, B o C'}, 'id': 'decision-15194846', 'position': {'x': 696.3074053266023, 'y': 223.4391504665747}, 'type': 'decision', 'width': 150, 'height': 40, 'selected': False, 'dragging': False}, {'data': {'id': 'end-9d38d44b', 'label': 'Fin'}, 'id': 'end-9d38d44b', 'position': {'x': 1063.174972511597, 'y': 790.2171124969482}, 'type': 'end', 'width': 310, 'height': 132}, {'data': {'color': '#3498db', 'conditionId': '1707b666-c87b-4dcc-8054-2b01ddccce0e', 'instruction': 'Opción A', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opción A'}, 'id': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'position': {'x': 385.933400084583, 'y': 466.336469980641}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#e74c3c', 'conditionId': 'deb25c04-a26d-42cb-a609-5116da82a666', 'instruction': 'Opción B', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opción B'}, 'id': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'position': {'x': 702.0891706899685, 'y': 616.1186399406764}, 'type': 'option', 'width': 320, 'height': 127}, {'data': {'color': '#FFA500', 'conditionId': 'condition-80b385af-289b-42bc-b250-697c9ad265a5', 'instruction': 'Opción C', 'lastUpdated': '2025-07-28T04:50:01.560Z', 'sourceNode': 'decision-15194846', 'text': 'Opción C'}, 'id': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'position': {'x': 1001.9150417337255, 'y': 450.4485738643202}, 'type': 'option', 'width': 320, 'height': 127}], 'edges': [{'animated': True, 'id': '10918', 'label': '', 'source': 'start-b21c5b07', 'target': 'message-65de2da7', 'type': 'default'}, {'animated': True, 'id': '10919', 'label': '', 'source': 'message-65de2da7', 'target': 'decision-15194846', 'type': 'eliteEdge'}, {'animated': True, 'id': '10920', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'target': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10921', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-deb25c04-a26d-42cb-a609-5116da82a666', 'target': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10922', 'label': '', 'source': 'decision-15194846', 'sourceHandle': 'output-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'target': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'targetHandle': 'target', 'type': 'eliteEdge'}, {'animated': True, 'id': '10923', 'label': '', 'source': 'option-decision-15194846-1707b666-c87b-4dcc-8054-2b01ddccce0e', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10924', 'label': '', 'source': 'option-decision-15194846-deb25c04-a26d-42cb-a609-5116da82a666', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}, {'animated': True, 'id': '10925', 'label': '', 'source': 'option-decision-15194846-condition-80b385af-289b-42bc-b250-697c9ad265a5', 'sourceHandle': 'source', 'target': 'end-9d38d44b', 'type': 'eliteEdge'}]}
2025-07-28 23:54:30,049 - api.flow_api - INFO - [PATCH /api/flow/255] Extracted: nodes_count=7, edges_count=8, name='N/A'
2025-07-28 23:54:30,735 - api.flow_api - INFO - [update_full_flow - plubot_id=255] Starting update. Received: nodes_count=7, edges_count=8, name='None'
2025-07-28 23:54:32,973 - services.cache_service - INFO - Caché de flujo invalidada para plubot: 255
2025-07-28 23:54:32,974 - api.flow_api - INFO - Flujo actualizado para plubot 255 por usuario 74
2025-07-28 23:54:33,147 - werkzeug - INFO - 127.0.0.1 - - [28/Jul/2025 23:54:33] "PATCH /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:04:25,942 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:04:25] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:04:26,490 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 00:04:27,020 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 00:04:27,192 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 00:04:27,193 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 00:04:27,553 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:04:27] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:04:29,135 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:04:29] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 00:04:30,394 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:04:30] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 00:04:58,654 - app - WARNING - Authentication error: Missing Authorization Header
2025-07-29 00:04:58,656 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:04:58] "[31m[1mGET /api/flow/255 HTTP/1.1[0m" 401 -
2025-07-29 00:14:22,067 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:14:22] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 00:14:23,179 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:14:23] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 00:14:23,284 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:14:23] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:14:23,804 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 00:14:24,333 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 00:14:24,506 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 00:14:24,506 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 00:14:24,849 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:14:24] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:14:32,393 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:14:32] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:14:32,910 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 00:14:33,081 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:14:33] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:29:34,916 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:29:34] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 00:29:36,127 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:29:36] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 00:33:37,136 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:33:37] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 00:33:38,230 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:33:38] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 00:33:38,268 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:33:38] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:33:38,785 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 00:33:39,306 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 00:33:39,477 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 00:33:39,478 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 00:33:39,819 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:33:39] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:48:31,829 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:48:31] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 00:48:32,374 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 00:48:32,897 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 00:48:33,069 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 00:48:33,069 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 00:48:33,415 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 00:48:33] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 01:39:04,288 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:39:04] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 01:39:04,291 - app - WARNING - Authentication error: Signature has expired
2025-07-29 01:39:04,293 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:39:04] "[31m[1mPOST /api/auth/logout HTTP/1.1[0m" 401 -
2025-07-29 01:39:15,098 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:39:15] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 01:39:16,216 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:39:16] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 01:39:16,282 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:39:16] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 01:39:16,808 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 01:39:17,328 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 01:39:17,501 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 01:39:17,502 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 01:39:17,846 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:39:17] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 01:41:01,921 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:41:01] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 01:41:02,449 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 01:41:02,624 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:41:02] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 01:42:03,840 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:42:03] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 01:42:04,367 - api.flow_api - INFO - Cache hit for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8. Returning cached data.
2025-07-29 01:42:04,540 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:42:04] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 01:52:04,332 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:52:04] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 01:52:05,444 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:52:05] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 01:53:42,271 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:53:42] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 01:53:42,804 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 01:53:43,332 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 01:53:43,506 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 01:53:43,507 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 01:53:43,857 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 01:53:43] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:00:48,344 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:00:48] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:00:48,889 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 02:00:49,417 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 02:00:49,591 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 02:00:49,592 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 02:00:49,939 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:00:49] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:16:18,846 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:16:18] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 02:16:20,068 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:16:20] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 02:16:20,818 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:16:20] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 02:16:21,925 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:16:21] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 02:16:21,977 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:16:21] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:16:22,516 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 02:16:23,040 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 02:16:23,212 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 02:16:23,212 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 02:16:23,559 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:16:23] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:34:04,947 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:34:04] "OPTIONS /api/auth/logout HTTP/1.1" 200 -
2025-07-29 02:34:06,179 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:34:06] "POST /api/auth/logout HTTP/1.1" 200 -
2025-07-29 02:34:06,700 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:34:06] "OPTIONS /api/auth/login HTTP/1.1" 200 -
2025-07-29 02:34:07,834 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:34:07] "POST /api/auth/login HTTP/1.1" 200 -
2025-07-29 02:34:07,887 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:34:07] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:34:08,411 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 02:34:08,931 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 02:34:09,310 - api.flow_api - INFO - DB query for edges returned 8 items.
2025-07-29 02:34:09,310 - api.flow_api - INFO - Flow data for plubot 255 stored in cache with key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8
2025-07-29 02:34:09,654 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:34:09] "GET /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:39:12,363 - werkzeug - INFO - 127.0.0.1 - - [29/Jul/2025 02:39:12] "OPTIONS /api/flow/255 HTTP/1.1" 200 -
2025-07-29 02:39:12,895 - api.flow_api - INFO - Cache miss for key flow:255:3d70130104a259d52b8698d2cf836f6162d015a5fd078344d59b1e1aeeff65f8.
2025-07-29 02:39:13,420 - api.flow_api - INFO - DB query for flows returned 7 items.
2025-07-29 02:39:13,593 - api.flow_api - INFO - DB query for edges returned 8 items.
